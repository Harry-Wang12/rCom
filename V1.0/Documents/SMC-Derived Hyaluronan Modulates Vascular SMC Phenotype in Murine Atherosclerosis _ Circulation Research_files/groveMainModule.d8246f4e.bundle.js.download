/*
 jQuery JavaScript Library v3.6.0
 https://jquery.com/

 Includes Sizzle.js
 https://sizzlejs.com/

 Copyright OpenJS Foundation and other contributors
 Released under the MIT license
 https://jquery.org/license

 Date: 2021-03-02T17:08Z
 Sizzle CSS Selector Engine v2.3.6
 https://sizzlejs.com/

 Copyright JS Foundation and other contributors
 Released under the MIT license
 https://js.foundation/

 Date: 2021-02-16
 Determine if an object is a Buffer

 @author   Feross Aboukhadijeh <https://feross.org>
 @license  MIT
*/
rmq_webpackJsonp([6],{"+Fex":function(c,h,a){a.d(h,"a",function(){return f});var f=Object.freeze({TYPE:{SURVEY:"SURVEY",POLL:"POLL",REVIEW:"REVIEW"},extractType:function(a){switch(a){case 0:case "0":case "SURVEY":return"SURVEY";case 1:case "1":case "POLL":return"POLL";case 2:case "2":case "REVIEW":return"REVIEW";default:return null}},STATUS:{DRAFT:"DRAFT",READY:"READY",STARTED:"STARTED",STOPPED:"STOPPED",COMPLETED:"COMPLETED"},extractStatus:function(a){switch(a){case 0:case "0":case "DRAFT":return"DRAFT";
case 1:case "1":case "READY":return"READY";case 2:case "2":case "STARTED":return"STARTED";case 3:case "3":case "STOPPED":return"STOPPED";case 4:case "4":case "COMPLETED":return"COMPLETED";default:return null}},SCHEDULE:{MANUAL:"MANUAL",SCHEDULED:"SCHEDULED"},extractSchedule:function(a){switch(a){case "0":case 0:case "MANUAL":return"MANUAL";case 1:case "1":case "SCHEDULED":return"SCHEDULED";default:return null}},CONDITION:{PERCENT_PAGE:"PERCENT_PAGE",AFTER_SEC:"AFTER_SEC",BEFORE_LEAVE:"BEFORE_LEAVE"},
extractCondition:function(a){switch(a){case 0:case "0":case "PERCENT_PAGE":return"PERCENT_PAGE";case 1:case "1":case "AFTER_SEC":return"AFTER_SEC";case 2:case "2":case "BEFORE_LEAVE":return"BEFORE_LEAVE";default:return null}},FREQUENCY:{ONCE_DAY:"ONCE_DAY",PAGE_VIEW:"PAGE_VIEW"},extractFrequency:function(a){switch(a){case 0:case "0":case "ONCE_DAY":return"ONCE_DAY";case 1:case "1":case "PAGE_VIEW":return"PAGE_VIEW";default:return"null"}},SCOPE:{DOI:"DOI",DOI_REGEX:"DOI_REGEX",JOURNAL_ID:"JOURNAL_ID",
URL_REGEX:"URL_REGEX"},extractScope:function(a){switch(a){case 0:case "0":case "DOI":return"DOI";case 1:case "1":case "DOI_REGEX":return"DOI_REGEX";case 2:case "2":case "JOURNAL_ID":return"JOURNAL_ID";case 3:case "3":case "URL_REGEX":return"URL_REGEX";default:return null}},extractDto:function(a){if(a){var b=this;return{id:a.id,type:b.extractType(a.type),status:b.extractStatus(a.status),creationTime:a.creationTime,lastModified:a.lastModified,settings:function(a){return a?{condition:a.condition?{type:b.extractCondition(a.condition.type),
value:a.condition.value}:null,frequency:a.frequency?{type:b.extractFrequency(a.frequency.type),value:a.frequency.value}:null,positions:a.positions,schedule:a.schedule?{type:b.extractSchedule(a.schedule.type),from:a.schedule.from,to:a.schedule.to}:null,scopes:function(a){if(a&&a.scopes&&Array.isArray(a.scopes)){var d=[];a.scopes.forEach(function(a){a&&d.push({value:a.value,type:b.extractScope(a.type)})});return d}return[]}(a)}:null}(a.settings)}}return null}})},"/1gr":function(c,h,a){var f=a("tNLN");
c.exports=function(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=f(a),null!==a););return a};c.exports.__esModule=!0;c.exports["default"]=c.exports},"/JTF":function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});var f=a("CYdk");h["default"]=function(){var d=window,b=a("7t+N");if(b.xpath)return Promise.resolve(b);b.__orig="rmq";d.rmqJquery=b;d.jQuery&&(d.jQuery.__orig="own");var c=d.jQuery;d.jQuery=b;return window.Remarq&&window.Remarq.inOwnCode?a.e(0).then(a.bind(null,"xbmg")).then(function(a){return a})["catch"](function(a){error("Failed to load jQuery xpath",
a);throw a;}):Object(f["default"])(function(){return d.Remarq&&d.Remarq.grovePrefix}).then(function(b){var f=d.__webpack_public_path__;a.p=b+"dist/";a.e(0).then(a.bind(null,"xbmg")).then(function(a){return a})["catch"](function(a){error("Failed to load jQuery xpath",a);throw a;})["finally"](function(){a.p=f;c&&(d.jQuery=c)})})}()},"/gZ2":function(c,h){c.exports=function(a,c,d,b,w){w(a,function(a,f,m){d=b?(b=!1,a):c(d,a,f,m)});return d}},"037f":function(c,h,a){var f=a("1oyr"),d=a("p0bc");h=a("wSKX");
c.exports=d?function(a,c){return d(a,"toString",{configurable:!0,enumerable:!1,value:f(c),writable:!0})}:h},"07sv":function(c,h,a){var f=a("rpnb"),d=a("CxPB"),b=a("t8rQ");c.exports=function(a,c){return null==a?a:f(a,d(c),b)}},"09Qt":function(c,h,a){var f=a("uIr7"),d=a("vi0E"),b=a("l9Lx");h=a("C0hh");c.exports=Object.getOwnPropertySymbols?function(a){for(var c=[];a;)f(c,b(a)),a=d(a);return c}:h},"0Mzu":function(c,h,a){(function(a){!function(){var c,b,f,h,q,m=[].slice,A={}.hasOwnProperty,u=function(a,
x){function z(){this.constructor=a}for(var b in x)A.call(x,b)&&(a[b]=x[b]);z.prototype=x.prototype;a.prototype=new z;a.__super__=x.prototype;return a},e=function(a,x){return function(){return a.apply(x,arguments)}},r=[].indexOf||function(a){for(var x=0,z=this.length;x<z;x++)if(x in this&&this[x]===a)return x;return-1};var t=function(a){return this.map(function(){var x;var z="";for(x=this;(null!=x?x.nodeType:void 0)===Node.ELEMENT_NODE&&x!==a;){var b=x.tagName.replace(":","\\:");b=v(x.parentNode).children(b).index(x)+
1;b="["+b+"]";z="/"+x.tagName.toLowerCase()+b+z;x=x.parentNode}return z}).get()};var R=function(a){var x=function(a){var z=N(a);a=F(a);return""+z+"["+a+"]"};var z=function(z){var b;for(b="";z!==a;){if(null==z)throw Error("Called getPathTo on a node which was not a descendant of @rootNode. "+a);b=x(z)+"/"+b;z=z.parentNode}return b=("/"+b).replace(/\/$/,"")};return this.map(function(){return z(this)}).get()};var K=function(a,x,z){var b,c;if(!a.hasChildNodes())throw Error("XPath error: node has no children!");
var d=a.childNodes;var e=b=0;for(c=d.length;e<c;e++){a=d[e];var g=N(a);if(g===x&&(b+=1,b===z))return a}throw Error("XPath error: wanted child not found.");};var N=function(a){a=a.nodeName.toLowerCase();switch(a){case "#text":return"text()";case "#comment":return"comment()";case "#cdata-section":return"cdata-section()";default:return a}};var F=function(a){var x;var z=0;for(x=a;x;)x.nodeName===a.nodeName&&z++,x=x.previousSibling;return z};var G=null;if("undefined"!==typeof Gettext&&null!==Gettext){var I=
new Gettext({domain:"annotator"});G=function(a){return I.gettext(a)}}else G=function(a){return a};var B=function(a){return G(a)};var v=a;var H={flatten:function(a){var x=function(a){var z;var b=[];var c=0;for(z=a.length;c<z;c++){var d=a[c];b=b.concat(d&&v.isArray(d)?x(d):d)}return b};return x(a)},contains:function(a,x){for(;null!=x;){if(x===a)return!0;x=x.parentNode}return!1},getTextNodes:function(a){var x=function(a){if(a&&a.nodeType!==Node.TEXT_NODE){var z=[];if(a.nodeType!==Node.COMMENT_NODE)for(a=
a.lastChild;a;)z.push(x(a)),a=a.previousSibling;return z.reverse()}return a};return a.map(function(){return H.flatten(x(this))})},getLastTextNodeUpTo:function(a){switch(a.nodeType){case Node.TEXT_NODE:return a;case Node.ELEMENT_NODE:if(null!=a.lastChild){var x=H.getLastTextNodeUpTo(a.lastChild);if(null!=x)return x}}a=a.previousSibling;return null!=a?H.getLastTextNodeUpTo(a):null},getFirstTextNodeNotBefore:function(a){switch(a.nodeType){case Node.TEXT_NODE:return a;case Node.ELEMENT_NODE:if(null!=
a.firstChild){var x=H.getFirstTextNodeNotBefore(a.firstChild);if(null!=x)return x}}a=a.nextSibling;return null!=a?H.getFirstTextNodeNotBefore(a):null},readRangeViaSelection:function(a){var x=H.getGlobal().getSelection();x.removeAllRanges();x.addRange(a.toRange());return x.toString()},xpathFromNode:function(a,x){try{var z=t.call(a,x)}catch(pa){z=R.call(a,x)}return z},nodeFromXPath:function(a,x){var z;a=a.substring(1).split("/");var b=0;for(z=a.length;b<z;b++){var c=a[b];var d=c.split("[");c=d[0];d=
d[1];d=null!=d?parseInt((null!=d?d.split("]"):void 0)[0]):1;x=K(x,c.toLowerCase(),d)}return x},escape:function(a){return a.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}};H.uuid=function(){var a=0;return function(){return a++}}();H.getGlobal=function(){return function(){return this}()};H.maxZIndex=function(a){var x;var z=[];var b=0;for(x=a.length;b<x;b++){var c=a[b];"static"===v(c).css("position")?z.push(-1):z.push(parseInt(v(c).css("z-index"),10)||
-1)}return Math.max.apply(Math,z)};H.mousePosition=function(a,b){var z;"absolute"!==(z=v(b).css("position"))&&"fixed"!==z&&"relative"!==z&&(b=v(b).offsetParent()[0]);b=v(b).offset();return{top:a.pageY-b.top,left:a.pageX-b.left}};H.preventEventDefault=function(a){return null!=a?"function"===typeof a.preventDefault?a.preventDefault():void 0:void 0};var T="log debug info warn exception assert dir dirxml trace group groupEnd groupCollapsed time timeEnd profile profileEnd count clear table error notifyFirebug firebug userObjects".split(" ");
if("undefined"!==typeof console&&null!==console){null==console.group&&(console.group=function(a){return null});null==console.groupCollapsed&&(console.groupCollapsed=console.group);var Y=0;for(c=T.length;Y<c;Y++){var P=T[Y];null==console[P]&&(console[P]=function(){return null})}}else{this.console={};Y=0;for(c=T.length;Y<c;Y++)P=T[Y],this.console[P]=function(){};this.console.error=function(){var a=1<=arguments.length?m.call(arguments,0):[];return alert("ERROR: "+a.join(", "))};this.console.warn=function(){var a=
1<=arguments.length?m.call(arguments,0):[];return alert("WARNING: "+a.join(", "))}}var L=function(){function a(a,z){this.options=v.extend(!0,{},this.options,z);this.element=v(a);this._closures={};this.on=this.subscribe;this.addEvents()}a.prototype.events={};a.prototype.options={};a.prototype.element=null;a.prototype.addEvents=function(){var b;var z=a._parseEvents(this.events);var c=[];var d=0;for(b=z.length;d<b;d++){var e=z[d];c.push(this._addEvent(e.selector,e.event,e.functionName))}return c};a.prototype.removeEvents=
function(){var b;var z=a._parseEvents(this.events);var c=[];var d=0;for(b=z.length;d<b;d++){var e=z[d];c.push(this._removeEvent(e.selector,e.event,e.functionName))}return c};a.prototype._addEvent=function(b,z,c){var x=this;var d=function(){return x[c].apply(x,arguments)};""===b&&a._isCustomEvent(z)?this.subscribe(z,d):this.element.delegate(b,z,d);this._closures[""+b+"/"+z+"/"+c]=d;return this};a.prototype._removeEvent=function(b,z,c){var d=this._closures[""+b+"/"+z+"/"+c];""===b&&a._isCustomEvent(z)?
this.unsubscribe(z,d):this.element.undelegate(b,z,d);delete this._closures[""+b+"/"+z+"/"+c];return this};a.prototype.publish=function(){this.element.triggerHandler.apply(this.element,arguments);return this};a.prototype.subscribe=function(a,z){var b=function(){return z.apply(this,[].slice.call(arguments,1))};b.guid=z.guid=v.guid+=1;this.element.bind(a,b);return this};a.prototype.unsubscribe=function(){this.element.unbind.apply(this.element,arguments);return this};return a}();L._parseEvents=function(a){var b,
z;var c=[];for(b in a){var d=a[b];var e=b.split(" ");var g=2<=e.length?m.call(e,0,z=e.length-1):(z=0,[]);e=e[z++];c.push({selector:g.join(" "),event:e,functionName:d})}return c};L.natives=function(){var b;var c=a.event.special;var z=[];for(b in c)A.call(c,b)&&z.push(b);return"blur focus focusin focusout load resize scroll unload click dblclick\nmousedown mouseup mousemove mouseover mouseout mouseenter mouseleave\nchange select submit keydown keypress keyup error".split(/[^a-z]+/).concat(z)}();L._isCustomEvent=
function(a){a=a.split(".")[0];return-1===v.inArray(a,L.natives)};var U={sniff:function(a){return null!=a.commonAncestorContainer?new U.BrowserRange(a):"string"===typeof a.start?new U.SerializedRange(a):a.start&&"object"===typeof a.start?new U.NormalizedRange(a):!1},nodeFromXPath:function(a,b){var z;null==b&&(b=document);var c=function(a,z){null==z&&(z=null);try{return document.evaluate("."+a,b,z,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}catch(ca){return H.nodeFromXPath(a,b)}};if(v.isXMLDoc(document.documentElement)){var d=
document.createNSResolver(null===document.ownerDocument?document.documentElement:document.ownerDocument.documentElement);d=c(a,d);if(!d){a=function(){var b;var c=a.split("/");var d=[];var x=0;for(b=c.length;x<b;x++)(z=c[x])&&-1===z.indexOf(":")?d.push(z.replace(/^([a-z]+)/,"xhtml:$1")):d.push(z);return d}().join("/");var x=document.lookupNamespaceURI(null);d=function(a){return"xhtml"===a?x:document.documentElement.getAttribute("xmlns:"+a)};d=c(a,d)}return d}return c(a)}};U.RangeError=function(a){function b(a,
c,d){this.type=a;this.message=c;this.parent=null!=d?d:null;b.__super__.constructor.call(this,this.message)}u(b,a);return b}(Error);U.BrowserRange=function(){function a(a){this.commonAncestorContainer=a.commonAncestorContainer;this.startContainer=a.startContainer;this.startOffset=a.startOffset;this.endContainer=a.endContainer;this.endOffset=a.endOffset}a.prototype.normalize=function(a){var b;if(this.tainted)return!1;this.tainted=!0;var c=b=void 0;if(this.startContainer.nodeType===Node.ELEMENT_NODE){a=
H.getFirstTextNodeNotBefore(this.startContainer.childNodes[this.startOffset]);var d=0}else a=this.startContainer,d=this.startOffset;if(this.endContainer.nodeType===Node.ELEMENT_NODE){var x=this.endContainer.childNodes[this.endOffset];if(null!=x){for(;null!=x&&x.nodeType!==Node.TEXT_NODE;)x=x.firstChild;null!=x&&(b=x,c=0)}null==b&&(x=this.endContainer.childNodes[this.endOffset-1],b=H.getLastTextNodeUpTo(x),c=b.nodeValue.length)}else b=this.endContainer,c=this.endOffset;x={};x.start=0<d?a.nodeValue.length>
d?a.splitText(d):a.nextSibling:a;a===b?(x.start.nodeValue.length>c-d&&x.start.splitText(c-d),x.end=x.start):(b.nodeValue.length>c&&b.splitText(c),x.end=b);for(x.commonAncestor=this.commonAncestorContainer;x.commonAncestor.nodeType!==Node.ELEMENT_NODE;)x.commonAncestor=x.commonAncestor.parentNode;return new U.NormalizedRange(x)};a.prototype.serialize=function(a,b){return this.normalize(a).serialize(a,b)};return a}();U.NormalizedRange=function(){function a(a){this.commonAncestor=a.commonAncestor;this.start=
a.start;this.end=a.end}a.prototype.normalize=function(a){return this};a.prototype.limit=function(a){var b;var c=v.grep(this.textNodes(),function(b){return b.parentNode===a||v.contains(a,b.parentNode)});if(!c.length)return null;this.start=c[0];this.end=c[c.length-1];var d=v(this.start).parents();var x=v(this.end).parents();var e=0;for(b=x.length;e<b;e++)if(c=x[e],-1!==d.index(c)){this.commonAncestor=c;break}return this};a.prototype.serialize=function(a,b){var c=function(c,z){var d,x;var e=b?v(c).parents(":not("+
b+")").eq(0):v(c).parent();var g=H.xpathFromNode(e,a)[0];e=H.getTextNodes(e);var f=e.slice(0,e.index(c));var m=d=0;for(x=f.length;m<x;m++)e=f[m],d+=e.nodeValue.length;return z?[g,d+c.nodeValue.length]:[g,d]};var z=c(this.start);c=c(this.end,!0);return new U.SerializedRange({start:z[0],end:c[0],startOffset:z[1],endOffset:c[1]})};a.prototype.text=function(){var a;var b=this.textNodes();var c=[];var d=0;for(a=b.length;d<a;d++){var e=b[d];c.push(e.nodeValue)}return c.join("")};a.prototype.textNodes=function(){var a=
H.getTextNodes(v(this.commonAncestor));var b=[a.index(this.start),a.index(this.end)];return v.makeArray(a.slice(b[0],+b[1]+1||9E9))};a.prototype.toRange=function(){var a=document.createRange();a.setStartBefore(this.start);a.setEndAfter(this.end);return a};return a}();U.SerializedRange=function(){function a(a){this.start=a.start;this.startOffset=a.startOffset;this.end=a.end;this.endOffset=a.endOffset}a.prototype.normalize=function(a){var b,c;var d={};var x=["start","end"];var e=0;for(b=x.length;e<
b;e++){var g=x[e];try{var f=U.nodeFromXPath(this[g],a)}catch(za){throw a=za,new U.RangeError(g,"Error while finding "+g+" node: "+this[g]+": "+a,a);}if(!f)throw new U.RangeError(g,"Couldn't find "+g+" node: "+this[g]);var m=0;var q=this[g+"Offset"];"end"===g&&q--;var u=H.getTextNodes(v(f));var r=0;for(c=u.length;r<c;r++){var w=u[r];if(m+w.nodeValue.length>q){d[g+"Container"]=w;d[g+"Offset"]=this[g+"Offset"]-m;break}else m+=w.nodeValue.length}if(null==d[g+"Offset"])throw new U.RangeError(""+g+"offset",
"Couldn't find offset "+this[g+"Offset"]+" in element "+this[g]);}var t=null==document.compareDocumentPosition?function(a,b){return a.contains(b)}:function(a,b){return a.compareDocumentPosition(b)&16};v(d.startContainer).parents().each(function(){if(t(this,d.endContainer))return d.commonAncestorContainer=this,!1});return(new U.BrowserRange(d)).normalize(a)};a.prototype.serialize=function(a,b){return this.normalize(a).serialize(a,b)};a.prototype.toObject=function(){return{start:this.start,startOffset:this.startOffset,
end:this.end,endOffset:this.endOffset}};return a}();var ka=this.Annotator;var g=function(a){function b(a,c){this.onDeleteAnnotation=e(this.onDeleteAnnotation,this);this.onEditAnnotation=e(this.onEditAnnotation,this);this.onAdderClick=e(this.onAdderClick,this);this.onAdderMousedown=e(this.onAdderMousedown,this);this.onHighlightMouseover=e(this.onHighlightMouseover,this);this.checkForEndSelection=e(this.checkForEndSelection,this);this.checkForStartSelection=e(this.checkForStartSelection,this);this.clearViewerHideTimer=
e(this.clearViewerHideTimer,this);this.startViewerHideTimer=e(this.startViewerHideTimer,this);this.showViewer=e(this.showViewer,this);this.onEditorSubmit=e(this.onEditorSubmit,this);this.onEditorHide=e(this.onEditorHide,this);this.showEditor=e(this.showEditor,this);b.__super__.constructor.apply(this,arguments);this.plugins={};if(!b.supported())return this;this.options.readOnly||this._setupDocumentEvents();this._setupWrapper()._setupViewer()._setupEditor();this._setupDynamicStyle();this.adder=v(this.html.adder).appendTo(this.wrapper).hide();
b._instances.push(this)}u(b,a);b.prototype.events={".annotator-adder button click":"onAdderClick",".annotator-adder button mousedown":"onAdderMousedown",".annotator-hl mouseover":"onHighlightMouseover",".annotator-hl mouseout":"startViewerHideTimer"};b.prototype.html={adder:'<div class="annotator-adder"><button>'+B("Annotate")+"</button></div>",wrapper:'<div class="annotator-wrapper"></div>'};b.prototype.options={readOnly:!1};b.prototype.plugins={};b.prototype.editor=null;b.prototype.viewer=null;
b.prototype.selectedRanges=null;b.prototype.mouseIsDown=!1;b.prototype.ignoreMouseup=!1;b.prototype.viewerHideTimer=null;b.prototype._setupWrapper=function(){this.wrapper=v(this.html.wrapper);this.element.find("script").remove();this.element.wrapInner(this.wrapper);this.wrapper=this.element.find(".annotator-wrapper");return this};b.prototype._setupViewer=function(){var a=this;this.viewer=new b.Viewer({readOnly:this.options.readOnly});this.viewer.hide().on("edit",this.onEditAnnotation).on("delete",
this.onDeleteAnnotation).addField({load:function(b,c){c.text?v(b).html(H.escape(c.text)):v(b).html("<i>"+B("No Comment")+"</i>");return a.publish("annotationViewerTextField",[b,c])}}).element.appendTo(this.wrapper).bind({mouseover:this.clearViewerHideTimer,mouseout:this.startViewerHideTimer});return this};b.prototype._setupEditor=function(){this.editor=new b.Editor;this.editor.hide().on("hide",this.onEditorHide).on("save",this.onEditorSubmit).addField({type:"textarea",label:B("Comments")+"\u2026",
load:function(a,b){return v(a).find("textarea").val(b.text||"")},submit:function(a,b){return b.text=v(a).find("textarea").val()}});this.editor.element.appendTo(this.wrapper);return this};b.prototype._setupDocumentEvents=function(){v(document).bind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection});return this};b.prototype._setupDynamicStyle=function(){var a=v("#annotator-dynamic-style");a.length||(a=v('<style id="annotator-dynamic-style"></style>').appendTo(document.head));
var b;var c=["adder","outer","notice","filter"];var d=[];var e=0;for(b=c.length;e<b;e++){var g=c[e];d.push(":not(.annotator-"+g+")")}g="*"+d.join("");g=H.maxZIndex(v(document.body).find(g));g=Math.max(g,1E3);a.text([".annotator-adder, .annotator-outer, .annotator-notice {","  z-index: "+(g+20)+";","}\n.annotator-filter {","  z-index: "+(g+10)+";","}"].join("\n"));return this};b.prototype.destroy=function(){v(document).unbind({mouseup:this.checkForEndSelection,mousedown:this.checkForStartSelection});
v("#annotator-dynamic-style").remove();this.adder.remove();this.viewer.destroy();this.editor.destroy();this.wrapper.find(".annotator-hl").each(function(){v(this).contents().insertBefore(this);return v(this).remove()});this.wrapper.contents().insertBefore(this.wrapper);this.wrapper.remove();this.element.data("annotator",null);var a=this.plugins;for(c in a)this.plugins[c].destroy();this.removeEvents();var c=b._instances.indexOf(this);if(-1!==c)return b._instances.splice(c,1)};b.prototype.getSelectedRanges=
function(){var a,b,c,d;var e=H.getGlobal().getSelection();var g=[];var f=[];e.isCollapsed||(g=function(){var d,z;var g=[];b=d=0;for(z=e.rangeCount;0<=z?d<z:d>z;b=0<=z?++d:--d)m=e.getRangeAt(b),a=new U.BrowserRange(m),c=a.normalize().limit(this.wrapper[0]),null===c&&f.push(m),g.push(c);return g}.call(this),e.removeAllRanges());var x=0;for(d=f.length;x<d;x++){var m=f[x];e.addRange(m)}return v.grep(g,function(a){a&&e.addRange(a.toRange());return a})};b.prototype.createAnnotation=function(){var a={};
this.publish("beforeAnnotationCreated",[a]);return a};b.prototype.setupAnnotation=function(a){var b;var c=this.wrapper[0];a.ranges||(a.ranges=this.selectedRanges);var d=[];var z=a.ranges;var e=0;for(b=z.length;e<b;e++){var g=z[e];try{d.push(U.sniff(g).normalize(c))}catch(ob){var f=ob;if(f instanceof U.RangeError)this.publish("rangeNormalizeFail",[a,g,f]);else throw f;}}a.quote=[];a.ranges=[];a.highlights=[];g=0;for(c=d.length;g<c;g++)f=d[g],a.quote.push(v.trim(f.text())),a.ranges.push(f.serialize(this.wrapper[0],
".annotator-hl")),v.merge(a.highlights,this.highlightRange(f));a.quote=a.quote.join(" / ");v(a.highlights).data("annotation",a);return a};b.prototype.updateAnnotation=function(a){this.publish("beforeAnnotationUpdated",[a]);this.publish("annotationUpdated",[a]);return a};b.prototype.deleteAnnotation=function(a){var b;if(null!=a.highlights){var c=a.highlights;var d=0;for(b=c.length;d<b;d++){var z=c[d];null!=z.parentNode&&v(z).replaceWith(z.childNodes)}}this.publish("annotationDeleted",[a]);return a};
b.prototype.loadAnnotations=function(a){var b=this;null==a&&(a=[]);var c=function(a){var z;null==a&&(a=[]);var e=a.splice(0,10);var g=0;for(z=e.length;g<z;g++){var f=e[g];b.setupAnnotation(f)}return 0<a.length?setTimeout(function(){return c(a)},10):b.publish("annotationsLoaded",[d])};var d=a.slice();c(a);return this};b.prototype.dumpAnnotations=function(){return this.plugins.Store?this.plugins.Store.dumpAnnotations():!1};b.prototype.highlightRange=function(a,b){var c;null==b&&(b="annotator-hl");var d=
/^\s*$/;b=v("<span class='"+b+"'></span>");var z=a.textNodes();var e=[];var g=0;for(c=z.length;g<c;g++)a=z[g],d.test(a.nodeValue)||e.push(v(a).wrapAll(b).parent().show()[0]);return e};b.prototype.highlightRanges=function(a,b){var c;null==b&&(b="annotator-hl");var d=[];var z=0;for(c=a.length;z<c;z++){var e=a[z];v.merge(d,this.highlightRange(e,b))}return d};b.prototype.addPlugin=function(a,c){var d;if(!this.plugins[a]){var z=b.Plugin[a];"function"===typeof z&&(this.plugins[a]=new z(this.element[0],
c),this.plugins[a].annotator=this,"function"===typeof(d=this.plugins[a]).pluginInit&&d.pluginInit())}return this};b.prototype.showEditor=function(a,b){this.editor.element.css(b);this.editor.load(a);this.publish("annotationEditorShown",[this.editor,a]);return this};b.prototype.onEditorHide=function(){this.publish("annotationEditorHidden",[this.editor]);return this.ignoreMouseup=!1};b.prototype.onEditorSubmit=function(a){return this.publish("annotationEditorSubmit",[this.editor,a])};b.prototype.showViewer=
function(a,b){this.viewer.element.css(b);this.viewer.load(a);return this.publish("annotationViewerShown",[this.viewer,a])};b.prototype.startViewerHideTimer=function(){if(!this.viewerHideTimer)return this.viewerHideTimer=setTimeout(this.viewer.hide,250)};b.prototype.clearViewerHideTimer=function(){clearTimeout(this.viewerHideTimer);return this.viewerHideTimer=!1};b.prototype.checkForStartSelection=function(a){a&&this.isAnnotator(a.target)||this.startViewerHideTimer();return this.mouseIsDown=!0};b.prototype.checkForEndSelection=
function(a){var b;this.mouseIsDown=!1;if(!this.ignoreMouseup){var c=this.selectedRanges=this.getSelectedRanges();var d=0;for(b=c.length;d<b;d++){var e=c[d];e=e.commonAncestor;v(e).hasClass("annotator-hl")&&(e=v(e).parents("[class!=annotator-hl]")[0]);if(this.isAnnotator(e))return}return a&&this.selectedRanges.length?this.adder.css(H.mousePosition(a,this.wrapper[0])).show():this.adder.hide()}};b.prototype.isAnnotator=function(a){return!!v(a).parents().addBack().filter("[class^=annotator-]").not(this.wrapper).length};
b.prototype.onHighlightMouseover=function(a){this.clearViewerHideTimer();if(this.mouseIsDown||this.viewer.isShown())return!1;var b=v(a.target).parents(".annotator-hl").addBack().map(function(){return v(this).data("annotation")});return this.showViewer(v.makeArray(b),H.mousePosition(a,this.wrapper[0]))};b.prototype.onAdderMousedown=function(a){null!=a&&a.preventDefault();return this.ignoreMouseup=!0};b.prototype.onAdderClick=function(a){var b=this;null!=a&&a.preventDefault();a=this.adder.position();
this.adder.hide();var c=this.setupAnnotation(this.createAnnotation());v(c.highlights).addClass("annotator-hl-temporary");var d=function(){z();v(c.highlights).removeClass("annotator-hl-temporary");return b.publish("annotationCreated",[c])};var e=function(){z();return b.deleteAnnotation(c)};var z=function(){b.unsubscribe("annotationEditorHidden",e);return b.unsubscribe("annotationEditorSubmit",d)};this.subscribe("annotationEditorHidden",e);this.subscribe("annotationEditorSubmit",d);return this.showEditor(c,
a)};b.prototype.onEditAnnotation=function(a){var b=this;var c=this.viewer.element.position();var d=function(){e();return b.updateAnnotation(a)};var e=function(){b.unsubscribe("annotationEditorHidden",e);return b.unsubscribe("annotationEditorSubmit",d)};this.subscribe("annotationEditorHidden",e);this.subscribe("annotationEditorSubmit",d);this.viewer.hide();return this.showEditor(a,c)};b.prototype.onDeleteAnnotation=function(a){this.viewer.hide();return this.deleteAnnotation(a)};return b}(L);g.Plugin=
function(a){function b(a,c){b.__super__.constructor.apply(this,arguments)}u(b,a);b.prototype.pluginInit=function(){};b.prototype.destroy=function(){return this.removeEvents()};return b}(L);P=H.getGlobal();null==(null!=(b=P.document)?b.evaluate:void 0)&&v.getScript("http://assets.annotateit.org/vendor/xpath.min.js");null==P.getSelection&&v.getScript("http://assets.annotateit.org/vendor/ierange.min.js");null==P.JSON&&v.getScript("http://assets.annotateit.org/vendor/json2.min.js");null==P.Node&&(P.Node=
{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12});g.$=v;g.Delegator=L;g.Range=U;g.Util=H;g._instances=[];g._t=B;g.supported=function(){return function(){return!!this.getSelection}()};g.noConflict=function(){H.getGlobal().Annotator=ka;return this};v.fn.annotator=function(a){var b=Array.prototype.slice.call(arguments,1);
return this.each(function(){var c;if(c=v.data(this,"annotator"))return a&&c[a].apply(c,b);c=new g(this,a);return v.data(this,"annotator",c)})};this.Annotator=g;g.Widget=function(a){function b(a,c){b.__super__.constructor.apply(this,arguments);this.classes=v.extend({},g.Widget.prototype.classes,this.classes)}u(b,a);b.prototype.classes={hide:"annotator-hide",invert:{x:"annotator-invert-x",y:"annotator-invert-y"}};b.prototype.destroy=function(){this.removeEvents();return this.element.remove()};b.prototype.checkOrientation=
function(){this.resetOrientation();var a=v(g.Util.getGlobal());var b=this.element.children(":first");var c=b.offset();var d=a.scrollTop();a=a.width()+a.scrollLeft();var e=c.top;c=c.left+b.width();0>e-d&&this.invertY();0<c-a&&this.invertX();return this};b.prototype.resetOrientation=function(){this.element.removeClass(this.classes.invert.x).removeClass(this.classes.invert.y);return this};b.prototype.invertX=function(){this.element.addClass(this.classes.invert.x);return this};b.prototype.invertY=function(){this.element.addClass(this.classes.invert.y);
return this};b.prototype.isInvertedY=function(){return this.element.hasClass(this.classes.invert.y)};b.prototype.isInvertedX=function(){return this.element.hasClass(this.classes.invert.x)};return b}(L);g.Editor=function(a){function b(a){this.onCancelButtonMouseover=e(this.onCancelButtonMouseover,this);this.processKeypress=e(this.processKeypress,this);this.submit=e(this.submit,this);this.load=e(this.load,this);this.hide=e(this.hide,this);this.show=e(this.show,this);b.__super__.constructor.call(this,
v(this.html)[0],a);this.fields=[];this.annotation={}}u(b,a);b.prototype.events={"form submit":"submit",".annotator-save click":"submit",".annotator-cancel click":"hide",".annotator-cancel mouseover":"onCancelButtonMouseover","textarea keydown":"processKeypress"};b.prototype.classes={hide:"annotator-hide",focus:"annotator-focus"};b.prototype.html='<div class="annotator-outer annotator-editor">\n  <form class="annotator-widget">\n    <ul class="annotator-listing"></ul>\n    <div class="annotator-controls">\n      <a href="#cancel" class="annotator-cancel">'+
B("Cancel")+'</a>\n<a href="#save" class="annotator-save annotator-focus">'+B("Save")+"</a>\n    </div>\n  </form>\n</div>";b.prototype.options={};b.prototype.show=function(a){g.Util.preventEventDefault(a);this.element.removeClass(this.classes.hide);this.element.find(".annotator-save").addClass(this.classes.focus);this.checkOrientation();this.element.find(":input:first").focus();this.setupDraggables();return this.publish("show")};b.prototype.hide=function(a){g.Util.preventEventDefault(a);this.element.addClass(this.classes.hide);
return this.publish("hide")};b.prototype.load=function(a){var b;this.annotation=a;this.publish("load",[this.annotation]);var c=this.fields;var d=0;for(b=c.length;d<b;d++)a=c[d],a.load(a.element,this.annotation);return this.show()};b.prototype.submit=function(a){var b;g.Util.preventEventDefault(a);var c=this.fields;var d=0;for(b=c.length;d<b;d++)a=c[d],a.submit(a.element,this.annotation);this.publish("save",[this.annotation]);return this.hide()};b.prototype.addField=function(a){var b=v.extend({id:"annotator-field-"+
g.Util.uuid(),type:"input",label:"",load:function(){},submit:function(){}},a);var c=null;a=v('<li class="annotator-item" />');b.element=a[0];switch(b.type){case "textarea":c=v("<textarea />");break;case "input":case "checkbox":c=v("<input />");break;case "select":c=v("<select />")}a.append(c);c.attr({id:b.id,placeholder:b.label});"checkbox"===b.type&&(c[0].type="checkbox",a.addClass("annotator-checkbox"),a.append(v("<label />",{"for":b.id,html:b.label})));this.element.find("ul:first").append(a);this.fields.push(b);
return b.element};b.prototype.checkOrientation=function(){b.__super__.checkOrientation.apply(this,arguments);var a=this.element.find("ul");var c=this.element.find(".annotator-controls");this.element.hasClass(this.classes.invert.y)?c.insertBefore(a):c.is(":first-child")&&c.insertAfter(a);return this};b.prototype.processKeypress=function(a){if(27===a.keyCode)return this.hide();if(13===a.keyCode&&!a.shiftKey)return this.submit()};b.prototype.onCancelButtonMouseover=function(){return this.element.find("."+
this.classes.focus).removeClass(this.classes.focus)};b.prototype.setupDraggables=function(){var a;this.element.find(".annotator-resize").remove();(a=this.element.hasClass(this.classes.invert.y)?this.element.find(".annotator-item:last"):this.element.find(".annotator-item:first"))&&v('<span class="annotator-resize"></span>').appendTo(a);var b=null;var c=this.classes;var d=this.element;var e=null;var g=d.find(".annotator-resize");var f=d.find(".annotator-controls");var m=!1;a=function(a){if(a.target===
this)return b={element:this,top:a.pageY,left:a.pageX},e=d.find("textarea:first"),v(window).bind({"mouseup.annotator-editor-resize":x,"mousemove.annotator-editor-resize":q}),a.preventDefault()};var x=function(){b=null;return v(window).unbind(".annotator-editor-resize")};var q=function(a){if(b&&!1===m){var z=a.pageY-b.top;var x=a.pageX-b.left;if(b.element===g[0]){var q=e.outerHeight();var u=e.outerWidth();var r=d.hasClass(c.invert.x)?-1:1;var v=d.hasClass(c.invert.y)?1:-1;e.height(q+z*v);e.width(u+
x*r);e.outerHeight()!==q&&(b.top=a.pageY);e.outerWidth()!==u&&(b.left=a.pageX)}else b.element===f[0]&&(d.css({top:parseInt(d.css("top"),10)+z,left:parseInt(d.css("left"),10)+x}),b.top=a.pageY,b.left=a.pageX);m=!0;return setTimeout(function(){return m=!1},1E3/60)}};g.bind("mousedown",a);return f.bind("mousedown",a)};return b}(g.Widget);g.Viewer=function(a){function b(a){this.onDeleteClick=e(this.onDeleteClick,this);this.onEditClick=e(this.onEditClick,this);this.load=e(this.load,this);this.hide=e(this.hide,
this);this.show=e(this.show,this);b.__super__.constructor.call(this,v(this.html.element)[0],a);this.item=v(this.html.item)[0];this.fields=[];this.annotations=[]}u(b,a);b.prototype.events={".annotator-edit click":"onEditClick",".annotator-delete click":"onDeleteClick"};b.prototype.classes={hide:"annotator-hide",showControls:"annotator-visible"};b.prototype.html={element:'<div class="annotator-outer annotator-viewer">\n  <ul class="annotator-widget annotator-listing"></ul>\n</div>',item:'<li class="annotator-annotation annotator-item">\n  <span class="annotator-controls">\n    <a href="#" title="View as webpage" class="annotator-link">View as webpage</a>\n    <button title="Edit" class="annotator-edit">Edit</button>\n    <button title="Delete" class="annotator-delete">Delete</button>\n  </span>\n</li>'};
b.prototype.options={readOnly:!1};b.prototype.show=function(a){var b=this;g.Util.preventEventDefault(a);var c=this.element.find(".annotator-controls").addClass(this.classes.showControls);setTimeout(function(){return c.removeClass(b.classes.showControls)},500);this.element.removeClass(this.classes.hide);return this.checkOrientation().publish("show")};b.prototype.isShown=function(){return!this.element.hasClass(this.classes.hide)};b.prototype.hide=function(a){g.Util.preventEventDefault(a);this.element.addClass(this.classes.hide);
return this.publish("hide")};b.prototype.load=function(a){var b,c;this.annotations=a||[];var d=this.element.find("ul:first").empty();var e=this.annotations;var g=0;for(b=e.length;g<b;g++){a=e[g];var f=v(this.item).clone().appendTo(d).data("annotation",a);var z=f.find(".annotator-controls");var m=z.find(".annotator-link");var q=z.find(".annotator-edit");var x=z.find(".annotator-delete");z=(new V(a.links||[])).get("alternate",{type:"text/html"});0===z.length||null==z[0].href?m.remove():m.attr("href",
z[0].href);if(this.options.readOnly)q.remove(),x.remove();else var u={showEdit:function(){return q.removeAttr("disabled")},hideEdit:function(){return q.attr("disabled","disabled")},showDelete:function(){return x.removeAttr("disabled")},hideDelete:function(){return x.attr("disabled","disabled")}};var r=this.fields;var w=0;for(c=r.length;w<c;w++)z=r[w],m=v(z.element).clone().appendTo(f)[0],z.load(m,a,u)}this.publish("load",[this.annotations]);return this.show()};b.prototype.addField=function(a){a=v.extend({load:function(){}},
a);a.element=v("<div />")[0];this.fields.push(a);a.element;return this};b.prototype.onEditClick=function(a){return this.onButtonClick(a,"edit")};b.prototype.onDeleteClick=function(a){return this.onButtonClick(a,"delete")};b.prototype.onButtonClick=function(a,b){a=v(a.target).parents(".annotator-annotation");return this.publish(b,[a.data("annotation")])};return b}(g.Widget);var V=function(){function a(a){this.data=a}a.prototype.get=function(a,b){var c,d,e;null==b&&(b={});b=v.extend({},b,{rel:a});a=
function(){var a=[];for(c in b)A.call(b,c)&&a.push(c);return a}();var g=this.data;var f=[];var z=0;for(e=g.length;z<e;z++){var m=g[z];(d=a.reduce(function(a,c){return a&&m[c]===b[c]},!0))&&f.push(m)}return f};return a}();g=g||{};g.Notification=function(a){function b(a){this.hide=e(this.hide,this);this.show=e(this.show,this);b.__super__.constructor.call(this,v(this.options.html).appendTo(document.body)[0],a)}u(b,a);b.prototype.events={click:"hide"};b.prototype.options={html:"<div class='annotator-notice'></div>",
classes:{show:"annotator-notice-show",info:"annotator-notice-info",success:"annotator-notice-success",error:"annotator-notice-error"}};b.prototype.show=function(a,b){null==b&&(b=g.Notification.INFO);this.currentStatus=b;v(this.element).addClass(this.options.classes.show).addClass(this.options.classes[this.currentStatus]).html(H.escape(a||""));setTimeout(this.hide,5E3);return this};b.prototype.hide=function(){null==this.currentStatus&&(this.currentStatus=g.Notification.INFO);v(this.element).removeClass(this.options.classes.show).removeClass(this.options.classes[this.currentStatus]);
return this};return b}(L);g.Notification.INFO="info";g.Notification.SUCCESS="success";g.Notification.ERROR="error";v(function(){var a=new g.Notification;g.showNotification=a.show;return g.hideNotification=a.hide});g.Plugin.Unsupported=function(a){function b(){return f=b.__super__.constructor.apply(this,arguments)}u(b,a);b.prototype.options={message:g._t("Sorry your current browser does not support the Annotator")};b.prototype.pluginInit=function(){var a=this;if(!g.supported())return v(function(){g.showNotification(a.options.message);
if(void 0===window.XMLHttpRequest&&void 0!==ActiveXObject)return v("html").addClass("ie6")})};return b}(g.Plugin);var ia=function(a){var b;a=a.match(/([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?/);var c=0;var d=new Date(a[1],0,1);a[3]&&d.setMonth(a[3]-1);a[5]&&d.setDate(a[5]);a[7]&&d.setHours(a[7]);a[8]&&d.setMinutes(a[8]);a[10]&&d.setSeconds(a[10]);a[12]&&d.setMilliseconds(1E3*Number("0."+a[12]));a[14]&&(c=60*Number(a[16])+
Number(a[17]),c*=null!=(b="-"===a[15])?b:NaN);c-=d.getTimezoneOffset();d.setTime(Number(Number(d)+6E4*c));return d};var J=function(a){var b;if("undefined"!==typeof atob&&null!==atob)return atob(a);var c=b=0;var d=[];if(!a)return a;for(a+="";b<a.length;){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));
var m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(b++));var q=e<<18|g<<12|f<<6|m;e=q>>16&255;g=q>>8&255;q&=255;64===f?d[c++]=String.fromCharCode(e):64===m?d[c++]=String.fromCharCode(e,g):d[c++]=String.fromCharCode(e,g,q)}return d.join("")};var ra=function(a){var b=a.length%4;if(0!==b){var c=0;for(b=4-b;0<=b?c<b:c>b;0<=b?++c:--c)a+="="}a=a.replace(/-/g,"+");a=a.replace(/_/g,"/");return J(a)};var ha=function(a){a=a.split(".");return JSON.parse(ra(a[1]))};g.Plugin.Auth=
function(a){function b(a,c){b.__super__.constructor.apply(this,arguments);this.waitingForToken=[];this.options.token?this.setToken(this.options.token):this.requestToken()}u(b,a);b.prototype.options={token:null,tokenUrl:"/auth/token",autoFetch:!0};b.prototype.requestToken=function(){var a=this;this.requestInProgress=!0;return v.ajax({url:this.options.tokenUrl,dataType:"text",xhrFields:{withCredentials:!0}}).done(function(b,c,d){return a.setToken(b)}).fail(function(a,b,c){b=g._t("Couldn't get auth token:");
return g.showNotification(""+b+" "+a.responseText,g.Notification.ERROR)}).always(function(){return a.requestInProgress=!1})};b.prototype.setToken=function(a){var b=this;this.token=a;this._unsafeToken=ha(a);if(this.haveValidToken()){this.options.autoFetch&&(this.refreshTimeout=setTimeout(function(){return b.requestToken()},1E3*(this.timeToExpiry()-2)));this.updateHeaders();for(a=[];0<this.waitingForToken.length;)a.push(this.waitingForToken.pop()(this._unsafeToken));return a}if(this.options.autoFetch)return setTimeout(function(){return b.requestToken()},
1E4)};b.prototype.haveValidToken=function(){return this._unsafeToken&&this._unsafeToken.issuedAt&&this._unsafeToken.ttl&&this._unsafeToken.consumerKey&&0<this.timeToExpiry()?!0:!1};b.prototype.timeToExpiry=function(){var a=(new Date).getTime()/1E3;a=ia(this._unsafeToken.issuedAt).getTime()/1E3+this._unsafeToken.ttl-a;return 0<a?a:0};b.prototype.updateHeaders=function(){var a=this.element.data("annotator:headers");return this.element.data("annotator:headers",v.extend(a,{"x-annotator-auth-token":this.token}))};
b.prototype.withToken=function(a){if(null!=a){if(this.haveValidToken())return a(this._unsafeToken);this.waitingForToken.push(a);if(!this.requestInProgress)return this.requestToken()}};return b}(g.Plugin);g.Plugin.Store=function(a){function b(a,c){this._onError=e(this._onError,this);this._onLoadAnnotationsFromSearch=e(this._onLoadAnnotationsFromSearch,this);this._onLoadAnnotations=e(this._onLoadAnnotations,this);this._getAnnotations=e(this._getAnnotations,this);b.__super__.constructor.apply(this,arguments);
this.annotations=[]}u(b,a);b.prototype.events={annotationCreated:"annotationCreated",annotationDeleted:"annotationDeleted",annotationUpdated:"annotationUpdated"};b.prototype.options={annotationData:{},emulateHTTP:!1,loadFromSearch:!1,prefix:"/store",urls:{create:"/annotations",read:"/annotations/:id",update:"/annotations/:id",destroy:"/annotations/:id",search:"/search"}};b.prototype.pluginInit=function(){if(g.supported())return this.annotator.plugins.Auth?this.annotator.plugins.Auth.withToken(this._getAnnotations):
this._getAnnotations()};b.prototype._getAnnotations=function(){return this.options.loadFromSearch?this.loadAnnotationsFromSearch(this.options.loadFromSearch):this.loadAnnotations()};b.prototype.annotationCreated=function(a){var b=this;return 0>r.call(this.annotations,a)?(this.registerAnnotation(a),this._apiRequest("create",a,function(c){return b.updateAnnotation(a,c)})):this.updateAnnotation(a,{})};b.prototype.annotationUpdated=function(a){var b=this;if(0<=r.call(this.annotations,a))return this._apiRequest("update",
a,function(c){return b.updateAnnotation(a,c)})};b.prototype.annotationDeleted=function(a){var b=this;if(0<=r.call(this.annotations,a))return this._apiRequest("destroy",a,function(){return b.unregisterAnnotation(a)})};b.prototype.registerAnnotation=function(a){return this.annotations.push(a)};b.prototype.unregisterAnnotation=function(a){return this.annotations.splice(this.annotations.indexOf(a),1)};b.prototype.updateAnnotation=function(a,b){0>r.call(this.annotations,a)||v.extend(a,b);return v(a.highlights).data("annotation",
a)};b.prototype.loadAnnotations=function(){return this._apiRequest("read",null,this._onLoadAnnotations)};b.prototype._onLoadAnnotations=function(a){var b,c;null==a&&(a=[]);var d={};var e=this.annotations;var g=0;for(b=e.length;g<b;g++){var f=e[g];d[f.id]=f}b=[];e=0;for(c=a.length;e<c;e++)f=a[e],d[f.id]?(g=d[f.id],this.updateAnnotation(g,f)):b.push(f);this.annotations=this.annotations.concat(b);return this.annotator.loadAnnotations(b.slice())};b.prototype.loadAnnotationsFromSearch=function(a){return this._apiRequest("search",
a,this._onLoadAnnotationsFromSearch)};b.prototype._onLoadAnnotationsFromSearch=function(a){null==a&&(a={});return this._onLoadAnnotations(a.rows||[])};b.prototype.dumpAnnotations=function(){var a;var b=this.annotations;var c=[];var d=0;for(a=b.length;d<a;d++){var e=b[d];c.push(JSON.parse(this._dataFor(e)))}return c};b.prototype._apiRequest=function(a,b,c){var d=b&&b.id;var e=this._urlFor(a,d);b=this._apiRequestOptions(a,b,c);e=v.ajax(e,b);e._id=d;e._action=a;return e};b.prototype._apiRequestOptions=
function(a,b,c){var d=this._methodFor(a);c={type:d,headers:this.element.data("annotator:headers"),dataType:"json",success:c||function(){},error:this._onError};!this.options.emulateHTTP||"PUT"!==d&&"DELETE"!==d||(c.headers=v.extend(c.headers,{"X-HTTP-Method-Override":d}),c.type="POST");if("search"===a)return c=v.extend(c,{data:b});a=b&&this._dataFor(b);return this.options.emulateJSON?(c.data={json:a},this.options.emulateHTTP&&(c.data._method=d),c):c=v.extend(c,{data:a,contentType:"application/json; charset=utf-8"})};
b.prototype._urlFor=function(a,b){var c=null!=this.options.prefix?this.options.prefix:"";c+=this.options.urls[a];c=c.replace(/\/:id/,null!=b?"/"+b:"");return c=c.replace(/:id/,null!=b?b:"")};b.prototype._methodFor=function(a){return{create:"POST",read:"GET",update:"PUT",destroy:"DELETE",search:"GET"}[a]};b.prototype._dataFor=function(a){var b=a.highlights;delete a.highlights;v.extend(a,this.options.annotationData);var c=JSON.stringify(a);b&&(a.highlights=b);return c};b.prototype._onError=function(a){var b=
a._action;var c=g._t("Sorry we could not ")+b+g._t(" this annotation");"search"===a._action?c=g._t("Sorry we could not search the store for annotations"):"read"!==a._action||a._id||(c=g._t("Sorry we could not ")+b+g._t(" the annotations from the store"));switch(a.status){case 401:c=g._t("Sorry you are not allowed to ")+b+g._t(" this annotation");break;case 404:c=g._t("Sorry we could not connect to the annotations store");break;case 500:c=g._t("Sorry something went wrong with the annotation store")}g.showNotification(c,
g.Notification.ERROR);return null};return b}(g.Plugin);g.Plugin.Permissions=function(a){function b(a,c){this._setAuthFromToken=e(this._setAuthFromToken,this);this.updateViewer=e(this.updateViewer,this);this.updateAnnotationPermissions=e(this.updateAnnotationPermissions,this);this.updatePermissionsField=e(this.updatePermissionsField,this);this.addFieldsToAnnotation=e(this.addFieldsToAnnotation,this);b.__super__.constructor.apply(this,arguments);this.options.user&&(this.setUser(this.options.user),delete this.options.user)}
u(b,a);b.prototype.events={beforeAnnotationCreated:"addFieldsToAnnotation"};b.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,userId:function(a){return a},userString:function(a){return a},userAuthorize:function(a,b,c){var d;if(b.permissions){b=b.permissions[a]||[];if(0===b.length)return!0;var e=0;for(d=b.length;e<d;e++)if(a=b[e],this.userId(c)===a)return!0;return!1}return b.user?c?this.userId(c)===this.userId(b.user):!1:!0},user:"",permissions:{read:[],update:[],"delete":[],
admin:[]}};b.prototype.pluginInit=function(){var a=this;if(g.supported()){var b=this;var c=function(a,c){return function(d,e){return b[a].call(b,c,d,e)}};!this.user&&this.annotator.plugins.Auth&&this.annotator.plugins.Auth.withToken(this._setAuthFromToken);!0===this.options.showViewPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:g._t("Allow anyone to <strong>view</strong> this annotation"),load:c("updatePermissionsField","read"),submit:c("updateAnnotationPermissions","read")});
!0===this.options.showEditPermissionsCheckbox&&this.annotator.editor.addField({type:"checkbox",label:g._t("Allow anyone to <strong>edit</strong> this annotation"),load:c("updatePermissionsField","update"),submit:c("updateAnnotationPermissions","update")});this.annotator.viewer.addField({load:this.updateViewer});if(this.annotator.plugins.Filter)return this.annotator.plugins.Filter.addFilter({label:g._t("User"),property:"user",isFiltered:function(b,c){var d;c=a.options.userString(c);if(!b||!c)return!1;
var e=b.split(/\s*/);var g=0;for(d=e.length;g<d;g++)if(b=e[g],-1===c.indexOf(b))return!1;return!0}})}};b.prototype.setUser=function(a){return this.user=a};b.prototype.addFieldsToAnnotation=function(a){if(a&&(a.permissions=this.options.permissions,this.user))return a.user=this.user};b.prototype.authorize=function(a,b,c){void 0===c&&(c=this.user);return this.options.userAuthorize?this.options.userAuthorize.call(this.options,a,b,c):!0};b.prototype.updatePermissionsField=function(a,b,c){b=v(b).show();
var d=b.find("input").removeAttr("disabled");this.authorize("admin",c)||b.hide();return this.authorize(a,c||{},null)?d.attr("checked","checked"):d.removeAttr("checked")};b.prototype.updateAnnotationPermissions=function(a,b,c){c.permissions||(c.permissions=this.options.permissions);return v(b).find("input").is(":checked")?c.permissions[a]=[]:c.permissions[a]=[this.options.userId(this.user)]};b.prototype.updateViewer=function(a,b,c){a=v(a);var d=this.options.userString(b.user);b.user&&d&&"string"===
typeof d?(d=g.Util.escape(this.options.userString(b.user)),a.html(d).addClass("annotator-user")):a.remove();if(c&&(this.authorize("update",b)||c.hideEdit(),!this.authorize("delete",b)))return c.hideDelete()};b.prototype._setAuthFromToken=function(a){return this.setUser(a.userId)};return b}(g.Plugin);g.Plugin.AnnotateItPermissions=function(a){function b(){this._setAuthFromToken=e(this._setAuthFromToken,this);this.updateAnnotationPermissions=e(this.updateAnnotationPermissions,this);this.updatePermissionsField=
e(this.updatePermissionsField,this);this.addFieldsToAnnotation=e(this.addFieldsToAnnotation,this);return h=b.__super__.constructor.apply(this,arguments)}u(b,a);b.prototype.options={showViewPermissionsCheckbox:!0,showEditPermissionsCheckbox:!0,groups:{world:"group:__world__",authenticated:"group:__authenticated__",consumer:"group:__consumer__"},userId:function(a){return a.userId},userString:function(a){return a.userId},userAuthorize:function(a,b,c){var d,e,g,f;a=(b.permissions||{})[a]||[];return(d=
this.groups.world,0<=r.call(a,d))?!0:null!=c&&null!=c.userId&&null!=c.consumerKey?c.userId===b.user&&c.consumerKey===b.consumer?!0:(e=this.groups.authenticated,0<=r.call(a,e))?!0:c.consumerKey===b.consumer&&(g=this.groups.consumer,0<=r.call(a,g))?!0:c.consumerKey===b.consumer&&(f=c.userId,0<=r.call(a,f))?!0:c.consumerKey===b.consumer&&c.admin?!0:!1:!1},permissions:{read:["group:__world__"],update:[],"delete":[],admin:[]}};b.prototype.addFieldsToAnnotation=function(a){if(a&&(a.permissions=this.options.permissions,
this.user))return a.user=this.user.userId,a.consumer=this.user.consumerKey};b.prototype.updatePermissionsField=function(a,b,c){b=v(b).show();var d=b.find("input").removeAttr("disabled");this.authorize("admin",c)||b.hide();return this.user&&this.authorize(a,c||{},{userId:"__nonexistentuser__",consumerKey:this.user.consumerKey})?d.attr("checked","checked"):d.removeAttr("checked")};b.prototype.updateAnnotationPermissions=function(a,b,c){c.permissions||(c.permissions=this.options.permissions);return v(b).find("input").is(":checked")?
c.permissions[a]=["read"===a?this.options.groups.world:this.options.groups.consumer]:c.permissions[a]=[]};b.prototype._setAuthFromToken=function(a){return this.setUser(a)};return b}(g.Plugin.Permissions);g.Plugin.Filter=function(a){function b(a,c){this._onPreviousClick=e(this._onPreviousClick,this);this._onNextClick=e(this._onNextClick,this);this._onFilterKeyup=e(this._onFilterKeyup,this);this._onFilterBlur=e(this._onFilterBlur,this);this._onFilterFocus=e(this._onFilterFocus,this);this.updateHighlights=
e(this.updateHighlights,this);var d;a=v(this.html.element).appendTo((null!=c?c.appendTo:void 0)||this.options.appendTo);b.__super__.constructor.call(this,a,c);(d=this.options).filters||(d.filters=[]);this.filter=v(this.html.filter);this.filters=[];this.current=0}u(b,a);b.prototype.events={".annotator-filter-property input focus":"_onFilterFocus",".annotator-filter-property input blur":"_onFilterBlur",".annotator-filter-property input keyup":"_onFilterKeyup",".annotator-filter-previous click":"_onPreviousClick",
".annotator-filter-next click":"_onNextClick",".annotator-filter-clear click":"_onClearClick"};b.prototype.classes={active:"annotator-filter-active",hl:{hide:"annotator-hl-filtered",active:"annotator-hl-active"}};b.prototype.html={element:'<div class="annotator-filter">\n  <strong>'+g._t("Navigate:")+'</strong>\n<span class="annotator-filter-navigation">\n  <button class="annotator-filter-previous">'+g._t("Previous")+'</button>\n<button class="annotator-filter-next">'+g._t("Next")+"</button>\n</span>\n<strong>"+
g._t("Filter by:")+"</strong>\n</div>",filter:'<span class="annotator-filter-property">\n  <label></label>\n  <input/>\n  <button class="annotator-filter-clear">'+g._t("Clear")+"</button>\n</span>"};b.prototype.options={appendTo:"body",filters:[],addAnnotationFilter:!0,isFiltered:function(a,b){var c;if(!a||!b)return!1;var d=a.split(/\s+/);var e=0;for(c=d.length;e<c;e++)if(a=d[e],-1===b.indexOf(a))return!1;return!0}};b.prototype.pluginInit=function(){var a;var b=this.options.filters;var c=0;for(a=
b.length;c<a;c++){var d=b[c];this.addFilter(d)}this.updateHighlights();this._setupListeners()._insertSpacer();if(!0===this.options.addAnnotationFilter)return this.addFilter({label:g._t("Annotation"),property:"text"})};b.prototype.destroy=function(){b.__super__.destroy.apply(this,arguments);var a=v("html");var c=parseInt(a.css("padding-top"),10)||0;a.css("padding-top",c-this.element.outerHeight());return this.element.remove()};b.prototype._insertSpacer=function(){var a=v("html");var b=parseInt(a.css("padding-top"),
10)||0;a.css("padding-top",b+this.element.outerHeight());return this};b.prototype._setupListeners=function(){var a;var b=["annotationsLoaded","annotationCreated","annotationUpdated","annotationDeleted"];var c=0;for(a=b.length;c<a;c++){var d=b[c];this.annotator.subscribe(d,this.updateHighlights)}return this};b.prototype.addFilter=function(a){var b=v.extend({label:"",property:"",isFiltered:this.options.isFiltered},a);var c;var d=this.filters;var e=[];var f=0;for(c=d.length;f<c;f++)a=d[f],a.property===
b.property&&e.push(a);e.length||(b.id="annotator-filter-"+b.property,b.annotations=[],b.element=this.filter.clone().appendTo(this.element),b.element.find("label").html(b.label).attr("for",b.id),b.element.find("input").attr({id:b.id,placeholder:g._t("Filter by ")+b.label+"\u2026"}),b.element.find("button").hide(),b.element.data("filter",b),this.filters.push(b));return this};b.prototype.updateFilter=function(a){var b,c;a.annotations=[];this.updateHighlights();this.resetHighlights();if(b=v.trim(a.element.find("input").val())){var d=
this.highlights.map(function(){return v(this).data("annotation")});var e=v.makeArray(d);var g=0;for(c=e.length;g<c;g++){d=e[g];var f=d[a.property];a.isFiltered(b,f)&&a.annotations.push(d)}return this.filterHighlights()}};b.prototype.updateHighlights=function(){this.highlights=this.annotator.element.find(".annotator-hl:visible");return this.filtered=this.highlights.not(this.classes.hl.hide)};b.prototype.filterHighlights=function(){var a,b;var c=v.grep(this.filters,function(a){return!!a.annotations.length});
var d=(null!=(a=c[0])?a.annotations:void 0)||[];if(1<c.length){var e=[];v.each(c,function(){return v.merge(e,this.annotations)});var g=[];d=[];v.each(e,function(){return-1===v.inArray(this,g)?g.push(this):d.push(this)})}c=this.highlights;var f=a=0;for(b=d.length;a<b;f=++a)f=d[f],c=c.not(f.highlights);c.addClass(this.classes.hl.hide);this.filtered=this.highlights.not(this.classes.hl.hide);return this};b.prototype.resetHighlights=function(){this.highlights.removeClass(this.classes.hl.hide);this.filtered=
this.highlights;return this};b.prototype._onFilterFocus=function(a){a=v(a.target);a.parent().addClass(this.classes.active);return a.next("button").show()};b.prototype._onFilterBlur=function(a){if(!a.target.value)return a=v(a.target),a.parent().removeClass(this.classes.active),a.next("button").hide()};b.prototype._onFilterKeyup=function(a){if(a=v(a.target).parent().data("filter"))return this.updateFilter(a)};b.prototype._findNextHighlight=function(a){if(!this.highlights.length)return this;var b=a?
0:-1;var c=a?-1:0;var d=a?"lt":"gt";a=this.highlights.not("."+this.classes.hl.hide);var e=a.filter("."+this.classes.hl.active);e.length||(e=a.eq(b));b=e.data("annotation");e=a.index(e[0]);d=a.filter(":"+d+"("+e+")").not(b.highlights).eq(c);d.length||(d=a.eq(c));return this._scrollToHighlight(d.data("annotation").highlights)};b.prototype._onNextClick=function(a){return this._findNextHighlight()};b.prototype._onPreviousClick=function(a){return this._findNextHighlight(!0)};b.prototype._scrollToHighlight=
function(a){a=v(a);this.highlights.removeClass(this.classes.hl.active);a.addClass(this.classes.hl.active);return v("html, body").animate({scrollTop:a.offset().top-(this.element.height()+20)},150)};b.prototype._onClearClick=function(a){return v(a.target).prev("input").val("").keyup().blur()};return b}(g.Plugin);g.Plugin.Markdown=function(a){function b(a,c){this.updateTextField=e(this.updateTextField,this);null!=("undefined"!==typeof Showdown&&null!==Showdown?Showdown.converter:void 0)&&(b.__super__.constructor.apply(this,
arguments),this.converter=new Showdown.converter)}u(b,a);b.prototype.events={annotationViewerTextField:"updateTextField"};b.prototype.updateTextField=function(a,b){b=g.Util.escape(b.text||"");return v(a).html(this.convert(b))};b.prototype.convert=function(a){return this.converter.makeHtml(a)};return b}(g.Plugin);g.Plugin.Tags=function(a){function b(){this.setAnnotationTags=e(this.setAnnotationTags,this);this.updateField=e(this.updateField,this);return q=b.__super__.constructor.apply(this,arguments)}
u(b,a);b.prototype.options={parseTags:function(a){a=v.trim(a);var b=[];a&&(b=a.split(/\s+/));return b},stringifyTags:function(a){return a.join(" ")}};b.prototype.field=null;b.prototype.input=null;b.prototype.pluginInit=function(){if(g.supported())return this.field=this.annotator.editor.addField({label:g._t("Add some tags here")+"\u2026",load:this.updateField,submit:this.setAnnotationTags}),this.annotator.viewer.addField({load:this.updateViewer}),this.annotator.plugins.Filter&&this.annotator.plugins.Filter.addFilter({label:g._t("Tag"),
property:"tags",isFiltered:g.Plugin.Tags.filterCallback}),this.input=v(this.field).find(":input")};b.prototype.parseTags=function(a){return this.options.parseTags(a)};b.prototype.stringifyTags=function(a){return this.options.stringifyTags(a)};b.prototype.updateField=function(a,b){a="";b.tags&&(a=this.stringifyTags(b.tags));return this.input.val(a)};b.prototype.setAnnotationTags=function(a,b){return b.tags=this.parseTags(this.input.val())};b.prototype.updateViewer=function(a,b){a=v(a);return b.tags&&
v.isArray(b.tags)&&b.tags.length?a.addClass("annotator-tags").html(function(){return v.map(b.tags,function(a){return'<span class="annotator-tag">'+g.Util.escape(a)+"</span>"}).join(" ")}):a.remove()};return b}(g.Plugin);g.Plugin.Tags.filterCallback=function(a,b){var c,d;null==b&&(b=[]);var e=0;var g=[];if(a){g=a.split(/\s+/g);var f=0;for(c=g.length;f<c;f++)if(a=g[f],b.length){var m=0;for(d=b.length;m<d;m++){var q=b[m];-1!==q.indexOf(a)&&(e+=1)}}}return e===g.length};g.prototype.setupPlugins=function(a,
b){null==a&&(a={});null==b&&(b={});var c=g.Util.getGlobal();var d="Unsupported Auth Tags Filter Store AnnotateItPermissions".split(" ");c.Showdown&&d.push("Markdown");c=c.location.href.split(/#|\?/).shift()||"";a={Tags:{},Filter:{filters:[{label:g._t("User"),property:"user"},{label:g._t("Tags"),property:"tags"}]},Auth:{tokenUrl:a.tokenUrl||"http://annotateit.org/api/token"},Store:{prefix:a.storeUrl||"http://annotateit.org/api",annotationData:{uri:c},loadFromSearch:{uri:c}}};for(f in b)A.call(b,f)&&
0>r.call(d,f)&&d.push(f);v.extend(!0,a,b);var e=[];b=0;for(c=d.length;b<c;b++){var f=d[b];f in a&&!a[f]?e.push(void 0):e.push(this.addPlugin(f,a[f]))}return e}}.call(this)}).call(h,a("7t+N"))},"0ghZ":function(c,h,a){var f=a("PfJA"),d=a("iYj9"),b=a("KGqH");c.exports=function(a){return d(a)?b(a):f(a)}},"0uX4":function(c,h,a){var f=(h=(h=a("NkRn"))?h.prototype:void 0)?h.valueOf:void 0;c.exports=function(a){return f?Object(f.call(a)):{}}},"1C79":function(c,h,a){function f(a,c,q,m,A){var u=-1,e=a.length;
q||(q=b);for(A||(A=[]);++u<e;){var r=a[u];0<c&&q(r)?1<c?f(r,c-1,q,m,A):d(A,r):m||(A[A.length]=r)}return A}var d=a("uIr7"),b=a("Qp3N");c.exports=f},"1QDk":function(c,h,a){var f=a("tv3T"),d=a("09Qt");c.exports=function(a,c){return f(a,d(a),c)}},"1oyr":function(c,h){c.exports=function(a){return function(){return a}}},2247:function(c,h,a){var f=a("Hxdr"),d=a("JyYQ"),b=a("yzuE"),w=a("NGEn");c.exports=function(a,c){return(w(a)?f:b)(a,d(c,3))}},"31ss":function(c,h,a){Object.defineProperty(h,"__esModule",
{value:!0});c=a("Oy1H");var f=a.n(c),d=a("RTiT"),b=a("RTdn"),w=a("C8kI"),D=a("yVmd"),q=a("Tkzw"),m=a("9LPS"),A=a("4T/i"),u=a("hofT");c=a("L6bb");var e=a.n(c),r=a("CK11"),t=a("CAlj"),R=a("HCHl"),K=a("RdJH"),N=a("GCEA"),F=a("ObtK"),G=a("cuGy"),I=a("vzIA"),B=window,v=document,H=a("7t+N");H.__orig="rmq";window.rmqJquery=H;window.jQuery&&(window.jQuery.__orig="own");h["default"]=function(a){function c(a,b){return new Promise(function(c,d){var e=new XMLHttpRequest;e.withCredentials=!0;b=b||"none";e.open("GET",
a+"&prompt="+b,!0);e.responseType="json";e.onload=function(a){if(200===e.status){var b=a=null;try{a=e.response,b=e.responseURL}catch(wb){b=e.responseURL}if(a)c(a);else if(b){a=e.responseURL;var d=new XMLHttpRequest;d.withCredentials=!0;d.open("GET",a,!0);d.responseType="json";d.onload=function(a){(a=d.response)?c(a):c(null)};d.onerror=function(a){c(null)};d.send()}}else c(null)};e.onerror=function(a){c(null)};e.send()})}function h(a,c,d,e){return new Promise(function(g,m){var q=a&&a===c.doi,u=null==
e||c.articleInfo&&c.articleInfo.issn&&e.replace("-","")===c.articleInfo.issn;c&&c.articleInfo&&(c.articleInfo.title=c.articleInfo.title||document.title);if(q&&u)q=c.articleInfo,q.doi=c.articleInfo.doi||a,q.access=c.articleInfo.access||d,g({doi:a,access:d,articleInfo:q});else{q="/domain/settings/article";q=a?q+("?doi="+encodeURIComponent(a.toLowerCase())):q+("?doi="+encodeURIComponent((window.location.host+window.location.pathname).toLowerCase()));e&&(q+="&issn="+encodeURIComponent(e.replace("-","")));
u=Object(b.extractSiteUrl)(wa);q+="&siteUrl="+encodeURIComponent(u);var r=new XMLHttpRequest;r.withCredentials=!0;r.open("GET",Ia+q,!0);r.responseType="json";c[b.TP_HEADER_NAME]&&r.setRequestHeader(b.TP_HEADER_NAME,c[b.TP_HEADER_NAME]);r.onload=function(b){b="object"===f()(r.response)?r.response:r.response&&JSON.parse(r.response);b.doi=b.doi||a;b.access=b.access||d;g({doi:a,access:d,articleInfo:b})};r.onerror=function(a){a=r.status;var b=r.statusText,c="text"===r.responseType?r.responseText:null;
0===a||200===a&&""===c?g({}):m({status:a,statusText:b,response:c})};r.send()}})}function L(a,c,d,e){var g=Object(b.extractCookies)();g=Object(b.setupNcp)(a,g,c);return Object(b.pageInfoPromise)(a.Remarq.lastResolvedSettings,Ia,g,c).then(function(c){a.Remarq.lastResolvedSettings=c;var g=Object(A.a)(c.selectors.doi,"text")[0],f=Object(b.resolveDenial)(c.selectors.denial),m=Object(b.resolveAccessSelector)(c);m=Object(b.determineAccess)(m,g,f,c.selectors.fullTextIndex,e);return Object(w.doiDescriptor)(m,
g,d)})}function U(a){var c=a.cookies,d=a.page,e=a.articleInfo,g=a.themePreferences,f=e.subjects&&e.subjects.join(",");a=Object.assign({subjects:f,userRHKey:B.Hermes&&B.Hermes.userRHKey,hrmTracker:c.hrmTracker,hrmTracker_S:c.hrmTracker_S,hrmEvtId:B.Hermes&&B.Hermes.hrmEvtId,articleTitle:e.title},a);delete a.cookies;delete a.page;delete a.articleInfo;delete a.themingPreferences;a[b.TP_HEADER_NAME]=d[b.TP_HEADER_NAME];a[b.CSRF_HEADER_NAME]=d[b.CSRF_HEADER_NAME];d.nocaptcha&&(a.nocaptcha=d.nocaptcha);
wa&&(a.isLite=wa,a.isExtension=fa);g&&(d=[g.color,g.highContrast?"high_contrast":null,g.liter?"liter":null].filter(function(a){return null!=a}).join(":"))&&(a.palette=d);return a}var ka=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),g=a.isLiter,V=null,ia=H.Deferred(),J=new Promise(function(a,b){ia.promise().then(function(b){V=b;a(V)})}),ra=null,ha,T,x,z=a.groveBase,pa=a.groveProtocol,fa=-1!==pa.indexOf("chrome-extension:"),Ia=a.apiBase,M=0<z.length?pa+"//"+
z+"/":"",wa=a.isLite,ca=a.isLiter,nb=!1,ob,na,ta=new t.a(M);B.Remarq.grovePrefix=M;B.Remarq.unsubscribeCallbacks=[];var Aa=!1,qa={},za=H.Deferred();B.Remarq.status=function(){return za.promise()};B.Remarq.unsubscribeListeners=function(){B.Remarq.unsubscribeCallbacks&&(B.Remarq.unsubscribeCallbacks.forEach(function(a){try{a()}catch(va){}}),B.Remarq.unsubscribeCallbacks=[])};B.Remarq.start=function(){if(Aa)return"string"===typeof Aa?Promise.reject(Aa):Promise.resolve(ha);Aa=!0;v.body.id||H("html").attr("id");
var f=v.domain;f.startsWith("www.")&&(f=f.substring(4));var w=Object(b.extractCookies)(),t=Object(b.setupNcp)(B,w,a);return Object(b.pageInfoPromise)(b.groveInstallHelper.defaultLiteSettings,Ia,t,a).then(function(t){qa.loggedIn=!!t.authenticatedUser;B.Remarq.lastResolvedSettings=t;e()(document.body.innerHTML);ob=t.selectors;if(a.checkBrowser&&!t.userAgentSupported)throw Aa="Remarq does not support current Browser",Aa;f=t.domain&&"*"!==t.domain?t.domain:f;t.activeSurveysPolls&&ta.setActiveSurveysPolls(t.activeSurveysPolls);
var J=t.pdId,F=a.defaultPDFSelector,I=t.selectors.pdfIndex||[F],L=t.selectors.abstractIndex,Y=t.selectors.stickyIndex;F=t.selectors.fullTextIndex;var P=Object(b.resolveBannerAt)(t.selectors.posIndex);P=P&&P.item?P.item:document.body;var E=Object(b.resolveAbstractAt)(L),ja=Object(b.resolveStickyAt)(Y),ua=Object(b.resolveDenial)(t.selectors.denial),va=Object(b.resolveAccessSelector)(t);L=t.selectors.doi;var Va="",Wa="",Ea=!1;if(t&&t.preferences){Y=t.preferences;Y.privacyPolicy&&(Wa=t.preferences.privacyPolicy);
Y.postCommentMessage&&(Va=t.preferences.postCommentMessage);Y.commentsDisclosureRequired&&(Ea=t.preferences.commentsDisclosureRequired);if(Y.themePreferences)var O=Y.themePreferences;if(Y.richEditorPreferences)var ba=Y.richEditorPreferences}var W=null;t&&t.publisherName&&(W=t.publisherName);L=Object(A.a)(L,"text")[0];va=Object(b.determineAccess)(va,L,ua,F);F=(F=t.selectors.issn)&&Object(A.a)(F,"text").filter(function(a){return a})[0];F=h(L,t,va,F);var Fa=t.widgetConfiguration&&t.widgetConfiguration.iamConfiguration;
if(Fa){L=Fa.serverUrl;var X=Fa.enabled||a.iamEnabled;L=L&&X?c(L,"none"):Promise.resolve(null)}else L=Promise.resolve(null);return Promise.all([F,L]).then(function(c){var e=c[0];c=c[1];var h=e.articleInfo||{};h.title||(h.title=document.title);var F=e.doi;va=va||e.access;h.doi=h.doi||F;h.access=h.access||va;var L=h.issn,Y=void 0!==h.remarqEnabled?h.remarqEnabled:t.enableRemarqByDefault;t.selectors.enableRemarq&&!1===Object(A.a)(t.selectors.enableRemarq)[0]&&(Y=!1);if(Y&&!t.isLite)qa.version="full",
wa&&(wa=!1,a.isLite=!1),ca&&(ca=!1,a.isLiter=!1);else if(wa||ca)Y=!0,qa.version="lite";za.resolve(qa);v.dispatchEvent(new CustomEvent("Remarq_statusAvailable",{detail:qa}));if(Y){nb=Y;B.addEventListener("message",Ga,!1);B.Remarq.unsubscribeCallbacks.push(function(){B.removeEventListener("message",Ga,!1)});var ea;if(!fa){setInterval(function(){var a=B.location.href;a!==ea&&(ea&&v.dispatchEvent(new CustomEvent("URL_changed",{detail:{oldURL:ea,newURL:a}})),ea=a)},100);var la=function(a){B.Remarq.urlUpdated(a.detail.newURL)};
v.addEventListener("URL_changed",la);B.Remarq.unsubscribeCallbacks.push(function(){v.removeEventListener("URL_changed",la)})}Y=window.document.getElementById("rmrqTourMode")?window.document.getElementById("rmrqTourMode").value:null;var aa=U({doi:F,pdId:J,access:va,domain:f,denial:ua,issn:L,cookies:w,page:t,articleInfo:h,tourMode:Y,postCommentMessage:Va,publisherName:W,commentsDisclosureRequired:Ea,privacyPolicy:Wa,richEditorPreferences:ba,themePreferences:O});X&&(aa.iamEnabled=X);Fa&&(aa.iamConfiguration=
Fa);c&&(aa.iamUser=c);B.articleInfo=h||t.articleInfo;Object(b.appendAnnotatorCssToHead)(v,M);Object(b.appendGroveMainCssToHead)(v,M);Object(b.appendRobotoFontToHead)(v);if(g)try{ia.resolve(new N.a(M,Ia,a,aa,!0,t.authenticatedUser))}catch(kb){ia.reject(kb)}else{c=!!(window.view&&window.view.state&&window.view.state.doc);B.Remarq.ann=d.a.setGp(a).instruct(B,P,c?"prose_mirror":"html");na=new r.a(t,e);na.start();e=!0;t&&t.preferences&&null!=t.preferences.supportsPDF&&(e=t.preferences.supportsPDF);e&&
(ra=new R.a(Remarq,M,ob,na,a,aa),ra.decorateLinks(J,I,"pdf"));e={};wa&&(e["box-shadow"]="none");var Aa=function(a){var b=window.innerWidth;a=ha.clientWidth;window.getComputedStyle(document.documentElement).getPropertyValue("--grove-client-width");b=550<=b?500:b-50;b!=a&&document.documentElement.style.setProperty("--grove-client-width",b+"px")};Object(b.installFrame)("GroveSide",M+"web/leftside.html",Ia,pa+"//"+z,v.body,e,{expanded:!1,pdId:J,mobileUserAgent:ka},aa,a,null,{title:"Remarq Widget Main"}).then(function(c){ha=
c;Aa();window.addEventListener("resize",function(a){Aa(a)});Object(b.installFrame)("CornerWidget",M+"web/cornerWidget.html",Ia,pa+"//"+z,{element:c,relativePosition:"above"},{},{expanded:!1,signedin:!1,expl:!1,pdId:J,mobileUserAgent:ka},aa,a,null,{title:"Remarq Trigger Frame"}).then(function(a){T=a;x=Object(K.a)(M,t,T);T.style.visibility="visible"})});var Ba=null;H(ha).on("transitionstart",function La(a){null!=ha.dataset.expanded&&"false"!==ha.dataset.expanded?Ba!=ha.clientWidth&&(Ba=ha.clientWidth,
T.style.width=Ba+33+"px",setTimeout(La,100)):(T.style.width="83px",Ba=null)})}var Ga=function(c){var d=Object(q.groveMessageExtractor)(c);if(c.data.relay){d=Array.isArray(c.data.relay)?c.data.relay:[c.data.relay];var e=c&&c.data&&c.data.origin;e&&(c.data.msg.origin=e);-1!=d.indexOf("TopWidget")&&d.indexOf(!0)&&d.push("pdfFrame");"reload"===c.data.msg.action&&(window.reloadWinInfo=c.data.msg);d.forEach(function(a){"rootFrame"===a&&window.postMessage(c.data.msg,document.origin||document.location.origin);
var d=b.widgetsStateHolder.get(m.WIDGET_NAMES.fromFrameId(a));d&&d.status===m.WIDGET_STATUS.LOADING?(Object(G.debug)("widget["+a+"] is loading -> storing event in queue.."),d.pendingEventsQueue.enqueue(c.data.msg)):d&&d.status===m.WIDGET_STATUS.UNINSTALLED?Object(G.debug)("widget["+a+"] is not installed -> skipping event relay.."):"contentFrames"===a&&V?V.broadcastToFrames(c.data.msg):("GroveSide"===a&&Object(G.debug)("Will relay to groveSide",c.data.msg),(d=document.getElementById(a))&&d.contentWindow&&
("GroveSide"===a&&Object(G.debug)("Relaying to groveSide",c.data.msg),d.contentWindow.postMessage(c.data.msg,"*")))})}else if(c.data.popup){var g=document.getElementById("GroveSide"),f=B.open(c.data.popup);if(f){g&&g.contentWindow&&g.contentWindow.postMessage({action:"popupOpened",popup:c.data.popup},M);var l=setInterval(function(){if(f.closed)if(clearInterval(l),-1!=navigator.appVersion.indexOf("Trident")){var a={redirected:"redirected"};g&&g.contentWindow&&g.contentWindow.postMessage(a,M)}else g&&
g.contentWindow&&g.contentWindow.postMessage({action:"popupClosed",popup:c.data.popup},M)},1E3)}else g&&g.contentWindow&&g.contentWindow.postMessage({action:"popupFailed",popup:c.data.popup},M)}else if(c.data.action)if(d=c.data.action,"resize"===d){var r=c.data["class"],t=c.data.expanded;if(d=c.data.frameId){Array.isArray(d)||(d=[d]);if(V)if(t)V.handleExpand(t);else return;t&&x&&x.destroy();d.forEach(function(a){if("pdfFrame"==a&&"off"==t){var b=document.getElementById(a);b&&b.parentNode.removeChild(b);
b={indication:"pdfStatus",status:"off"};var d=document.getElementById("GroveSide");d&&d.contentWindow&&d.contentWindow.postMessage(b,M)}if((b=document.getElementById(a)||c.srcElement)&&b.dataset){b.dataset.expanded=t;b.dataset["class"]=r;b.className=r;if(d="GroveSide"===b.id&&-1<b.parentElement.className.indexOf("groveSideContainer")&&b.parentElement)d.dataset.expanded=t,d.dataset["class"]=r,d.className="groveSideContainer "+r;b.contentWindow&&b.contentWindow.postMessage({action:"resize",expanded:t},
M);"Welcome"==a?(a=document.getElementById("GroveSide"),b=document.getElementById("CornerWidget"),a&&a.dataset&&b&&b.dataset&&(a.dataset.expanded=!1,a.dataset["class"]="collapsed",a.className="collapsed",a.contentWindow&&a.contentWindow.postMessage({action:"resize",expanded:!1},M),b.dataset.expanded=!1,b.dataset["class"]="collapsed",b.className="collapsed",b.contentWindow&&b.contentWindow.postMessage({action:"resize",expanded:!1},M))):"GroveSide"===a&&t&&b.focus()}else"pdfFrame"==a&&(na.setView("page"),
na.hide(),na.render())})}}else if("restyle"===d){var w=c.data.signedin;if(d=c.data.frameId)Array.isArray(d)||(d=[d]),d.forEach(function(a){(a=document.getElementById(a)||c.srcElement)&&a.dataset&&(a.dataset.signedin=w)})}else{if("exit"!==d&&"logout"!==d)if("kill"===d)(d=(d=c.data.frameId)&&document.getElementById(d))&&d.parentElement.removeChild(d);else if("setupSticky"===d)na.setPdfLeftOffset(c.data.offset),na.setView("pdf"),na.render();else if("makeVisible"===d)document.getElementById("CornerWidget")&&
(document.getElementById("CornerWidget").style.visibility="visible"),document.getElementById("GroveSide")&&(document.getElementById("GroveSide").style.visibility="visible");else if("loadPagePreview"===d)Object(u.a)(c,document.getElementById(c.data.origin).contentWindow);else if("requestScroll"===d||"gotoPage"===d)V&&V.scrollToElement(c.data.elementId,c.data.page);else if("textAreaInit"!==d)if("textAreaFocused"===d)ka&&(ha.style.position="absolute",ha.style.top=v.scrollingElement.scrollTop+"px");else if("textAreaBlurred"===
d)ka&&(document.getElementById("GroveSide").style.position="fixed");else if("textAreaDestroyed"===d)ka&&(document.getElementById("GroveSide").style.position="fixed");else if("goto"===d){if(d=c.data.hash)window.location.hash=d}else"frameInit"===d&&Object(b.frameInitHandler)(aa,c)}else if(d&&d.getName&&d.getName()===q.SigninEvent.evtName()||c.data.signin||c.data.connect)(d=document.getElementById("GroveSide"))&&d.contentWindow&&d.contentWindow.postMessage(c.data,M);else if("sidebarLoaded"===c.data)[document.getElementById("CornerWidget"),
document.getElementById("TopWidget"),document.getElementById("Sticky")].filter(function(a){return null!=a}).forEach(function(a){a.contentWindow.postMessage("sidebarLoaded","*")}),document.getElementById("CornerWidget")&&(document.getElementById("CornerWidget").style.visibility="visible"),document.getElementById("GroveSide")&&(document.getElementById("GroveSide").style.visibility="visible"),document.getElementById("TopWidget")&&(document.getElementById("TopWidget").style.visibility="visible",document.getElementById("TopWidget").style.position=
"static"),x&&x.show(),ta.containsActiveSurveys()?(Object(b.installFrame)("SurveyWidget",M+"web/surveyWidget.html",Ia,pa+"//"+z,v.body,{visibility:"hidden"},{expanded:!1},aa,a,null,{title:"Remarq Survey Widget"}),Object(G.debug)("installed survey widget!")):Object(G.debug)("no active surveys found : skipping survey widget installation.."),ta.containsActivePolls()?(aa.activePollsIds=ta.activePollsIds,Object(b.installFrame)("PollWidget",M+"web/pollWidget.html",Ia,pa+"//"+z,{element:ha,relativePosition:"above"},
{visibility:"hidden"},{expanded:!1},aa,a,null,{title:"Remarq Poll Widget"}),Object(G.debug)("installed poll widget!")):Object(G.debug)("no active polls found : skipping poll widget installation..");else if(c&&c.data&&c.data.evtName===D.a.ANNOTATIONS_LOADED_EVENT)(d=document.getElementById("GroveSide"))&&d.contentWindow&&d.contentWindow.postMessage(c.data,M);else if(c.data&&c.data._name===q.WidgetInitializedEvent.evtName()){d=m.WIDGET_NAMES.fromFrameId(c.data.widgetId);for(d=b.widgetsStateHolder.get(d);d&&
d.status===m.WIDGET_STATUS.LOADING&&!d.pendingEventsQueue.isEmpty();)e=d.pendingEventsQueue.dequeue(),d.frame&&d.frame.contentWindow&&d.frame.contentWindow.postMessage(e,"*");d&&(d.status=m.WIDGET_STATUS.INITIALIZED)}else if(c.data&&c.data._name===q.WidgetDestroyedEvent.evtName()){if(d=m.WIDGET_NAMES.fromFrameId(c.data.widgetId),d=b.widgetsStateHolder.get(d))d.status=m.WIDGET_STATUS.UNINSTALLED}else c.data&&c.data._name===q.UpdateFrameTitleEvent.evtName()&&ha.setAttribute("title",c.data.title)};B.addEventListener("message",
function(){var a=!1,c=Object(b.extractCookies)().rmq_cwet;return function(b){var d=b.data;"explAnimation"===d.msg?a||t.activeSurveysPolls&&0!=t.activeSurveysPolls.active.length||(b=b.data.toggle,void 0===c&&(b&&(d=new Date,d.setTime(d.getTime()+864E5),d="expires="+d.toUTCString(),document.cookie="rmq_cwet=0;path=/;"+d),document.getElementById("CornerWidget").setAttribute("data-expl",""+b))):"resize"===d.action&&(a=d.expanded)&&T&&T.setAttribute("data-expl","false")}}());B.addEventListener("message",
Ga,!1);B.Remarq.unsubscribeCallbacks.push(function(){B.removeEventListener("message",Ga,!1)});E&&(Object(b.installFrame)("TopWidget",M+"web/topwidget.html",Ia,pa+"//"+z,{element:E.item,relativePosition:E.relativePosition},{visibility:"hidden",position:"fixed"},{expanded:"normal",pdId:J},aa,a,null,{title:"Remarq Top Widget"}),null!=ja&&0<ja.length&&ja[0]&&Object(b.installFrame)("Sticky",M+"web/sticky.html",Ia,pa+"//"+z,{element:ja[0].item,relativePosition:ja[0].relativePosition},{visibility:"hidden",
position:"fixed"},{expanded:"normal",pdId:J},aa,a,null,{title:"Remarq Sticky widget"}));v.dispatchEvent(new CustomEvent("Remarq_started",{detail:"started"}));return ha}return null},function(a){})})};B.Remarq.stop=function(){nb=Aa=!1;ra&&ra.destroy();ra=null;V&&V.destroy();d.a.destroy();B.Remarq.unsubscribeListeners();b.widgetsStateHolder.values().forEach(function(a){a&&a.frame&&(a.frame.contentWindow&&a.frame.contentWindow.postMessage({action:"destroy",reason:"destroy"},"*"),"pdfFrame"===a.name&&
a.frame&&a.status!==m.WIDGET_STATUS.UNINSTALLED&&B.history.back(),a.frame.parentNode&&a.frame.parentNode.removeChild(a.frame),a.frame=null,a.status=m.WIDGET_STATUS.UNINSTALLED,a.pendingEventsQueue.clear())});window.Remarq.unsubscribeCallbacks=[];Object(b.removeElementById)("grove-annotator-css");Object(b.removeElementById)("grove-main-css");Object(b.removeElementById)("grove-roboto-css");v.dispatchEvent(new CustomEvent("Remarq_stopped"))};B.Remarq.restart=function(){B.Remarq.stop();B.Remarq.start()};
B.Remarq.loadAsLite=function(){nb||(wa=a.isLite=!0,B.Remarq.restart())};B.Remarq.urlUpdated=function(c){var d=B.history&&B.history.state,e=d&&d.contentType;e||(d=v.contentType)&&0===d.indexOf("application/")&&(e=d.substring(12).toUpperCase());d=Object(b.calculateSiteUrl)(c);L(B,a,d,e).then(function(a){setTimeout(function(){B.postMessage({relay:"GroveSide",origin:"rootFrame",msg:{action:"reload",doi:a,siteUrl:c,pdId:null,contentType:e}},"*")},1E3)})};B.Remarq.loadPdfFrame=function(a,b){F.a.getInstance().handle("pdf",
void 0,a,void 0,b).then(function(a){F.a.getInstance().pdfFrame=a})["catch"](function(a){Object(G.error)("Failed to load PDF document",a)})};var E=!window.navigator.onLine;B.Remarq.setOfflineStatus=function(a){E!==a&&(E=a,ha&&ha.contentWindow&&ha.contentWindow.postMessage({action:"offlineStatusChange",offlineStatus:E},"*"),V&&V.setOfflineStatus(E),v.dispatchEvent(new CustomEvent("Remarq_offlineStatusChanged",{detail:{offlineStatus:E}})))};B.Remarq.getOfflineStatus=function(){return E};B.Remarq.inject=
function(b){B.Remarq.start().then(function(a){J.then(function(a){a.initiate(b).then(function(b){ha=b.rmqInjectorHandler.groveSide;v.dispatchEvent(new CustomEvent("Remarq_injected",{handler:a,frame:b.rmqInjectorHandler.groveSide}))})["catch"](function(a){Object(G.error)("Cannot instantiate literatumHandler",a)})})["catch"](function(a){Object(G.error)("While initiating lt:",a);throw a;})})["catch"](function(c){Object(G.info)("Cannot inject Remarq",c);g&&(new I.a(B,{},M,Ia,{},a)).injectUnsupported(b)})};
B.ononline=function(a){B.Remarq.setOfflineStatus(!1)};B.onoffline=function(a){B.Remarq.setOfflineStatus(!0)};return B.Remarq}},"3T7U":function(c,h){c.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");};c.exports.__esModule=!0;c.exports["default"]=c.exports},"3rZI":function(c,h){c.exports=function(a,c,d,b){var f=-1,h=null==a?0:a.length;for(b&&h&&(d=a[++f]);++f<h;)d=c(d,
a[f],f,a);return d}},"4EtY":function(c,h,a){c=a("Z60a");var f=a.n(c);c=a("C9uT");var d=a.n(c),b=a("RTdn");"use strict";a=function(){var a=function(){function a(){f()(this,a);this.cookies=Object(b.extractCookies)();a.prototype.setCookie=b.setCookie}d()(a,[{key:"getCookies",value:function(){return this.cookies}},{key:"get",value:function(a){return a&&this.cookies?this.cookies[a]:null}}]);return a}(),c=null;return Object.freeze({getInstance:function(){c||(c=new a);return c}})}();h.a=a},"4T/i":function(c,
h,a){(function(c){function d(a,b,e){function r(b,c,d){var e=a.field||a.attribute;if("text"===c||e)return b.map(function(a){var b=a;e?(e&&e.split(".")).forEach(function(a){b=b[a]}):b=a.text||a.innerText||a.textContent;return d?u(d,b):b});if("node"===c)return b}function u(a,b){if(2<a.length){var c=new RegExp(a[0],a[1]);var d=a[2]}else c=new RegExp(a[0]),d=a[1];if(d){a=c.exec(b);var e=/^\$([0-9]+)$/.exec(d);if(a)return e[1]?(b=parseInt(e[1]),a[b]):b.replace(c,d)}else return null}function w(a,b){var c=
D()(a,3);a=c[0];var d=c[1];c=c[2];if(Array.isArray(b)&&0===b.length||null===b||void 0===b)return d;try{var e=new Function("$array","$0","return ("+a+")");if(Array.isArray(b))return e.call(null,b,b[0]);e.call(null,[b],b)}catch(L){return void 0!==c?c:d}}if(Array.isArray(a))return a.map(function(a){return d(a,b,e)}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[]);if(!a)return null;e=e&&decodeURIComponent(e);var A=a.type,h=a.value,F=
a.sed;"string"===typeof a&&(A="css",h=a);try{var G=h&&JSON.parse(h)}catch(v){G=h}if("constant"===A)return[G];if("css"===A||"jquery"===A)if(b=b||(F?"text":"node"),G)if("string"===typeof G){var I;"css"===A?I=document.querySelectorAll(G):"jquery"===A&&(I=c(G));var B=Array.prototype.slice.call(I);B=r(B,b,F)}else"object"===f()(G)&&(B=Object.keys(G).map(function(a){if("css"===A){var b=document.querySelectorAll(a);b=Array.prototype.slice.call(b)}else"jquery"===A&&(b=c(a));return b[0]?G[a]:null}).filter(function(a){return null!=
a}));else throw"CSS selector value not specified"+JSON.stringify(a);else if("url"===A){if(b&&"text"!==b&&!e)throw"URL selectors can only return text";B=e?e:decodeURIComponent(m.location.pathname);F&&(B=u(F,B));B=[B]}else if("xpath"===A)"string"===typeof G?(h=Object(q.a)(G),"string"===typeof h?B=F?[u(F,h)]:[h]:Array.isArray(h)&&(B=r(h,b,F))):"object"===f()(G)&&(B=Object.keys(G).map(function(a){return Object(q.a)(G)[0]?G[a]:null}).filter(function(a){return null!=a}));else if("meta"===A)F=document.getElementsByTagName("meta"),
F=filter(F,function(a){return a.property===G||a.name===G}),B=map(F,function(a){return a.content});else throw"Cannot evaluate type:"+A;a.expression&&(B=w(a.expression,B));return B}h.a=d;var b=a("Oy1H"),f=a.n(b);b=a("NM/j");var D=a.n(b),q=a("sCxY"),m=window}).call(h,a("7t+N"))},"5/Qr":function(c,h,a){var f=a("Kzd6"),d=a("6Git"),b=a("WyC4"),w=a("0uX4"),D=a("Ilb/");c.exports=function(a,c,A){var m=a.constructor;switch(c){case "[object ArrayBuffer]":return f(a);case "[object Boolean]":case "[object Date]":return new m(+a);
case "[object DataView]":return d(a,A);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return D(a,A);case "[object Map]":return new m;case "[object Number]":case "[object String]":return new m(a);case "[object RegExp]":return b(a);case "[object Set]":return new m;case "[object Symbol]":return w(a)}}},
"6Git":function(c,h,a){var f=a("Kzd6");c.exports=function(a,b){b=b?f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.byteLength)}},"6PBa":function(c,h,a){var f=a("Hxdr"),d=a("JyYQ"),b=a("CHen"),w=a("xond");c.exports=function(a,c){if(null==a)return{};var m=f(w(a),function(a){return[a]});c=d(c);return b(a,m,function(a,b){return c(a,b[0])})}},"6t3S":function(c,h,a){h.a=function(a){var c=a&&a.groveBase&&a.groveProtocol&&(0<a.groveBase.length?a.groveProtocol+"//"+a.groveBase+"/":"")||"*";
return function(b,d,f,q){var m=document.getElementById("GroveSide");m?m.contentWindow.postMessage({gaEvent:{eventCategory:b,eventAction:d,eventLabel:f,eventValue:q}},c):window.parent.postMessage({relay:"GroveSide",origin:a.frameName||"rootFrame",msg:{gaEvent:{eventCategory:b,eventAction:d,eventLabel:f,eventValue:q}}},c)}}},"7UU1":function(c,h){c.exports=function(a){if(Array.isArray(a))return a};c.exports.__esModule=!0;c.exports["default"]=c.exports},"7hDC":function(c,h){function a(a,c,b,w,h,q,m){try{var d=
a[q](m),f=d.value}catch(e){b(e);return}d.done?c(f):Promise.resolve(f).then(w,h)}c.exports=function(c){return function(){var d=this,b=arguments;return new Promise(function(f,h){function q(b){a(w,f,h,q,m,"next",b)}function m(b){a(w,f,h,q,m,"throw",b)}var w=c.apply(d,b);q(void 0)})}};c.exports.__esModule=!0;c.exports["default"]=c.exports},"7t+N":function(c,h,a){var f,d;(function(a,d){"object"===typeof c&&"object"===typeof c.exports?c.exports=a.document?d(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");
return d(a)}:d(a)})("undefined"!==typeof window?window:this,function(a,w){function b(a,b,c){c=c||X;var p,d=c.createElement("script");d.text=a;if(b)for(p in $a)(a=b[p]||b.getAttribute&&b.getAttribute(p))&&d.setAttribute(p,a);c.head.appendChild(d).parentNode.removeChild(d)}function q(a){return null==a?a+"":"object"===typeof a||"function"===typeof a?Sa[Ya.call(a)]||"object":typeof a}function m(a){var p=!!a&&"length"in a&&a.length,b=q(a);return W(a)||Fa(a)?!1:"array"===b||0===p||"number"===typeof p&&
0<p&&p-1 in a}function A(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()}function u(a,b,c){return W(b)?l.grep(a,function(a,p){return!!b.call(a,p,a)!==c}):b.nodeType?l.grep(a,function(a){return a===b!==c}):"string"!==typeof b?l.grep(a,function(a){return-1<fb.call(b,a)!==c}):l.filter(b,a,c)}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function r(a){var p={};l.each(a.match(Ga)||[],function(a,b){p[b]=!0});return p}function t(a){return a}function R(a){throw a;}function K(a,
b,c,d){var p;try{a&&W(p=a.promise)?p.call(a).done(b).fail(c):a&&W(p=a.then)?p.call(a,b,c):b.apply(void 0,[a].slice(d))}catch(bc){c.apply(void 0,[bc])}}function N(){X.removeEventListener("DOMContentLoaded",N);a.removeEventListener("load",N);l.ready()}function F(a,b){return b.toUpperCase()}function G(a){return a.replace(sb,"ms-").replace(zb,F)}function I(){this.expando=l.expando+I.uid++}function B(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(rb,"-$&").toLowerCase(),c=a.getAttribute(c),
"string"===typeof c){try{var p=c;c="true"===p?!0:"false"===p?!1:"null"===p?null:p===+p+""?+p:Oa.test(p)?JSON.parse(p):p}catch(rc){}oa.set(a,b,c)}else c=void 0;return c}function v(a,b,c,d){var p,y=20,n=d?function(){return d.cur()}:function(){return l.css(a,b,"")},e=n(),k=c&&c[3]||(l.cssNumber[b]?"":"px"),Q=a.nodeType&&(l.cssNumber[b]||"px"!==k&&+e)&&cb.exec(l.css(a,b));if(Q&&Q[3]!==k){e/=2;k=k||Q[3];for(Q=+e||1;y--;)l.style(a,b,Q+k),0>=(1-p)*(1-(p=n()/e||.5))&&(y=0),Q/=p;Q*=2;l.style(a,b,Q+k);c=c||
[]}if(c){Q=+Q||+e||0;var g=c[1]?Q+(c[1]+1)*c[2]:+c[2];d&&(d.unit=k,d.start=Q,d.end=g)}return g}function H(a,b){for(var p,c,d=[],y=0,n=a.length;y<n;y++)if(c=a[y],c.style)if(p=c.style.display,b){if("none"===p&&(d[y]=S.get(c,"display")||null,d[y]||(c.style.display="")),""===c.style.display&&Ra(c)){p=y;var e=c.ownerDocument;c=c.nodeName;var k=Ab[c];k||(e=e.body.appendChild(e.createElement(c)),k=l.css(e,"display"),e.parentNode.removeChild(e),"none"===k&&(k="block"),Ab[c]=k);e=k;d[p]=e}}else"none"!==p&&
(d[y]="none",S.set(c,"display",p));for(y=0;y<n;y++)null!=d[y]&&(a[y].style.display=d[y]);return a}function T(a,b){var p="undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName(b||"*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&A(a,b)?l.merge([a],p):p}function Y(a,b){for(var p=0,c=a.length;p<c;p++)S.set(a[p],"globalEval",!b||S.get(b[p],"globalEval"))}function P(a,b,c,d,n){for(var p,y,e,Q=b.createDocumentFragment(),g=[],C=0,f=a.length;C<f;C++)if((p=
a[C])||0===p)if("object"===q(p))l.merge(g,p.nodeType?[p]:p);else if(Z.test(p)){y=y||Q.appendChild(b.createElement("div"));e=(Ka.exec(p)||["",""])[1].toLowerCase();e=ma[e]||ma._default;y.innerHTML=e[1]+l.htmlPrefilter(p)+e[2];for(e=e[0];e--;)y=y.lastChild;l.merge(g,y.childNodes);y=Q.firstChild;y.textContent=""}else g.push(b.createTextNode(p));Q.textContent="";for(C=0;p=g[C++];)if(d&&-1<l.inArray(p,d))n&&n.push(p);else if(a=db(p),y=T(Q.appendChild(p),"script"),a&&Y(y),c)for(e=0;p=y[e++];)k.test(p.type||
"")&&c.push(p);return Q}function L(){return!0}function U(){return!1}function ka(a,b){a:{try{var p=X.activeElement;break a}catch(ya){}p=void 0}return a===p===("focus"===b)}function g(a,b,c,d,n,e){var p;if("object"===typeof b){"string"!==typeof c&&(d=d||c,c=void 0);for(p in b)g(a,p,c,d,b[p],e);return a}null==d&&null==n?(n=c,d=c=void 0):null==n&&("string"===typeof c?(n=d,d=void 0):(n=d,d=c,c=void 0));if(!1===n)n=U;else if(!n)return a;if(1===e){var y=n;n=function(a){l().off(a);return y.apply(this,arguments)};
n.guid=y.guid||(y.guid=l.guid++)}return a.each(function(){l.event.add(this,b,n,d,c)})}function V(a,b,c){c?(S.set(a,b,!1),l.event.add(a,b,{namespace:!1,handler:function(a){var p=S.get(this,b);if(a.isTrigger&1&&this[b])if(p.length)(l.event.special[b]||{}).delegateType&&a.stopPropagation();else{p=Xa.call(arguments);S.set(this,b,p);var d=c(this,b);this[b]();var y=S.get(this,b);p!==y||d?S.set(this,b,!1):y={};if(p!==y)return a.stopImmediatePropagation(),a.preventDefault(),y&&y.value}else p.length&&(S.set(this,
b,{value:l.event.trigger(l.extend(p[0],l.Event.prototype),p.slice(1),this)}),a.stopImmediatePropagation())}})):void 0===S.get(a,b)&&l.event.add(a,b,L)}function ia(a,b){return A(a,"table")&&A(11!==b.nodeType?b:b.firstChild,"tr")?l(a).children("tbody")[0]||a:a}function J(a){a.type=(null!==a.getAttribute("type"))+"/"+a.type;return a}function ra(a){"true/"===(a.type||"").slice(0,5)?a.type=a.type.slice(5):a.removeAttribute("type");return a}function ha(a,b){var p,c,d;if(1===b.nodeType){if(S.hasData(a)){var y=
S.get(a);if(d=y.events)for(c in S.remove(b,"handle events"),d)for(y=0,p=d[c].length;y<p;y++)l.event.add(b,c,d[c][y])}oa.hasData(a)&&(a=oa.access(a),a=l.extend({},a),oa.set(b,a))}}function ja(a,c,d,n){c=aa(c);var p,y=0,e=a.length,g=e-1,Q=c[0],C=W(Q);if(C||1<e&&"string"===typeof Q&&!ba.checkClone&&Gb.test(Q))return a.each(function(b){var p=a.eq(b);C&&(c[0]=Q.call(this,b,p.html()));ja(p,c,d,n)});if(e){var f=P(c,a[0].ownerDocument,!1,a,n);var ya=f.firstChild;1===f.childNodes.length&&(f=ya);if(ya||n){ya=
l.map(T(f,"script"),J);for(p=ya.length;y<e;y++){var m=f;y!==g&&(m=l.clone(m,!0,!0),p&&l.merge(ya,T(m,"script")));d.call(a[y],m,y)}if(p)for(f=ya[ya.length-1].ownerDocument,l.map(ya,ra),y=0;y<p;y++)m=ya[y],k.test(m.type||"")&&!S.access(m,"globalEval")&&l.contains(f,m)&&(m.src&&"module"!==(m.type||"").toLowerCase()?l._evalUrl&&!m.noModule&&l._evalUrl(m.src,{nonce:m.nonce||m.getAttribute("nonce")},f):b(m.textContent.replace(gb,""),m,f))}}return a}function x(a,b,c){for(var p=b?l.filter(b,a):a,d=0;null!=
(b=p[d]);d++)c||1!==b.nodeType||l.cleanData(T(b)),b.parentNode&&(c&&db(b)&&Y(T(b,"script")),b.parentNode.removeChild(b));return a}function z(a,b,c){var p=a.style;if(c=c||tb(a)){var d=c.getPropertyValue(b)||c[b];""!==d||db(a)||(d=l.style(a,b));if(!ba.pixelBoxStyles()&&ub.test(d)&&Jb.test(b)){a=p.width;b=p.minWidth;var y=p.maxWidth;p.minWidth=p.maxWidth=p.width=d;d=c.width;p.width=a;p.minWidth=b;p.maxWidth=y}}return void 0!==d?d+"":d}function pa(a,b){return{get:function(){if(a())delete this.get;else return(this.get=
b).apply(this,arguments)}}}function fa(a){var b=l.cssProps[a]||da[a];if(b)return b;if(a in Pa)return a;a:{b=a;for(var p=b[0].toUpperCase()+b.slice(1),c=Ja.length;c--;)if(b=Ja[c]+p,b in Pa)break a;b=void 0}return da[a]=b||a}function Ia(a,b,c){return(a=cb.exec(b))?Math.max(0,a[2]-(c||0))+(a[3]||"px"):b}function M(a,b,c,d,n,e){var p="width"===b?1:0,y=0,k=0;if(c===(d?"border":"content"))return 0;for(;4>p;p+=2)"margin"===c&&(k+=l.css(a,c+Ua[p],!0,n)),d?("content"===c&&(k-=l.css(a,"padding"+Ua[p],!0,n)),
"margin"!==c&&(k-=l.css(a,"border"+Ua[p]+"Width",!0,n))):(k+=l.css(a,"padding"+Ua[p],!0,n),"padding"!==c?k+=l.css(a,"border"+Ua[p]+"Width",!0,n):y+=l.css(a,"border"+Ua[p]+"Width",!0,n));!d&&0<=e&&(k+=Math.max(0,Math.ceil(a["offset"+b[0].toUpperCase()+b.slice(1)]-e-k-y-.5))||0);return k}function wa(a,b,c){var p=tb(a),d=(!ba.boxSizingReliable()||c)&&"border-box"===l.css(a,"boxSizing",!1,p),y=d,n=z(a,b,p),e="offset"+b[0].toUpperCase()+b.slice(1);if(ub.test(n)){if(!c)return n;n="auto"}(!ba.boxSizingReliable()&&
d||!ba.reliableTrDimensions()&&A(a,"tr")||"auto"===n||!parseFloat(n)&&"inline"===l.css(a,"display",!1,p))&&a.getClientRects().length&&(d="border-box"===l.css(a,"boxSizing",!1,p),(y=e in a)&&(n=a[e]));n=parseFloat(n)||0;return n+M(a,b,c||(d?"border":"content"),y,p,n)+"px"}function ca(a,b,c,d,n){return new ca.prototype.init(a,b,c,d,n)}function nb(){Cb&&(!1===X.hidden&&a.requestAnimationFrame?a.requestAnimationFrame(nb):a.setTimeout(nb,l.fx.interval),l.fx.tick())}function ob(){a.setTimeout(function(){Db=
void 0});return Db=Date.now()}function na(a,b){var p=0,c={height:a};for(b=b?1:0;4>p;p+=2-b){var d=Ua[p];c["margin"+d]=c["padding"+d]=a}b&&(c.opacity=c.width=a);return c}function ta(a,b,c){for(var p,d=(qa.tweeners[b]||[]).concat(qa.tweeners["*"]),n=0,y=d.length;n<y;n++)if(p=d[n].call(c,b,a))return p}function Aa(a,b){var p,c;for(p in a){var d=G(p);var n=b[d];var y=a[p];Array.isArray(y)&&(n=y[1],y=a[p]=y[0]);p!==d&&(a[d]=y,delete a[p]);if((c=l.cssHooks[d])&&"expand"in c)for(p in y=c.expand(y),delete a[d],
y)p in a||(a[p]=y[p],b[p]=n);else b[d]=n}}function qa(a,b,c){var p,d=0,n=qa.prefilters.length,y=l.Deferred().always(function(){delete e.elem}),e=function(){if(p)return!1;var b=Db||ob();b=Math.max(0,k.startTime+k.duration-b);for(var c=1-(b/k.duration||0),d=0,n=k.tweens.length;d<n;d++)k.tweens[d].run(c);y.notifyWith(a,[k,c,b]);if(1>c&&n)return b;n||y.notifyWith(a,[k,1,0]);y.resolveWith(a,[k]);return!1},k=y.promise({elem:a,props:l.extend({},b),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},
c),originalProperties:b,originalOptions:c,startTime:Db||ob(),duration:c.duration,tweens:[],createTween:function(b,p){b=l.Tween(a,k.opts,b,p,k.opts.specialEasing[b]||k.opts.easing);k.tweens.push(b);return b},stop:function(b){var c=0,d=b?k.tweens.length:0;if(p)return this;for(p=!0;c<d;c++)k.tweens[c].run(1);b?(y.notifyWith(a,[k,1,0]),y.resolveWith(a,[k,b])):y.rejectWith(a,[k,b]);return this}});c=k.props;for(Aa(c,k.opts.specialEasing);d<n;d++)if(b=qa.prefilters[d].call(k,a,c,k.opts))return W(b.stop)&&
(l._queueHooks(k.elem,k.opts.queue).stop=b.stop.bind(b)),b;l.map(c,ta,k);W(k.opts.start)&&k.opts.start.call(a,k);k.progress(k.opts.progress).done(k.opts.done,k.opts.complete).fail(k.opts.fail).always(k.opts.always);l.fx.timer(l.extend(e,{elem:a,anim:k,queue:k.opts.queue}));return k}function za(a){return(a.match(Ga)||[]).join(" ")}function E(a){return a.getAttribute&&a.getAttribute("class")||""}function ua(a){return Array.isArray(a)?a:"string"===typeof a?a.match(Ga)||[]:[]}function va(a,b,c,d){var p;
if(Array.isArray(b))l.each(b,function(b,p){c||hb.test(a)?d(a,p):va(a+"["+("object"===typeof p&&null!=p?b:"")+"]",p,c,d)});else if(c||"object"!==q(b))d(a,b);else for(p in b)va(a+"["+p+"]",b[p],c,d)}function Va(a){return function(b,p){"string"!==typeof b&&(p=b,b="*");var c=0,d=b.toLowerCase().match(Ga)||[];if(W(p))for(;b=d[c++];)"+"===b[0]?(b=b.slice(1)||"*",(a[b]=a[b]||[]).unshift(p)):(a[b]=a[b]||[]).push(p)}}function Wa(a,b,c,d){function p(k){var e;n[k]=!0;l.each(a[k]||[],function(a,k){a=k(b,c,d);
if("string"===typeof a&&!y&&!n[a])return b.dataTypes.unshift(a),p(a),!1;if(y)return!(e=a)});return e}var n={},y=a===Tb;return p(b.dataTypes[0])||!n["*"]&&p("*")}function vb(a,b){var p,c,d=l.ajaxSettings.flatOptions||{};for(p in b)void 0!==b[p]&&((d[p]?a:c||(c={}))[p]=b[p]);c&&l.extend(!0,a,c);return a}function ea(a,b,c){for(var p,d,n,y,k=a.contents,e=a.dataTypes;"*"===e[0];)e.shift(),void 0===p&&(p=a.mimeType||b.getResponseHeader("Content-Type"));if(p)for(d in k)if(k[d]&&k[d].test(p)){e.unshift(d);
break}if(e[0]in c)n=e[0];else{for(d in c){if(!e[0]||a.converters[d+" "+e[0]]){n=d;break}y||(y=d)}n=n||y}if(n)return n!==e[0]&&e.unshift(n),c[n]}function Ma(a,b,c,d){var p,n,y={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)y[g.toLowerCase()]=a.converters[g];for(n=k.shift();n;){a.responseFields[n]&&(c[a.responseFields[n]]=b);!e&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType));var e=n;if(n=k.shift())if("*"===n)n=e;else if("*"!==e&&e!==n){var g=y[e+" "+n]||y["* "+n];if(!g)for(p in y){var C=p.split(" ");
if(C[1]===n&&(g=y[e+" "+C[0]]||y["* "+C[0]])){!0===g?g=y[p]:!0!==y[p]&&(n=C[0],k.unshift(C[1]));break}}if(!0!==g)if(g&&a.throws)b=g(b);else try{b=g(b)}catch(hc){return{state:"parsererror",error:g?hc:"No conversion from "+e+" to "+n}}}}return{state:"success",data:b}}var Ba=[],wb=Object.getPrototypeOf,Xa=Ba.slice,aa=Ba.flat?function(a){return Ba.flat.call(a)}:function(a){return Ba.concat.apply([],a)},la=Ba.push,fb=Ba.indexOf,Sa={},Ya=Sa.toString,Za=Sa.hasOwnProperty,Ea=Za.toString,O=Ea.call(Object),
ba={},W=function(a){return"function"===typeof a&&"number"!==typeof a.nodeType&&"function"!==typeof a.item},Fa=function(a){return null!=a&&a===a.window},X=a.document,$a={type:!0,src:!0,nonce:!0,noModule:!0},l=function(a,b){return new l.fn.init(a,b)};l.fn=l.prototype={jquery:"3.6.0",constructor:l,length:0,toArray:function(){return Xa.call(this)},get:function(a){return null==a?Xa.call(this):0>a?this[a+this.length]:this[a]},pushStack:function(a){a=l.merge(this.constructor(),a);a.prevObject=this;return a},
each:function(a){return l.each(this,a)},map:function(a){return this.pushStack(l.map(this,function(b,p){return a.call(b,p,b)}))},slice:function(){return this.pushStack(Xa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(a,b){return(b+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(a,b){return b%2}))},eq:function(a){var b=this.length;a=+a+(0>a?b:0);return this.pushStack(0<=a&&
a<b?[this[a]]:[])},end:function(){return this.prevObject||this.constructor()},push:la,sort:Ba.sort,splice:Ba.splice};l.extend=l.fn.extend=function(){var a,b,c,d=arguments[0]||{},n=1,k=arguments.length,e=!1;"boolean"===typeof d&&(e=d,d=arguments[n]||{},n++);"object"===typeof d||W(d)||(d={});n===k&&(d=this,n--);for(;n<k;n++)if(null!=(a=arguments[n]))for(b in a){var g=a[b];if("__proto__"!==b&&d!==g)if(e&&g&&(l.isPlainObject(g)||(c=Array.isArray(g)))){var C=d[b];C=c&&!Array.isArray(C)?[]:c||l.isPlainObject(C)?
C:{};c=!1;d[b]=l.extend(e,C,g)}else void 0!==g&&(d[b]=g)}return d};l.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a);},noop:function(){},isPlainObject:function(a){if(!a||"[object Object]"!==Ya.call(a))return!1;a=wb(a);if(!a)return!0;a=Za.call(a,"constructor")&&a.constructor;return"function"===typeof a&&Ea.call(a)===O},isEmptyObject:function(a){for(var b in a)return!1;return!0},globalEval:function(a,c,d){b(a,{nonce:c&&c.nonce},d)},each:function(a,
b){var c,p=0;if(m(a))for(c=a.length;p<c&&!1!==b.call(a[p],p,a[p]);p++);else for(p in a)if(!1===b.call(a[p],p,a[p]))break;return a},makeArray:function(a,b){b=b||[];null!=a&&(m(Object(a))?l.merge(b,"string"===typeof a?[a]:a):la.call(b,a));return b},inArray:function(a,b,c){return null==b?-1:fb.call(b,a,c)},merge:function(a,b){for(var c=+b.length,p=0,d=a.length;p<c;p++)a[d++]=b[p];a.length=d;return a},grep:function(a,b,c){for(var p=[],d=0,n=a.length,k=!c;d<n;d++)c=!b(a[d],d),c!==k&&p.push(a[d]);return p},
map:function(a,b,c){var p,d=0,n=[];if(m(a))for(p=a.length;d<p;d++){var k=b(a[d],d,c);null!=k&&n.push(k)}else for(d in a)k=b(a[d],d,c),null!=k&&n.push(k);return aa(n)},guid:1,support:ba});"function"===typeof Symbol&&(l.fn[Symbol.iterator]=Ba[Symbol.iterator]);l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(a,b){Sa["[object "+b+"]"]=b.toLowerCase()});var xa=function(a){function b(a,b,c,p){var d,n,k,e,y=b&&b.ownerDocument;var g=b?b.nodeType:9;c=c||[];
if("string"!==typeof a||!a||1!==g&&9!==g&&11!==g)return c;if(!p&&(S(b),b=b||Z,V)){if(11!==g&&(e=Jb.exec(a)))if(d=e[1])if(9===g)if(n=b.getElementById(d)){if(n.id===d)return c.push(n),c}else return c;else{if(y&&(n=y.getElementById(d))&&U(b,n)&&n.id===d)return c.push(n),c}else{if(e[2])return ra.apply(c,b.getElementsByTagName(a)),c;if((d=e[3])&&sa.getElementsByClassName&&b.getElementsByClassName)return ra.apply(c,b.getElementsByClassName(d)),c}if(!(!sa.qsa||R[a+" "]||D&&D.test(a)||1===g&&"object"===b.nodeName.toLowerCase())){d=
a;y=b;if(1===g&&(P.test(a)||H.test(a))){y=T.test(a)&&l(b.parentNode)||b;y===b&&sa.scope||((k=b.getAttribute("id"))?k=k.replace(eb,Sb):b.setAttribute("id",k=J));d=X(a);for(g=d.length;g--;)d[g]=(k?"#"+k:":scope")+" "+q(d[g]);d=d.join(",")}try{return ra.apply(c,y.querySelectorAll(d)),c}catch(vc){R(a,!0)}finally{k===J&&b.removeAttribute("id")}}}return ba(a.replace(ka,"$1"),b,c,p)}function c(){function a(c,p){b.push(c+" ")>da.cacheLength&&delete a[b.shift()];return a[c+" "]=p}var b=[];return a}function p(a){a[J]=
!0;return a}function d(a){var b=Z.createElement("fieldset");try{return!!a(b)}catch(tc){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}}function n(a,b){a=a.split("|");for(var c=a.length;c--;)da.attrHandle[a[c]]=b}function k(a,b){var c=b&&a,p=c&&1===a.nodeType&&1===b.nodeType&&a.sourceIndex-b.sourceIndex;if(p)return p;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function e(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function g(a){return function(b){var c=
b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function C(a){return function(b){return"form"in b?b.parentNode&&!1===b.disabled?"label"in b?"label"in b.parentNode?b.parentNode.disabled===a:b.disabled===a:b.isDisabled===a||b.isDisabled!==!a&&O(b)===a:b.disabled===a:"label"in b?b.disabled===a:!1}}function f(a){return p(function(b){b=+b;return p(function(c,p){for(var d,n=a([],c.length,b),k=n.length;k--;)c[d=n[k]]&&(c[d]=!(p[d]=c[d]))})})}function l(a){return a&&"undefined"!==
typeof a.getElementsByTagName&&a}function m(){}function q(a){for(var b=0,c=a.length,p="";b<c;b++)p+=a[b].value;return p}function r(a,b,c){var p=b.dir,d=b.next,n=d||p,k=c&&"parentNode"===n,e=ia++;return b.first?function(b,c,d){for(;b=b[p];)if(1===b.nodeType||k)return a(b,c,d);return!1}:function(b,c,y){var g,C=[M,e];if(y)for(;b=b[p];){if((1===b.nodeType||k)&&a(b,c,y))return!0}else for(;b=b[p];)if(1===b.nodeType||k){var f=b[J]||(b[J]={});f=f[b.uniqueID]||(f[b.uniqueID]={});if(d&&d===b.nodeName.toLowerCase())b=
b[p]||b;else{if((g=f[n])&&g[0]===M&&g[1]===e)return C[2]=g[2];f[n]=C;if(C[2]=a(b,c,y))return!0}}return!1}}function t(a){return 1<a.length?function(b,c,p){for(var d=a.length;d--;)if(!a[d](b,c,p))return!1;return!0}:a[0]}function u(a,b,c,p,d){for(var n,k=[],e=0,y=a.length,g=null!=b;e<y;e++)if(n=a[e])if(!c||c(n,p,d))k.push(n),g&&b.push(e);return k}function hb(a,c,d,n,k,e){n&&!n[J]&&(n=hb(n));k&&!k[J]&&(k=hb(k,e));return p(function(p,e,y,g){var C,f=[],l=[],m=e.length,Q;if(!(Q=p)){Q=c||"*";for(var q=y.nodeType?
[y]:y,r=[],t=0,hb=q.length;t<hb;t++)b(Q,q[t],r);Q=r}Q=!a||!p&&c?Q:u(Q,f,a,y,g);q=d?k||(p?a:m||n)?[]:e:Q;d&&d(Q,q,y,g);if(n){var ya=u(q,l);n(ya,[],y,g);for(y=ya.length;y--;)if(C=ya[y])q[l[y]]=!(Q[l[y]]=C)}if(p){if(k||a){if(k){ya=[];for(y=q.length;y--;)(C=q[y])&&ya.push(Q[y]=C);k(null,q=[],ya,g)}for(y=q.length;y--;)(C=q[y])&&-1<(ya=k?Bb(p,C):f[y])&&(p[ya]=!(e[ya]=C))}}else q=u(q===e?q.splice(m,q.length):q),k?k(null,e,q,g):ra.apply(e,q)})}function w(a){var b,c,p=a.length,d=da.relative[a[0].type];var n=
d||da.relative[" "];for(var k=d?1:0,e=r(function(a){return a===b},n,!0),y=r(function(a){return-1<Bb(b,a)},n,!0),g=[function(a,c,p){a=!d&&(p||c!==v)||((b=c).nodeType?e(a,c,p):y(a,c,p));b=null;return a}];k<p;k++)if(n=da.relative[a[k].type])g=[r(t(g),n)];else{n=da.filter[a[k].type].apply(null,a[k].matches);if(n[J]){for(c=++k;c<p&&!da.relative[a[c].type];c++);return hb(1<k&&t(g),1<k&&q(a.slice(0,k-1).concat({value:" "===a[k-2].type?"*":""})).replace(ka,"$1"),n,k<c&&w(a.slice(k,c)),c<p&&w(a=a.slice(c)),
c<p&&q(a))}g.push(n)}return t(g)}function ma(a,c){var d=0<c.length,n=0<a.length,k=function(p,k,e,y,g){var C,f,l=0,Q="0",m=p&&[],q=[],r=v,t=p||n&&da.find.TAG("*",g),ya=M+=null==r?1:Math.random()||.1,hb=t.length;for(g&&(v=k==Z||k||g);Q!==hb&&null!=(C=t[Q]);Q++){if(n&&C){var w=0;k||C.ownerDocument==Z||(S(C),e=!V);for(;f=a[w++];)if(f(C,k||Z,e)){y.push(C);break}g&&(M=ya)}d&&((C=!f&&C)&&l--,p&&m.push(C))}l+=Q;if(d&&Q!==l){for(w=0;f=c[w++];)f(m,q,k,e);if(p){if(0<l)for(;Q--;)m[Q]||q[Q]||(q[Q]=ha.call(y));
q=u(q)}ra.apply(y,q);g&&!p&&0<q.length&&1<l+c.length&&b.uniqueSort(y)}g&&(M=ya,v=r);return m};return d?p(k):k}var h,v,A,B,Z,Da,V,D,x,G,U,J="sizzle"+1*new Date,F=a.document,M=0,ia=0,I=c(),Kb=c(),fa=c(),R=c(),Hb=function(a,b){a===b&&(B=!0);return 0},N={}.hasOwnProperty,z=[],ha=z.pop,L=z.push,ra=z.push,K=z.slice,Bb=function(a,b){for(var c=0,p=a.length;c<p;c++)if(a[c]===b)return c;return-1},Y=/[\x20\t\r\n\f]+/g,ka=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Gb=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,
H=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,P=/[\x20\t\r\n\f]|>/,ub=/:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Zb=
/^(?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+$/,gb={ID:/^#((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,CLASS:/^\.((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)/,TAG:/^((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\]/,
PSEUDO:/^:((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\[^\r\n\f]|[\w-]|[^\x00-\x7f])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,
bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},tb=/HTML$/i,pa=/^(?:input|select|textarea|button)$/i,Ia=/^h\d$/i,E=/^[^{]+\{\s*\[native \w/,Jb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,T=/[+~]/,ja=/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,Ja=function(a,b){a="0x"+a.slice(1)-
65536;return b?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,a&1023|56320)},eb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Sb=function(a,b){return b?"\x00"===a?"\ufffd":a.slice(0,-1)+"\\"+a.charCodeAt(a.length-1).toString(16)+" ":"\\"+a},Pa=function(){S()},O=r(function(a){return!0===a.disabled&&"fieldset"===a.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{ra.apply(z=K.call(F.childNodes),F.childNodes),z[F.childNodes.length].nodeType}catch(sc){ra={apply:z.length?
function(a,b){L.apply(a,K.call(b))}:function(a,b){for(var c=a.length,p=0;a[c++]=b[p++];);a.length=c-1}}}var sa=b.support={};var ca=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return!tb.test(a&&a.namespaceURI||b&&b.nodeName||"HTML")};var S=b.setDocument=function(a){var b;a=a?a.ownerDocument||a:F;if(a==Z||9!==a.nodeType||!a.documentElement)return Z;Z=a;Da=Z.documentElement;V=!ca(Z);F!=Z&&(b=Z.defaultView)&&b.top!==b&&(b.addEventListener?b.addEventListener("unload",Pa,!1):b.attachEvent&&
b.attachEvent("onunload",Pa));sa.scope=d(function(a){Da.appendChild(a).appendChild(Z.createElement("div"));return"undefined"!==typeof a.querySelectorAll&&!a.querySelectorAll(":scope fieldset div").length});sa.attributes=d(function(a){a.className="i";return!a.getAttribute("className")});sa.getElementsByTagName=d(function(a){a.appendChild(Z.createComment(""));return!a.getElementsByTagName("*").length});sa.getElementsByClassName=E.test(Z.getElementsByClassName);sa.getById=d(function(a){Da.appendChild(a).id=
J;return!Z.getElementsByName||!Z.getElementsByName(J).length});sa.getById?(da.filter.ID=function(a){var b=a.replace(ja,Ja);return function(a){return a.getAttribute("id")===b}},da.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&V)return(a=b.getElementById(a))?[a]:[]}):(da.filter.ID=function(a){var b=a.replace(ja,Ja);return function(a){return(a="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}},da.find.ID=function(a,b){if("undefined"!==typeof b.getElementById&&
V){var c,p=b.getElementById(a);if(p){if((c=p.getAttributeNode("id"))&&c.value===a)return[p];var d=b.getElementsByName(a);for(b=0;p=d[b++];)if((c=p.getAttributeNode("id"))&&c.value===a)return[p]}return[]}});da.find.TAG=sa.getElementsByTagName?function(a,b){if("undefined"!==typeof b.getElementsByTagName)return b.getElementsByTagName(a);if(sa.qsa)return b.querySelectorAll(a)}:function(a,b){var c=[],p=0;b=b.getElementsByTagName(a);if("*"===a){for(;a=b[p++];)1===a.nodeType&&c.push(a);return c}return b};
da.find.CLASS=sa.getElementsByClassName&&function(a,b){if("undefined"!==typeof b.getElementsByClassName&&V)return b.getElementsByClassName(a)};x=[];D=[];if(sa.qsa=E.test(Z.querySelectorAll))d(function(a){Da.appendChild(a).innerHTML="<a id='"+J+"'></a><select id='"+J+"-\r\\' msallowcapture=''><option selected=''></option></select>";a.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll("[selected]").length||D.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
a.querySelectorAll("[id~="+J+"-]").length||D.push("~=");var b=Z.createElement("input");b.setAttribute("name","");a.appendChild(b);a.querySelectorAll("[name='']").length||D.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");a.querySelectorAll(":checked").length||D.push(":checked");a.querySelectorAll("a#"+J+"+*").length||D.push(".#.+[+~]");a.querySelectorAll("\\\f");D.push("[\\r\\n\\f]")}),d(function(a){a.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var b=Z.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");a.querySelectorAll("[name=d]").length&&D.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==a.querySelectorAll(":enabled").length&&D.push(":enabled",":disabled");Da.appendChild(a).disabled=!0;2!==a.querySelectorAll(":disabled").length&&D.push(":enabled",":disabled");a.querySelectorAll("*,:x");D.push(",.*:")});(sa.matchesSelector=E.test(G=Da.matches||Da.webkitMatchesSelector||Da.mozMatchesSelector||
Da.oMatchesSelector||Da.msMatchesSelector))&&d(function(a){sa.disconnectedMatch=G.call(a,"*");G.call(a,"[s!='']:x");x.push("!=",":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")});
D=D.length&&new RegExp(D.join("|"));x=x.length&&new RegExp(x.join("|"));U=(b=E.test(Da.compareDocumentPosition))||E.test(Da.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a;b=b&&b.parentNode;return a===b||!!(b&&1===b.nodeType&&(c.contains?c.contains(b):a.compareDocumentPosition&&a.compareDocumentPosition(b)&16))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};Hb=b?function(a,b){if(a===b)return B=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;
if(c)return c;c=(a.ownerDocument||a)==(b.ownerDocument||b)?a.compareDocumentPosition(b):1;return c&1||!sa.sortDetached&&b.compareDocumentPosition(a)===c?a==Z||a.ownerDocument==F&&U(F,a)?-1:b==Z||b.ownerDocument==F&&U(F,b)?1:A?Bb(A,a)-Bb(A,b):0:c&4?-1:1}:function(a,b){if(a===b)return B=!0,0;var c=0,p=a.parentNode,d=b.parentNode,n=[a],e=[b];if(!p||!d)return a==Z?-1:b==Z?1:p?-1:d?1:A?Bb(A,a)-Bb(A,b):0;if(p===d)return k(a,b);for(;a=a.parentNode;)n.unshift(a);for(a=b;a=a.parentNode;)e.unshift(a);for(;n[c]===
e[c];)c++;return c?k(n[c],e[c]):n[c]==F?-1:e[c]==F?1:0};return Z};b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,c){S(a);if(!(!sa.matchesSelector||!V||R[c+" "]||x&&x.test(c)||D&&D.test(c)))try{var p=G.call(a,c);if(p||sa.disconnectedMatch||a.document&&11!==a.document.nodeType)return p}catch(uc){R(c,!0)}return 0<b(c,Z,null,[a]).length};b.contains=function(a,b){(a.ownerDocument||a)!=Z&&S(a);return U(a,b)};b.attr=function(a,b){(a.ownerDocument||a)!=Z&&S(a);var c=da.attrHandle[b.toLowerCase()];
c=c&&N.call(da.attrHandle,b.toLowerCase())?c(a,b,!V):void 0;return void 0!==c?c:sa.attributes||!V?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null};b.escape=function(a){return(a+"").replace(eb,Sb)};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};b.uniqueSort=function(a){var b,c=[],p=0,d=0;B=!sa.detectDuplicates;A=!sa.sortStable&&a.slice(0);a.sort(Hb);if(B){for(;b=a[d++];)b===a[d]&&(p=c.push(d));for(;p--;)a.splice(c[p],1)}A=null;return a};var W=b.getText=
function(a){var b="",c=0;var p=a.nodeType;if(!p)for(;p=a[c++];)b+=W(p);else if(1===p||9===p||11===p){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=W(a)}else if(3===p||4===p)return a.nodeValue;return b};var da=b.selectors={cacheLength:50,createPseudo:p,match:gb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ja,
Ja);a[3]=(a[3]||a[4]||a[5]||"").replace(ja,Ja);"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[6]&&a[2];if(gb.CHILD.test(a[0]))return null;a[3]?a[2]=a[4]||a[5]||"":c&&ub.test(c)&&(b=X(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=
c.slice(0,b));return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(ja,Ja).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=I[a+" "];return b||(b=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"),I(a,function(a){return b.test("string"===typeof a.className&&a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}))},ATTR:function(a,c,p){return function(d){d=b.attr(d,
a);if(null==d)return"!="===c;if(!c)return!0;d+="";return"="===c?d===p:"!="===c?d!==p:"^="===c?p&&0===d.indexOf(p):"*="===c?p&&-1<d.indexOf(p):"$="===c?p&&d.slice(-p.length)===p:"~="===c?-1<(" "+d.replace(Y," ")+" ").indexOf(p):"|="===c?d===p||d.slice(0,p.length+1)===p+"-":!1}},CHILD:function(a,b,c,p,d){var n="nth"!==a.slice(0,3),k="last"!==a.slice(-4),e="of-type"===b;return 1===p&&0===d?function(a){return!!a.parentNode}:function(b,c,y){var g,C;c=n!==k?"nextSibling":"previousSibling";var f=b.parentNode,
l=e&&b.nodeName.toLowerCase();y=!y&&!e;var Q=!1;if(f){if(n){for(;c;){for(g=b;g=g[c];)if(e?g.nodeName.toLowerCase()===l:1===g.nodeType)return!1;var m=c="only"===a&&!m&&"nextSibling"}return!0}m=[k?f.firstChild:f.lastChild];if(k&&y){g=f;var q=g[J]||(g[J]={});q=q[g.uniqueID]||(q[g.uniqueID]={});Q=q[a]||[];Q=(C=Q[0]===M&&Q[1])&&Q[2];for(g=C&&f.childNodes[C];g=++C&&g&&g[c]||(Q=C=0)||m.pop();)if(1===g.nodeType&&++Q&&g===b){q[a]=[M,C,Q];break}}else if(y&&(g=b,q=g[J]||(g[J]={}),q=q[g.uniqueID]||(q[g.uniqueID]=
{}),Q=q[a]||[],Q=C=Q[0]===M&&Q[1]),!1===Q)for(;(g=++C&&g&&g[c]||(Q=C=0)||m.pop())&&((e?g.nodeName.toLowerCase()!==l:1!==g.nodeType)||!++Q||(y&&(q=g[J]||(g[J]={}),q=q[g.uniqueID]||(q[g.uniqueID]={}),q[a]=[M,Q]),g!==b)););Q-=d;return Q===p||0===Q%p&&0<=Q/p}}},PSEUDO:function(a,c){var d=da.pseudos[a]||da.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);if(d[J])return d(c);if(1<d.length){var n=[a,a,"",c];return da.setFilters.hasOwnProperty(a.toLowerCase())?p(function(a,b){for(var p,n=d(a,
c),k=n.length;k--;)p=Bb(a,n[k]),a[p]=!(b[p]=n[k])}):function(a){return d(a,0,n)}}return d}},pseudos:{not:p(function(a){var b=[],c=[],d=aa(a.replace(ka,"$1"));return d[J]?p(function(a,b,c,p){p=d(a,null,p,[]);for(var n=a.length;n--;)if(c=p[n])a[n]=!(b[n]=c)}):function(a,p,n){b[0]=a;d(b,null,n,c);b[0]=null;return!c.pop()}}),has:p(function(a){return function(c){return 0<b(a,c).length}}),contains:p(function(a){a=a.replace(ja,Ja);return function(b){return-1<(b.textContent||W(b)).indexOf(a)}}),lang:p(function(a){Zb.test(a||
"")||b.error("unsupported lang: "+a);a=a.replace(ja,Ja).toLowerCase();return function(b){var c;do if(c=V?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===Da},focus:function(a){return a===Z.activeElement&&(!Z.hasFocus||Z.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:C(!1),
disabled:C(!0),checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!da.pseudos.empty(a)},header:function(a){return Ia.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===
b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:f(function(){return[0]}),last:f(function(a,b){return[b-1]}),eq:f(function(a,b,c){return[0>c?c+b:c]}),even:f(function(a,b){for(var c=0;c<b;c+=2)a.push(c);return a}),odd:f(function(a,b){for(var c=1;c<b;c+=2)a.push(c);return a}),lt:f(function(a,b,c){for(b=0>c?c+b:c>b?b:c;0<=--b;)a.push(b);return a}),gt:f(function(a,b,
c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};da.pseudos.nth=da.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})da.pseudos[h]=e(h);for(h in{submit:!0,reset:!0})da.pseudos[h]=g(h);m.prototype=da.filters=da.pseudos;da.setFilters=new m;var X=b.tokenize=function(a,c){var p,d,n,k,e;if(k=Kb[a+" "])return c?0:k.slice(0);k=a;var y=[];for(e=da.preFilter;k;){if(!g||(p=Gb.exec(k)))p&&(k=k.slice(p[0].length)||k),y.push(d=[]);var g=!1;if(p=H.exec(k))g=p.shift(),d.push({value:g,type:p[0].replace(ka,
" ")}),k=k.slice(g.length);for(n in da.filter)!(p=gb[n].exec(k))||e[n]&&!(p=e[n](p))||(g=p.shift(),d.push({value:g,type:n,matches:p}),k=k.slice(g.length));if(!g)break}return c?k.length:k?b.error(a):Kb(a,y).slice(0)};var aa=b.compile=function(a,b){var c,p=[],d=[],n=fa[a+" "];if(!n){b||(b=X(a));for(c=b.length;c--;)n=w(b[c]),n[J]?p.push(n):d.push(n);n=fa(a,ma(d,p));n.selector=a}return n};var ba=b.select=function(a,b,c,p){var d,n,k,e="function"===typeof a&&a,y=!p&&X(a=e.selector||a);c=c||[];if(1===y.length){var g=
y[0]=y[0].slice(0);if(2<g.length&&"ID"===(n=g[0]).type&&9===b.nodeType&&V&&da.relative[g[1].type]){b=(da.find.ID(n.matches[0].replace(ja,Ja),b)||[])[0];if(!b)return c;e&&(b=b.parentNode);a=a.slice(g.shift().value.length)}for(d=gb.needsContext.test(a)?0:g.length;d--;){n=g[d];if(da.relative[k=n.type])break;if(k=da.find[k])if(p=k(n.matches[0].replace(ja,Ja),T.test(g[0].type)&&l(b.parentNode)||b)){g.splice(d,1);a=p.length&&q(g);if(!a)return ra.apply(c,p),c;break}}}(e||aa(a,y))(p,b,!V,c,!b||T.test(a)&&
l(b.parentNode)||b);return c};sa.sortStable=J.split("").sort(Hb).join("")===J;sa.detectDuplicates=!!B;S();sa.sortDetached=d(function(a){return a.compareDocumentPosition(Z.createElement("fieldset"))&1});d(function(a){a.innerHTML="<a href='#'></a>";return"#"===a.firstChild.getAttribute("href")})||n("type|href|height|width",function(a,b,c){if(!c)return a.getAttribute(b,"type"===b.toLowerCase()?1:2)});sa.attributes&&d(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return""===
a.firstChild.getAttribute("value")})||n("value",function(a,b,c){if(!c&&"input"===a.nodeName.toLowerCase())return a.defaultValue});d(function(a){return null==a.getAttribute("disabled")})||n("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var p;if(!c)return!0===a[b]?b.toLowerCase():(p=a.getAttributeNode(b))&&p.specified?p.value:null});return b}(a);l.find=xa;l.expr=xa.selectors;l.expr[":"]=l.expr.pseudos;l.uniqueSort=
l.unique=xa.uniqueSort;l.text=xa.getText;l.isXMLDoc=xa.isXML;l.contains=xa.contains;l.escapeSelector=xa.escape;var Qa=function(a,b,c){for(var p=[],d=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(d&&l(a).is(c))break;p.push(a)}return p},ab=function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c},Ta=l.expr.match.needsContext,pb=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;l.filter=function(a,b,c){var p=b[0];c&&(a=":not("+a+")");return 1===
b.length&&1===p.nodeType?l.find.matchesSelector(p,a)?[p]:[]:l.find.matches(a,l.grep(b,function(a){return 1===a.nodeType}))};l.fn.extend({find:function(a){var b,c=this.length,p=this;if("string"!==typeof a)return this.pushStack(l(a).filter(function(){for(b=0;b<c;b++)if(l.contains(p[b],this))return!0}));var d=this.pushStack([]);for(b=0;b<c;b++)l.find(a,p[b],d);return 1<c?l.uniqueSort(d):d},filter:function(a){return this.pushStack(u(this,a||[],!1))},not:function(a){return this.pushStack(u(this,a||[],
!0))},is:function(a){return!!u(this,"string"===typeof a&&Ta.test(a)?l(a):a||[],!1).length}});var Ha=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(l.fn.init=function(a,b,c){if(!a)return this;c=c||xb;if("string"===typeof a){var p="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:Ha.exec(a);if(!p||!p[1]&&b)return!b||b.jquery?(b||c).find(a):this.constructor(b).find(a);if(p[1]){if(b=b instanceof l?b[0]:b,l.merge(this,l.parseHTML(p[1],b&&b.nodeType?b.ownerDocument||b:X,!0)),pb.test(p[1])&&l.isPlainObject(b))for(p in b)if(W(this[p]))this[p](b[p]);
else this.attr(p,b[p])}else if(a=X.getElementById(p[2]))this[0]=a,this.length=1;return this}return a.nodeType?(this[0]=a,this.length=1,this):W(a)?void 0!==c.ready?c.ready(a):a(l):l.makeArray(a,this)}).prototype=l.fn;var xb=l(X);var qb=/^(?:parents|prev(?:Until|All))/,Fb={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(a){var b=l(a,this),c=b.length;return this.filter(function(){for(var a=0;a<c;a++)if(l.contains(this,b[a]))return!0})},closest:function(a,b){var c,p=0,d=this.length,
n=[],k="string"!==typeof a&&l(a);if(!Ta.test(a))for(;p<d;p++)for(c=this[p];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(k?-1<k.index(c):1===c.nodeType&&l.find.matchesSelector(c,a))){n.push(c);break}return this.pushStack(1<n.length?l.uniqueSort(n):n)},index:function(a){return a?"string"===typeof a?fb.call(l(a),this[0]):fb.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(a,b))))},addBack:function(a){return this.add(null==
a?this.prevObject:this.prevObject.filter(a))}});l.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return Qa(a,"parentNode")},parentsUntil:function(a,b,c){return Qa(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return Qa(a,"nextSibling")},prevAll:function(a){return Qa(a,"previousSibling")},nextUntil:function(a,b,c){return Qa(a,"nextSibling",c)},prevUntil:function(a,b,c){return Qa(a,
"previousSibling",c)},siblings:function(a){return ab((a.parentNode||{}).firstChild,a)},children:function(a){return ab(a.firstChild)},contents:function(a){if(null!=a.contentDocument&&wb(a.contentDocument))return a.contentDocument;A(a,"template")&&(a=a.content||a);return l.merge([],a.childNodes)}},function(a,b){l.fn[a]=function(c,p){var d=l.map(this,b,c);"Until"!==a.slice(-5)&&(p=c);p&&"string"===typeof p&&(d=l.filter(p,d));1<this.length&&(Fb[a]||l.uniqueSort(d),qb.test(a)&&d.reverse());return this.pushStack(d)}});
var Ga=/[^\x20\t\r\n\f]+/g;l.Callbacks=function(a){a="string"===typeof a?r(a):l.extend({},a);var b,c,p,d,n=[],k=[],e=-1,g=function(){d=d||a.once;for(p=b=!0;k.length;e=-1)for(c=k.shift();++e<n.length;)!1===n[e].apply(c[0],c[1])&&a.stopOnFalse&&(e=n.length,c=!1);a.memory||(c=!1);b=!1;d&&(n=c?[]:"")},C={add:function(){n&&(c&&!b&&(e=n.length-1,k.push(c)),function ic(b){l.each(b,function(b,c){W(c)?a.unique&&C.has(c)||n.push(c):c&&c.length&&"string"!==q(c)&&ic(c)})}(arguments),c&&!b&&g());return this},
remove:function(){l.each(arguments,function(a,b){for(var c;-1<(c=l.inArray(b,n,c));)n.splice(c,1),c<=e&&e--});return this},has:function(a){return a?-1<l.inArray(a,n):0<n.length},empty:function(){n&&(n=[]);return this},disable:function(){d=k=[];n=c="";return this},disabled:function(){return!n},lock:function(){d=k=[];c||b||(n=c="");return this},locked:function(){return!!d},fireWith:function(a,c){d||(c=c||[],c=[a,c.slice?c.slice():c],k.push(c),b||g());return this},fire:function(){C.fireWith(this,arguments);
return this},fired:function(){return!!p}};return C};l.extend({Deferred:function(b){var c=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],p="pending",d={state:function(){return p},always:function(){n.done(arguments).fail(arguments);return this},"catch":function(a){return d.then(null,a)},pipe:function(){var a=
arguments;return l.Deferred(function(b){l.each(c,function(c,p){var d=W(a[p[4]])&&a[p[4]];n[p[1]](function(){var a=d&&d.apply(this,arguments);if(a&&W(a.promise))a.promise().progress(b.notify).done(b.resolve).fail(b.reject);else b[p[0]+"With"](this,d?[a]:arguments)})});a=null}).promise()},then:function(b,p,d){function n(b,c,p,d){return function(){var e=this,g=arguments,y=function(){if(!(b<k)){var a=p.apply(e,g);if(a===c.promise())throw new TypeError("Thenable self-resolution");var y=a&&("object"===
typeof a||"function"===typeof a)&&a.then;W(y)?d?y.call(a,n(k,c,t,d),n(k,c,R,d)):(k++,y.call(a,n(k,c,t,d),n(k,c,R,d),n(k,c,t,c.notifyWith))):(p!==t&&(e=void 0,g=[a]),(d||c.resolveWith)(e,g))}},C=d?y:function(){try{y()}catch(cc){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(cc,C.stackTrace),b+1>=k&&(p!==R&&(e=void 0,g=[cc]),c.rejectWith(e,g))}};b?C():(l.Deferred.getStackHook&&(C.stackTrace=l.Deferred.getStackHook()),a.setTimeout(C))}}var k=0;return l.Deferred(function(a){c[0][3].add(n(0,a,W(d)?
d:t,a.notifyWith));c[1][3].add(n(0,a,W(b)?b:t));c[2][3].add(n(0,a,W(p)?p:R))}).promise()},promise:function(a){return null!=a?l.extend(a,d):d}},n={};l.each(c,function(a,b){var k=b[2],e=b[5];d[b[1]]=k.add;e&&k.add(function(){p=e},c[3-a][2].disable,c[3-a][3].disable,c[0][2].lock,c[0][3].lock);k.add(b[3].fire);n[b[0]]=function(){n[b[0]+"With"](this===n?void 0:this,arguments);return this};n[b[0]+"With"]=k.fireWith});d.promise(n);b&&b.call(n,n);return n},when:function(a){var b=arguments.length,c=b,p=Array(c),
d=Xa.call(arguments),n=l.Deferred(),k=function(a){return function(c){p[a]=this;d[a]=1<arguments.length?Xa.call(arguments):c;--b||n.resolveWith(p,d)}};if(1>=b&&(K(a,n.done(k(c)).resolve,n.reject,!b),"pending"===n.state()||W(d[c]&&d[c].then)))return n.then();for(;c--;)K(d[c],k(c),n.reject);return n.promise()}});var kb=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(b,c){a.console&&a.console.warn&&b&&kb.test(b.name)&&a.console.warn("jQuery.Deferred exception: "+
b.message,b.stack,c)};l.readyException=function(b){a.setTimeout(function(){throw b;})};var yb=l.Deferred();l.fn.ready=function(a){yb.then(a).catch(function(a){l.readyException(a)});return this};l.extend({isReady:!1,readyWait:1,ready:function(a){(!0===a?--l.readyWait:l.isReady)||(l.isReady=!0,!0!==a&&0<--l.readyWait||yb.resolveWith(X,[l]))}});l.ready.then=yb.then;"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?a.setTimeout(l.ready):(X.addEventListener("DOMContentLoaded",
N),a.addEventListener("load",N));var La=function(a,b,c,d,n,k,e){var p=0,g=a.length,y=null==c;if("object"===q(c))for(p in n=!0,c)La(a,b,p,c[p],!0,k,e);else if(void 0!==d&&(n=!0,W(d)||(e=!0),y&&(e?(b.call(a,d),b=null):(y=b,b=function(a,b,c){return y.call(l(a),c)})),b))for(;p<g;p++)b(a[p],c,e?d:d.call(a[p],p,b(a[p],c)));return n?a:y?b.call(a):g?b(a[0],c):k},sb=/^-ms-/,zb=/-([a-z])/g,bb=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};I.uid=1;I.prototype={cache:function(a){var b=a[this.expando];
b||(b={},bb(a)&&(a.nodeType?a[this.expando]=b:Object.defineProperty(a,this.expando,{value:b,configurable:!0})));return b},set:function(a,b,c){var p;a=this.cache(a);if("string"===typeof b)a[G(b)]=c;else for(p in b)a[G(p)]=b[p];return a},get:function(a,b){return void 0===b?this.cache(a):a[this.expando]&&a[this.expando][G(b)]},access:function(a,b,c){if(void 0===b||b&&"string"===typeof b&&void 0===c)return this.get(a,b);this.set(a,b,c);return void 0!==c?c:b},remove:function(a,b){var c,p=a[this.expando];
if(void 0!==p){if(void 0!==b)for(Array.isArray(b)?b=b.map(G):(b=G(b),b=b in p?[b]:b.match(Ga)||[]),c=b.length;c--;)delete p[b[c]];if(void 0===b||l.isEmptyObject(p))a.nodeType?a[this.expando]=void 0:delete a[this.expando]}},hasData:function(a){a=a[this.expando];return void 0!==a&&!l.isEmptyObject(a)}};var S=new I,oa=new I,Oa=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rb=/[A-Z]/g;l.extend({hasData:function(a){return oa.hasData(a)||S.hasData(a)},data:function(a,b,c){return oa.access(a,b,c)},removeData:function(a,
b){oa.remove(a,b)},_data:function(a,b,c){return S.access(a,b,c)},_removeData:function(a,b){S.remove(a,b)}});l.fn.extend({data:function(a,b){var c,d=this[0],p=d&&d.attributes;if(void 0===a){if(this.length){var n=oa.get(d);if(1===d.nodeType&&!S.get(d,"hasDataAttrs")){for(c=p.length;c--;)if(p[c]){var k=p[c].name;0===k.indexOf("data-")&&(k=G(k.slice(5)),B(d,k,n[k]))}S.set(d,"hasDataAttrs",!0)}}return n}return"object"===typeof a?this.each(function(){oa.set(this,a)}):La(this,function(b){if(d&&void 0===
b){var c=oa.get(d,a);if(void 0!==c)return c;c=B(d,a);if(void 0!==c)return c}else this.each(function(){oa.set(this,a,b)})},null,b,1<arguments.length,null,!0)},removeData:function(a){return this.each(function(){oa.remove(this,a)})}});l.extend({queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var d=S.get(a,b);c&&(!d||Array.isArray(c)?d=S.access(a,b,l.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=l.queue(a,b),d=c.length,p=c.shift(),n=l._queueHooks(a,b),k=function(){l.dequeue(a,
b)};"inprogress"===p&&(p=c.shift(),d--);p&&("fx"===b&&c.unshift("inprogress"),delete n.stop,p.call(a,k,n));!d&&n&&n.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return S.get(a,c)||S.access(a,c,{empty:l.Callbacks("once memory").add(function(){S.remove(a,[b+"queue",c])})})}});l.fn.extend({queue:function(a,b){var c=2;"string"!==typeof a&&(b=a,a="fx",c--);return arguments.length<c?l.queue(this[0],a):void 0===b?this:this.each(function(){var c=l.queue(this,a,b);l._queueHooks(this,a);"fx"===
a&&"inprogress"!==c[0]&&l.dequeue(this,a)})},dequeue:function(a){return this.each(function(){l.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,p=l.Deferred(),n=this,k=this.length,e=function(){--d||p.resolveWith(n,[n])};"string"!==typeof a&&(b=a,a=void 0);for(a=a||"fx";k--;)(c=S.get(n[k],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(e));e();return p.promise(b)}});var Na=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cb=new RegExp("^(?:([+-])=|)("+
Na+")([a-z%]*)$","i"),Ua=["Top","Right","Bottom","Left"],Ca=X.documentElement,db=function(a){return l.contains(a.ownerDocument,a)},ib={composed:!0};Ca.getRootNode&&(db=function(a){return l.contains(a.ownerDocument,a)||a.getRootNode(ib)===a.ownerDocument});var Ra=function(a,b){a=b||a;return"none"===a.style.display||""===a.style.display&&db(a)&&"none"===l.css(a,"display")},Ab={};l.fn.extend({show:function(){return H(this,!0)},hide:function(){return H(this)},toggle:function(a){return"boolean"===typeof a?
a?this.show():this.hide():this.each(function(){Ra(this)?l(this).show():l(this).hide()})}});var lb=/^(?:checkbox|radio)$/i,Ka=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,k=/^$|^module$|\/(?:java|ecma)script/i;(function(){var a=X.createDocumentFragment().appendChild(X.createElement("div")),b=X.createElement("input");b.setAttribute("type","radio");b.setAttribute("checked","checked");b.setAttribute("name","t");a.appendChild(b);ba.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked;a.innerHTML="<textarea>x</textarea>";
ba.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue;a.innerHTML="<option></option>";ba.option=!!a.lastChild})();var ma={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ma.tbody=ma.tfoot=ma.colgroup=ma.caption=ma.thead;ma.th=ma.td;ba.option||(ma.optgroup=ma.option=[1,"<select multiple='multiple'>","</select>"]);var Z=/<|&#?\w+;/,Da=/^([^.]*)(?:\.(.+)|)/;
l.event={global:{},add:function(a,b,c,d,n){var p,k,e,g;var C=S.get(a);if(bb(a)){if(c.handler){var y=c;c=y.handler;n=y.selector}n&&l.find.matchesSelector(Ca,n);c.guid||(c.guid=l.guid++);(k=C.events)||(k=C.events=Object.create(null));(p=C.handle)||(p=C.handle=function(b){return"undefined"!==typeof l&&l.event.triggered!==b.type?l.event.dispatch.apply(a,arguments):void 0});b=(b||"").match(Ga)||[""];for(C=b.length;C--;){var f=Da.exec(b[C])||[];var m=e=f[1];var q=(f[2]||"").split(".").sort();m&&(f=l.event.special[m]||
{},m=(n?f.delegateType:f.bindType)||m,f=l.event.special[m]||{},e=l.extend({type:m,origType:e,data:d,handler:c,guid:c.guid,selector:n,needsContext:n&&l.expr.match.needsContext.test(n),namespace:q.join(".")},y),(g=k[m])||(g=k[m]=[],g.delegateCount=0,f.setup&&!1!==f.setup.call(a,d,q,p)||a.addEventListener&&a.addEventListener(m,p)),f.add&&(f.add.call(a,e),e.handler.guid||(e.handler.guid=c.guid)),n?g.splice(g.delegateCount++,0,e):g.push(e),l.event.global[m]=!0)}}},remove:function(a,b,c,d,n){var p,k,e,
g,C,y=S.hasData(a)&&S.get(a);if(y&&(e=y.events)){b=(b||"").match(Ga)||[""];for(g=b.length;g--;){var f=Da.exec(b[g])||[];var m=C=f[1];var q=(f[2]||"").split(".").sort();if(m){var r=l.event.special[m]||{};m=(d?r.delegateType:r.bindType)||m;var t=e[m]||[];f=f[2]&&new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)");for(k=p=t.length;p--;){var u=t[p];!n&&C!==u.origType||c&&c.guid!==u.guid||f&&!f.test(u.namespace)||d&&d!==u.selector&&("**"!==d||!u.selector)||(t.splice(p,1),u.selector&&t.delegateCount--,
r.remove&&r.remove.call(a,u))}k&&!t.length&&(r.teardown&&!1!==r.teardown.call(a,q,y.handle)||l.removeEvent(a,m,y.handle),delete e[m])}else for(m in e)l.event.remove(a,m+b[g],c,d,!0)}l.isEmptyObject(e)&&S.remove(a,"handle events")}},dispatch:function(a){var b,c,d,p=Array(arguments.length),n=l.event.fix(a);var k=(S.get(this,"events")||Object.create(null))[n.type]||[];var e=l.event.special[n.type]||{};p[0]=n;for(b=1;b<arguments.length;b++)p[b]=arguments[b];n.delegateTarget=this;if(!e.preDispatch||!1!==
e.preDispatch.call(this,n)){var g=l.event.handlers.call(this,n,k);for(b=0;(d=g[b++])&&!n.isPropagationStopped();)for(n.currentTarget=d.elem,k=0;(c=d.handlers[k++])&&!n.isImmediatePropagationStopped();)if(!n.rnamespace||!1===c.namespace||n.rnamespace.test(c.namespace))n.handleObj=c,n.data=c.data,c=((l.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,p),void 0!==c&&!1===(n.result=c)&&(n.preventDefault(),n.stopPropagation());e.postDispatch&&e.postDispatch.call(this,n);return n.result}},
handlers:function(a,b){var c,d=[],p=b.delegateCount,n=a.target;if(p&&n.nodeType&&!("click"===a.type&&1<=a.button))for(;n!==this;n=n.parentNode||this)if(1===n.nodeType&&("click"!==a.type||!0!==n.disabled)){var k=[];var e={};for(c=0;c<p;c++){var g=b[c];var C=g.selector+" ";void 0===e[C]&&(e[C]=g.needsContext?-1<l(C,this).index(n):l.find(C,this,null,[n]).length);e[C]&&k.push(g)}k.length&&d.push({elem:n,handlers:k})}p<b.length&&d.push({elem:this,handlers:b.slice(p)});return d},addProp:function(a,b){Object.defineProperty(l.Event.prototype,
a,{enumerable:!0,configurable:!0,get:W(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[a]},set:function(b){Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b})}})},fix:function(a){return a[l.expando]?a:new l.Event(a)},special:{load:{noBubble:!0},click:{setup:function(a){a=this||a;lb.test(a.type)&&a.click&&A(a,"input")&&V(a,"click",L);return!1},trigger:function(a){a=this||a;lb.test(a.type)&&a.click&&
A(a,"input")&&V(a,"click");return!0},_default:function(a){a=a.target;return lb.test(a.type)&&a.click&&A(a,"input")&&S.get(a,"click")||A(a,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}}};l.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c)};l.Event=function(a,b){if(!(this instanceof l.Event))return new l.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||
void 0===a.defaultPrevented&&!1===a.returnValue?L:U,this.target=a.target&&3===a.target.nodeType?a.target.parentNode:a.target,this.currentTarget=a.currentTarget,this.relatedTarget=a.relatedTarget):this.type=a;b&&l.extend(this,b);this.timeStamp=a&&a.timeStamp||Date.now();this[l.expando]=!0};l.Event.prototype={constructor:l.Event,isDefaultPrevented:U,isPropagationStopped:U,isImmediatePropagationStopped:U,isSimulated:!1,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=L;a&&!this.isSimulated&&
a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=L;a&&!this.isSimulated&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=L;a&&!this.isSimulated&&a.stopImmediatePropagation();this.stopPropagation()}};l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,
button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp);l.each({focus:"focusin",blur:"focusout"},function(a,b){l.event.special[a]={setup:function(){V(this,a,ka);return!1},trigger:function(){V(this,a);return!0},_default:function(){return!0},delegateType:b}});l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,
b){l.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=a.relatedTarget,d=a.handleObj;if(!c||c!==this&&!l.contains(this,c)){a.type=d.origType;var p=d.handler.apply(this,arguments);a.type=b}return p}}});l.fn.extend({on:function(a,b,c,d){return g(this,a,b,c,d)},one:function(a,b,c,d){return g(this,a,b,c,d,1)},off:function(a,b,c){if(a&&a.preventDefault&&a.handleObj){var d=a.handleObj;l(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler);return this}if("object"===
typeof a){for(d in a)this.off(d,b,a[d]);return this}if(!1===b||"function"===typeof b)c=b,b=void 0;!1===c&&(c=U);return this.each(function(){l.event.remove(this,a,c,b)})}});var Hb=/<script|<style|<link/i,Gb=/checked\s*(?:[^=]|=\s*.checked.)/i,gb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;l.extend({htmlPrefilter:function(a){return a},clone:function(a,b,c){var d,n=a.cloneNode(!0),p=db(a);if(!(ba.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||l.isXMLDoc(a))){var k=T(n);var e=T(a);var g=0;for(d=e.length;g<
d;g++){var C=e[g],f=k[g],y=f.nodeName.toLowerCase();if("input"===y&&lb.test(C.type))f.checked=C.checked;else if("input"===y||"textarea"===y)f.defaultValue=C.defaultValue}}if(b)if(c)for(e=e||T(a),k=k||T(n),g=0,d=e.length;g<d;g++)ha(e[g],k[g]);else ha(a,n);k=T(n,"script");0<k.length&&Y(k,!p&&T(a,"script"));return n},cleanData:function(a){for(var b,c,d,n=l.event.special,p=0;void 0!==(c=a[p]);p++)if(bb(c)){if(b=c[S.expando]){if(b.events)for(d in b.events)n[d]?l.event.remove(c,d):l.removeEvent(c,d,b.handle);
c[S.expando]=void 0}c[oa.expando]&&(c[oa.expando]=void 0)}}});l.fn.extend({detach:function(a){return x(this,a,!0)},remove:function(a){return x(this,a)},text:function(a){return La(this,function(a){return void 0===a?l.text(this):this.empty().each(function(){if(1===this.nodeType||11===this.nodeType||9===this.nodeType)this.textContent=a})},null,a,arguments.length)},append:function(){return ja(this,arguments,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ia(this,a).appendChild(a)})},
prepend:function(){return ja(this,arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ia(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return ja(this,arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(l.cleanData(T(a,!1)),a.textContent=
"");return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return l.clone(this,a,b)})},html:function(a){return La(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"===typeof a&&!Hb.test(a)&&!ma[(Ka.exec(a)||["",""])[1].toLowerCase()]){a=l.htmlPrefilter(a);try{for(;c<d;c++)b=this[c]||{},1===b.nodeType&&(l.cleanData(T(b,!1)),b.innerHTML=a);b=0}catch(bc){}}b&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(){var a=[];return ja(this,arguments,function(b){var c=this.parentNode;0>l.inArray(this,a)&&(l.cleanData(T(this)),c&&c.replaceChild(b,this))},a)}});l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){l.fn[a]=function(a){for(var c=[],d=l(a),n=d.length-1,p=0;p<=n;p++)a=p===n?this:this.clone(!0),l(d[p])[b](a),la.apply(c,a.get());return this.pushStack(c)}});var ub=new RegExp("^("+Na+")(?!px)[a-z%]+$","i"),
tb=function(b){var c=b.ownerDocument.defaultView;c&&c.opener||(c=a);return c.getComputedStyle(b)},eb=function(a,b,c){var d,n={};for(d in b)n[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=n[d];return c},Jb=new RegExp(Ua.join("|"),"i");(function(){function b(){if(f){C.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";f.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";
Ca.appendChild(C).appendChild(f);var b=a.getComputedStyle(f);c="1%"!==b.top;g=12===Math.round(parseFloat(b.marginLeft));f.style.right="60%";k=36===Math.round(parseFloat(b.right));d=36===Math.round(parseFloat(b.width));f.style.position="absolute";n=12===Math.round(parseFloat(f.offsetWidth/3));Ca.removeChild(C);f=null}}var c,d,n,k,e,g,C=X.createElement("div"),f=X.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",ba.clearCloneStyle="content-box"===
f.style.backgroundClip,l.extend(ba,{boxSizingReliable:function(){b();return d},pixelBoxStyles:function(){b();return k},pixelPosition:function(){b();return c},reliableMarginLeft:function(){b();return g},scrollboxSize:function(){b();return n},reliableTrDimensions:function(){if(null==e){var b=X.createElement("table");var c=X.createElement("tr");var d=X.createElement("div");b.style.cssText="position:absolute;left:-11111px;border-collapse:separate";c.style.cssText="border:1px solid";c.style.height="1px";
d.style.height="9px";d.style.display="block";Ca.appendChild(b).appendChild(c).appendChild(d);d=a.getComputedStyle(c);e=parseInt(d.height,10)+parseInt(d.borderTopWidth,10)+parseInt(d.borderBottomWidth,10)===c.offsetHeight;Ca.removeChild(b)}return e}}))})();var Ja=["Webkit","Moz","ms"],Pa=X.createElement("div").style,da={},Lb=/^(none|table(?!-c[ea]).+)/,Ob=/^--/,Mb={position:"absolute",visibility:"hidden",display:"block"},Pb={letterSpacing:"0",fontWeight:"400"};l.extend({cssHooks:{opacity:{get:function(a,
b){if(b)return a=z(a,"opacity"),""===a?"1":a}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var n,p=G(b),k=Ob.test(b),e=a.style;k||(b=fa(p));var g=l.cssHooks[b]||l.cssHooks[p];if(void 0!==
c){var C=typeof c;"string"===C&&(n=cb.exec(c))&&n[1]&&(c=v(a,b,n),C="number");null!=c&&c===c&&("number"!==C||k||(c+=n&&n[3]||(l.cssNumber[p]?"":"px")),ba.clearCloneStyle||""!==c||0!==b.indexOf("background")||(e[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(k?e.setProperty(b,c):e[b]=c))}else return g&&"get"in g&&void 0!==(n=g.get(a,!1,d))?n:e[b]}},css:function(a,b,c,d){var n;var p=G(b);Ob.test(b)||(b=fa(p));(p=l.cssHooks[b]||l.cssHooks[p])&&"get"in p&&(n=p.get(a,!0,c));void 0===n&&(n=z(a,
b,d));"normal"===n&&b in Pb&&(n=Pb[b]);return""===c||c?(a=parseFloat(n),!0===c||isFinite(a)?a||0:n):n}});l.each(["height","width"],function(a,b){l.cssHooks[b]={get:function(a,c,d){if(c)return!Lb.test(l.css(a,"display"))||a.getClientRects().length&&a.getBoundingClientRect().width?wa(a,b,d):eb(a,Mb,function(){return wa(a,b,d)})},set:function(a,c,d){var n,p=tb(a),k=!ba.scrollboxSize()&&"absolute"===p.position,e=(k||d)&&"border-box"===l.css(a,"boxSizing",!1,p);d=d?M(a,b,d,e,p):0;e&&k&&(d-=Math.ceil(a["offset"+
b[0].toUpperCase()+b.slice(1)]-parseFloat(p[b])-M(a,b,"border",!1,p)-.5));d&&(n=cb.exec(c))&&"px"!==(n[3]||"px")&&(a.style[b]=c,c=l.css(a,b));return Ia(a,c,d)}}});l.cssHooks.marginLeft=pa(ba.reliableMarginLeft,function(a,b){if(b)return(parseFloat(z(a,"marginLeft"))||a.getBoundingClientRect().left-eb(a,{marginLeft:0},function(){return a.getBoundingClientRect().left}))+"px"});l.each({margin:"",padding:"",border:"Width"},function(a,b){l.cssHooks[a+b]={expand:function(c){var d=0,n={};for(c="string"===
typeof c?c.split(" "):[c];4>d;d++)n[a+Ua[d]+b]=c[d]||c[d-2]||c[0];return n}};"margin"!==a&&(l.cssHooks[a+b].set=Ia)});l.fn.extend({css:function(a,b){return La(this,function(a,b,c){var d,n={},p=0;if(Array.isArray(b)){c=tb(a);for(d=b.length;p<d;p++)n[b[p]]=l.css(a,b[p],!1,c);return n}return void 0!==c?l.style(a,b,c):l.css(a,b)},a,b,1<arguments.length)}});l.Tween=ca;ca.prototype={constructor:ca,init:function(a,b,c,d,n,k){this.elem=a;this.prop=c;this.easing=n||l.easing._default;this.options=b;this.start=
this.now=this.cur();this.end=d;this.unit=k||(l.cssNumber[c]?"":"px")},cur:function(){var a=ca.propHooks[this.prop];return a&&a.get?a.get(this):ca.propHooks._default.get(this)},run:function(a){var b,c=ca.propHooks[this.prop];this.pos=this.options.duration?b=l.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):ca.propHooks._default.set(this);return this}};
ca.prototype.init.prototype=ca.prototype;ca.propHooks={_default:{get:function(a){return 1!==a.elem.nodeType||null!=a.elem[a.prop]&&null==a.elem.style[a.prop]?a.elem[a.prop]:(a=l.css(a.elem,a.prop,""))&&"auto"!==a?a:0},set:function(a){if(l.fx.step[a.prop])l.fx.step[a.prop](a);else 1!==a.elem.nodeType||!l.cssHooks[a.prop]&&null==a.elem.style[fa(a.prop)]?a.elem[a.prop]=a.now:l.style(a.elem,a.prop,a.now+a.unit)}}};ca.propHooks.scrollTop=ca.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&
(a.elem[a.prop]=a.now)}};l.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2},_default:"swing"};l.fx=ca.prototype.init;l.fx.step={};var Db,Cb,Qb=/^(?:toggle|show|hide)$/,Rb=/queueHooks$/;l.Animation=l.extend(qa,{tweeners:{"*":[function(a,b){var c=this.createTween(a,b);v(c.elem,a,cb.exec(b),c);return c}]},tweener:function(a,b){W(a)?(b=a,a=["*"]):a=a.match(Ga);for(var c,d=0,n=a.length;d<n;d++)c=a[d],qa.tweeners[c]=qa.tweeners[c]||[],qa.tweeners[c].unshift(b)},prefilters:[function(a,
b,c){var d;var n="width"in b||"height"in b;var k=this,p={},e=a.style,g=a.nodeType&&Ra(a),C=S.get(a,"fxshow");if(!c.queue){var f=l._queueHooks(a,"fx");if(null==f.unqueued){f.unqueued=0;var m=f.empty.fire;f.empty.fire=function(){f.unqueued||m()}}f.unqueued++;k.always(function(){k.always(function(){f.unqueued--;l.queue(a,"fx").length||f.empty.fire()})})}for(d in b){var q=b[d];if(Qb.test(q)){delete b[d];var y=y||"toggle"===q;if(q===(g?"hide":"show"))if("show"===q&&C&&void 0!==C[d])g=!0;else continue;
p[d]=C&&C[d]||l.style(a,d)}}if((b=!l.isEmptyObject(b))||!l.isEmptyObject(p)){if(n&&1===a.nodeType){c.overflow=[e.overflow,e.overflowX,e.overflowY];var r=C&&C.display;null==r&&(r=S.get(a,"display"));n=l.css(a,"display");"none"===n&&(r?n=r:(H([a],!0),r=a.style.display||r,n=l.css(a,"display"),H([a])));("inline"===n||"inline-block"===n&&null!=r)&&"none"===l.css(a,"float")&&(b||(k.done(function(){e.display=r}),null==r&&(n=e.display,r="none"===n?"":n)),e.display="inline-block")}c.overflow&&(e.overflow=
"hidden",k.always(function(){e.overflow=c.overflow[0];e.overflowX=c.overflow[1];e.overflowY=c.overflow[2]}));b=!1;for(d in p)b||(C?"hidden"in C&&(g=C.hidden):C=S.access(a,"fxshow",{display:r}),y&&(C.hidden=!g),g&&H([a],!0),k.done(function(){g||H([a]);S.remove(a,"fxshow");for(d in p)l.style(a,d,p[d])})),b=ta(g?C[d]:0,d,k),d in C||(C[d]=b.start,g&&(b.end=b.start,b.start=0))}}],prefilter:function(a,b){b?qa.prefilters.unshift(a):qa.prefilters.push(a)}});l.speed=function(a,b,c){var d=a&&"object"===typeof a?
l.extend({},a):{complete:c||!c&&b||W(a)&&a,duration:a,easing:c&&b||b&&!W(b)&&b};l.fx.off?d.duration=0:"number"!==typeof d.duration&&(d.duration=d.duration in l.fx.speeds?l.fx.speeds[d.duration]:l.fx.speeds._default);if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){W(d.old)&&d.old.call(this);d.queue&&l.dequeue(this,d.queue)};return d};l.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ra).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,
b,c,d){var n=l.isEmptyObject(a),k=l.speed(b,c,d);b=function(){var b=qa(this,l.extend({},a),k);(n||S.get(this,"finish"))&&b.stop(!0)};b.finish=b;return n||!1===k.queue?this.each(b):this.queue(k.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop;b(c)};"string"!==typeof a&&(c=b,b=a,a=void 0);b&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,n=null!=a&&a+"queueHooks",k=l.timers,p=S.get(this);if(n)p[n]&&p[n].stop&&d(p[n]);else for(n in p)p[n]&&p[n].stop&&Rb.test(n)&&
d(p[n]);for(n=k.length;n--;)k[n].elem!==this||null!=a&&k[n].queue!==a||(k[n].anim.stop(c),b=!1,k.splice(n,1));!b&&c||l.dequeue(this,a)})},finish:function(a){!1!==a&&(a=a||"fx");return this.each(function(){var b=S.get(this),c=b[a+"queue"];var d=b[a+"queueHooks"];var n=l.timers,k=c?c.length:0;b.finish=!0;l.queue(this,a,[]);d&&d.stop&&d.stop.call(this,!0);for(d=n.length;d--;)n[d].elem===this&&n[d].queue===a&&(n[d].anim.stop(!0),n.splice(d,1));for(d=0;d<k;d++)c[d]&&c[d].finish&&c[d].finish.call(this);
delete b.finish})}});l.each(["toggle","show","hide"],function(a,b){var c=l.fn[b];l.fn[b]=function(a,d,n){return null==a||"boolean"===typeof a?c.apply(this,arguments):this.animate(na(b,!0),a,d,n)}});l.each({slideDown:na("show"),slideUp:na("hide"),slideToggle:na("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){l.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});l.timers=[];l.fx.tick=function(){var a=0,b=l.timers;for(Db=Date.now();a<b.length;a++){var c=
b[a];c()||b[a]!==c||b.splice(a--,1)}b.length||l.fx.stop();Db=void 0};l.fx.timer=function(a){l.timers.push(a);l.fx.start()};l.fx.interval=13;l.fx.start=function(){Cb||(Cb=!0,nb())};l.fx.stop=function(){Cb=null};l.fx.speeds={slow:600,fast:200,_default:400};l.fn.delay=function(b,c){b=l.fx?l.fx.speeds[b]||b:b;return this.queue(c||"fx",function(c,d){var n=a.setTimeout(c,b);d.stop=function(){a.clearTimeout(n)}})};(function(){var a=X.createElement("input"),b=X.createElement("select").appendChild(X.createElement("option"));
a.type="checkbox";ba.checkOn=""!==a.value;ba.optSelected=b.selected;a=X.createElement("input");a.value="t";a.type="radio";ba.radioValue="t"===a.value})();var Ib=l.expr.attrHandle;l.fn.extend({attr:function(a,b){return La(this,l.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){l.removeAttr(this,a)})}});l.extend({attr:function(a,b,c){var d,n,k=a.nodeType;if(3!==k&&8!==k&&2!==k){if("undefined"===typeof a.getAttribute)return l.prop(a,b,c);1===k&&l.isXMLDoc(a)||(n=l.attrHooks[b.toLowerCase()]||
(l.expr.match.bool.test(b)?Vb:void 0));if(void 0!==c){if(null===c){l.removeAttr(a,b);return}if(n&&"set"in n&&void 0!==(d=n.set(a,c,b)))return d;a.setAttribute(b,c+"");return c}if(n&&"get"in n&&null!==(d=n.get(a,b)))return d;d=l.find.attr(a,b);return null==d?void 0:d}},attrHooks:{type:{set:function(a,b){if(!ba.radioValue&&"radio"===b&&A(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},removeAttr:function(a,b){var c=0,d=b&&b.match(Ga);if(d&&1===a.nodeType)for(;b=d[c++];)a.removeAttribute(b)}});
var Vb={set:function(a,b,c){!1===b?l.removeAttr(a,c):a.setAttribute(c,c);return c}};l.each(l.expr.match.bool.source.match(/\w+/g),function(a,b){var c=Ib[b]||l.find.attr;Ib[b]=function(a,b,d){var n=b.toLowerCase();if(!d){var k=Ib[n];Ib[n]=e;var e=null!=c(a,b,d)?n:null;Ib[n]=k}return e}});var Wb=/^(?:input|select|textarea|button)$/i,Xb=/^(?:a|area)$/i;l.fn.extend({prop:function(a,b){return La(this,l.prop,a,b,1<arguments.length)},removeProp:function(a){return this.each(function(){delete this[l.propFix[a]||
a]})}});l.extend({prop:function(a,b,c){var d,n=a.nodeType;if(3!==n&&8!==n&&2!==n){if(1!==n||!l.isXMLDoc(a)){b=l.propFix[b]||b;var k=l.propHooks[b]}return void 0!==c?k&&"set"in k&&void 0!==(d=k.set(a,c,b))?d:a[b]=c:k&&"get"in k&&null!==(d=k.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=l.find.attr(a,"tabindex");return b?parseInt(b,10):Wb.test(a.nodeName)||Xb.test(a.nodeName)&&a.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});ba.optSelected||(l.propHooks.selected={get:function(a){(a=
a.parentNode)&&a.parentNode&&a.parentNode.selectedIndex;return null},set:function(a){if(a=a.parentNode)a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex}});l.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){l.propFix[this.toLowerCase()]=this});l.fn.extend({addClass:function(a){var b,c,d,n,k=0;if(W(a))return this.each(function(b){l(this).addClass(a.call(this,b,E(this)))});var e=ua(a);if(e.length)for(;b=this[k++];){var p=
E(b);if(c=1===b.nodeType&&" "+za(p)+" "){for(n=0;d=e[n++];)0>c.indexOf(" "+d+" ")&&(c+=d+" ");c=za(c);p!==c&&b.setAttribute("class",c)}}return this},removeClass:function(a){var b,c,d,n,k=0;if(W(a))return this.each(function(b){l(this).removeClass(a.call(this,b,E(this)))});if(!arguments.length)return this.attr("class","");var e=ua(a);if(e.length)for(;b=this[k++];){var p=E(b);if(c=1===b.nodeType&&" "+za(p)+" "){for(n=0;d=e[n++];)for(;-1<c.indexOf(" "+d+" ");)c=c.replace(" "+d+" "," ");c=za(c);p!==c&&
b.setAttribute("class",c)}}return this},toggleClass:function(a,b){var c=typeof a,d="string"===c||Array.isArray(a);return"boolean"===typeof b&&d?b?this.addClass(a):this.removeClass(a):W(a)?this.each(function(c){l(this).toggleClass(a.call(this,c,E(this),b),b)}):this.each(function(){var b,n;if(d){var k=0;var e=l(this);for(n=ua(a);b=n[k++];)e.hasClass(b)?e.removeClass(b):e.addClass(b)}else if(void 0===a||"boolean"===c)(b=E(this))&&S.set(this,"__className__",b),this.setAttribute&&this.setAttribute("class",
b||!1===a?"":S.get(this,"__className__")||"")})},hasClass:function(a){var b,c=0;for(a=" "+a+" ";b=this[c++];)if(1===b.nodeType&&-1<(" "+za(E(b))+" ").indexOf(a))return!0;return!1}});var Yb=/\r/g;l.fn.extend({val:function(a){var b,c,d=this[0];if(arguments.length){var n=W(a);return this.each(function(c){1===this.nodeType&&(c=n?a.call(this,c,l(this).val()):a,null==c?c="":"number"===typeof c?c+="":Array.isArray(c)&&(c=l.map(c,function(a){return null==a?"":a+""})),b=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],
b&&"set"in b&&void 0!==b.set(this,c,"value")||(this.value=c))})}if(d){if((b=l.valHooks[d.type]||l.valHooks[d.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(d,"value")))return c;c=d.value;return"string"===typeof c?c.replace(Yb,""):null==c?"":c}}});l.extend({valHooks:{option:{get:function(a){var b=l.find.attr(a,"value");return null!=b?b:za(l.text(a))}},select:{get:function(a){var b=a.options,c=a.selectedIndex,d="select-one"===a.type,n=d?null:[],k=d?c+1:b.length;for(a=0>c?k:d?c:0;a<k;a++){var e=
b[a];if(!(!e.selected&&a!==c||e.disabled||e.parentNode.disabled&&A(e.parentNode,"optgroup"))){e=l(e).val();if(d)return e;n.push(e)}}return n},set:function(a,b){for(var c,d=a.options,n=l.makeArray(b),k=d.length;k--;)if(b=d[k],b.selected=-1<l.inArray(l.valHooks.option.get(b),n))c=!0;c||(a.selectedIndex=-1);return n}}}});l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(a,b){if(Array.isArray(b))return a.checked=-1<l.inArray(l(a).val(),b)}};ba.checkOn||(l.valHooks[this].get=function(a){return null===
a.getAttribute("value")?"on":a.value})});ba.focusin="onfocusin"in a;var Eb=/^(?:focusinfocus|focusoutblur)$/,jb=function(a){a.stopPropagation()};l.extend(l.event,{trigger:function(b,c,d,n){var k,e,g,p=[d||X],C=Za.call(b,"type")?b.type:b;var f=Za.call(b,"namespace")?b.namespace.split("."):[];var m=g=k=d=d||X;if(3!==d.nodeType&&8!==d.nodeType&&!Eb.test(C+l.event.triggered)){-1<C.indexOf(".")&&(f=C.split("."),C=f.shift(),f.sort());var q=0>C.indexOf(":")&&"on"+C;b=b[l.expando]?b:new l.Event(C,"object"===
typeof b&&b);b.isTrigger=n?2:3;b.namespace=f.join(".");b.rnamespace=b.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b.result=void 0;b.target||(b.target=d);c=null==c?[b]:l.makeArray(c,[b]);f=l.event.special[C]||{};if(n||!f.trigger||!1!==f.trigger.apply(d,c)){if(!n&&!f.noBubble&&!Fa(d)){var r=f.delegateType||C;Eb.test(r+C)||(m=m.parentNode);for(;m;m=m.parentNode)p.push(m),k=m;k===(d.ownerDocument||X)&&p.push(k.defaultView||k.parentWindow||a)}for(k=0;(m=p[k++])&&!b.isPropagationStopped();)g=
m,b.type=1<k?r:f.bindType||C,(e=(S.get(m,"events")||Object.create(null))[b.type]&&S.get(m,"handle"))&&e.apply(m,c),(e=q&&m[q])&&e.apply&&bb(m)&&(b.result=e.apply(m,c),!1===b.result&&b.preventDefault());b.type=C;n||b.isDefaultPrevented()||f._default&&!1!==f._default.apply(p.pop(),c)||!bb(d)||!q||!W(d[C])||Fa(d)||((k=d[q])&&(d[q]=null),l.event.triggered=C,b.isPropagationStopped()&&g.addEventListener(C,jb),d[C](),b.isPropagationStopped()&&g.removeEventListener(C,jb),l.event.triggered=void 0,k&&(d[q]=
k));return b.result}}},simulate:function(a,b,c){a=l.extend(new l.Event,c,{type:a,isSimulated:!0});l.event.trigger(a,null,b)}});l.fn.extend({trigger:function(a,b){return this.each(function(){l.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return l.event.trigger(a,b,c,!0)}});ba.focusin||l.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){l.event.simulate(b,a.target,l.event.fix(a))};l.event.special[b]={setup:function(){var d=this.ownerDocument||this.document||
this,n=S.access(d,b);n||d.addEventListener(a,c,!0);S.access(d,b,(n||0)+1)},teardown:function(){var d=this.ownerDocument||this.document||this,n=S.access(d,b)-1;n?S.access(d,b,n):(d.removeEventListener(a,c,!0),S.remove(d,b))}}});var mb=a.location,n=Date.now(),C=/\?/;l.parseXML=function(b){if(!b||"string"!==typeof b)return null;try{var c=(new a.DOMParser).parseFromString(b,"text/xml")}catch(ya){}var d=c&&c.getElementsByTagName("parsererror")[0];c&&!d||l.error("Invalid XML: "+(d?l.map(d.childNodes,function(a){return a.textContent}).join("\n"):
b));return c};var hb=/\[\]$/,Kb=/\r?\n/g,Bb=/^(?:submit|button|image|reset|file)$/i,Zb=/^(?:input|select|textarea|keygen)/i;l.param=function(a,b){var c,d=[],n=function(a,b){b=W(b)?b():b;d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==b?"":b)};if(null==a)return"";if(Array.isArray(a)||a.jquery&&!l.isPlainObject(a))l.each(a,function(){n(this.name,this.value)});else for(c in a)va(c,a[c],b,n);return d.join("&")};l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=
l.prop(this,"elements");return a?l.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!l(this).is(":disabled")&&Zb.test(this.nodeName)&&!Bb.test(a)&&(this.checked||!lb.test(a))}).map(function(a,b){a=l(this).val();return null==a?null:Array.isArray(a)?l.map(a,function(a){return{name:b.name,value:a.replace(Kb,"\r\n")}}):{name:b.name,value:a.replace(Kb,"\r\n")}}).get()}});var Sb=/%20/g,sa=/#.*$/,jc=/([?&])_=[^&]*/,kc=/^(.*?):[ \t]*([^\r\n]*)$/mg,lc=/^(?:GET|HEAD)$/,mc=/^\/\//,dc=
{},Tb={},ec="*/".concat("*"),$b=X.createElement("a");$b.href=mb.href;l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mb.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(mb.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ec,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},
responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?vb(vb(a,l.ajaxSettings),b):vb(l.ajaxSettings,a)},ajaxPrefilter:Va(dc),ajaxTransport:Va(Tb),ajax:function(b,c){function d(b,c,d,n){var g,C=c;if(!B){B=!0;p&&a.clearTimeout(p);k=void 0;e=n||"";v.readyState=0<b?4:0;n=200<=b&&300>b||304===b;d&&(g=ea(q,v,d));!n&&-1<l.inArray("script",
q.dataTypes)&&0>l.inArray("json",q.dataTypes)&&(q.converters["text script"]=function(){});g=Ma(q,g,v,n);if(n)if(q.ifModified&&((d=v.getResponseHeader("Last-Modified"))&&(l.lastModified[Z]=d),(d=v.getResponseHeader("etag"))&&(l.etag[Z]=d)),204===b||"HEAD"===q.type)C="nocontent";else if(304===b)C="notmodified";else{C=g.state;var m=g.data;var ma=g.error;n=!ma}else if(ma=C,b||!C)C="error",0>b&&(b=0);v.status=b;v.statusText=(c||C)+"";n?u.resolveWith(r,[m,C,v]):u.rejectWith(r,[v,C,ma]);v.statusCode(w);
w=void 0;f&&t.trigger(n?"ajaxSuccess":"ajaxError",[v,q,n?m:ma]);hb.fireWith(r,[v,C]);f&&(t.trigger("ajaxComplete",[v,q]),--l.active||l.event.trigger("ajaxStop"))}}"object"===typeof b&&(c=b,b=void 0);c=c||{};var k,e,g,p,f,m,q=l.ajaxSetup({},c),r=q.context||q,t=q.context&&(r.nodeType||r.jquery)?l(r):l.event,u=l.Deferred(),hb=l.Callbacks("once memory"),w=q.statusCode||{},ma={},h={},A="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(B){if(!g)for(g={};b=kc.exec(e);)g[b[1].toLowerCase()+
" "]=(g[b[1].toLowerCase()+" "]||[]).concat(b[2]);b=g[a.toLowerCase()+" "]}return null==b?null:b.join(", ")},getAllResponseHeaders:function(){return B?e:null},setRequestHeader:function(a,b){null==B&&(a=h[a.toLowerCase()]=h[a.toLowerCase()]||a,ma[a]=b);return this},overrideMimeType:function(a){null==B&&(q.mimeType=a);return this},statusCode:function(a){var b;if(a)if(B)v.always(a[v.status]);else for(b in a)w[b]=[w[b],a[b]];return this},abort:function(a){a=a||A;k&&k.abort(a);d(0,a);return this}};u.promise(v);
q.url=((b||q.url||mb.href)+"").replace(mc,mb.protocol+"//");q.type=c.method||c.type||q.method||q.type;q.dataTypes=(q.dataType||"*").toLowerCase().match(Ga)||[""];if(null==q.crossDomain){b=X.createElement("a");try{b.href=q.url,b.href=b.href,q.crossDomain=$b.protocol+"//"+$b.host!==b.protocol+"//"+b.host}catch(Ub){q.crossDomain=!0}}q.data&&q.processData&&"string"!==typeof q.data&&(q.data=l.param(q.data,q.traditional));Wa(dc,q,c,v);if(B)return v;(f=l.event&&q.global)&&0===l.active++&&l.event.trigger("ajaxStart");
q.type=q.type.toUpperCase();q.hasContent=!lc.test(q.type);var Z=q.url.replace(sa,"");q.hasContent?q.data&&q.processData&&0===(q.contentType||"").indexOf("application/x-www-form-urlencoded")&&(q.data=q.data.replace(Sb,"+")):(b=q.url.slice(Z.length),q.data&&(q.processData||"string"===typeof q.data)&&(Z+=(C.test(Z)?"&":"?")+q.data,delete q.data),!1===q.cache&&(Z=Z.replace(jc,"$1"),b=(C.test(Z)?"&":"?")+"_="+n++ +b),q.url=Z+b);q.ifModified&&(l.lastModified[Z]&&v.setRequestHeader("If-Modified-Since",l.lastModified[Z]),
l.etag[Z]&&v.setRequestHeader("If-None-Match",l.etag[Z]));(q.data&&q.hasContent&&!1!==q.contentType||c.contentType)&&v.setRequestHeader("Content-Type",q.contentType);v.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+ec+"; q=0.01":""):q.accepts["*"]);for(m in q.headers)v.setRequestHeader(m,q.headers[m]);if(q.beforeSend&&(!1===q.beforeSend.call(r,v,q)||B))return v.abort();A="abort";hb.add(q.complete);v.done(q.success);v.fail(q.error);
if(k=Wa(Tb,q,c,v)){v.readyState=1;f&&t.trigger("ajaxSend",[v,q]);if(B)return v;q.async&&0<q.timeout&&(p=a.setTimeout(function(){v.abort("timeout")},q.timeout));try{var B=!1;k.send(ma,d)}catch(Ub){if(B)throw Ub;d(-1,Ub)}}else d(-1,"No Transport");return v},getJSON:function(a,b,c){return l.get(a,b,c,"json")},getScript:function(a,b){return l.get(a,void 0,b,"script")}});l.each(["get","post"],function(a,b){l[b]=function(a,c,d,n){W(c)&&(n=n||d,d=c,c=void 0);return l.ajax(l.extend({url:a,type:b,dataType:n,
data:c,success:d},l.isPlainObject(a)&&a))}});l.ajaxPrefilter(function(a){for(var b in a.headers)"content-type"===b.toLowerCase()&&(a.contentType=a.headers[b]||"")});l._evalUrl=function(a,b,c){return l.ajax({url:a,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(a){l.globalEval(a,b,c)}})};l.fn.extend({wrapAll:function(a){this[0]&&(W(a)&&(a=a.call(this[0])),a=l(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),
a.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this));return this},wrapInner:function(a){return W(a)?this.each(function(b){l(this).wrapInner(a.call(this,b))}):this.each(function(){var b=l(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=W(a);return this.each(function(c){l(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(a){this.parent(a).not("body").each(function(){l(this).replaceWith(this.childNodes)});return this}});
l.expr.pseudos.hidden=function(a){return!l.expr.pseudos.visible(a)};l.expr.pseudos.visible=function(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)};l.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(p){}};var nc={0:200,1223:204},Nb=l.ajaxSettings.xhr();ba.cors=!!Nb&&"withCredentials"in Nb;ba.ajax=Nb=!!Nb;l.ajaxTransport(function(b){var c,d;if(ba.cors||Nb&&!b.crossDomain)return{send:function(n,k){var e,g=b.xhr();g.open(b.type,b.url,b.async,b.username,b.password);
if(b.xhrFields)for(e in b.xhrFields)g[e]=b.xhrFields[e];b.mimeType&&g.overrideMimeType&&g.overrideMimeType(b.mimeType);b.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(e in n)g.setRequestHeader(e,n[e]);c=function(a){return function(){c&&(c=d=g.onload=g.onerror=g.onabort=g.ontimeout=g.onreadystatechange=null,"abort"===a?g.abort():"error"===a?"number"!==typeof g.status?k(0,"error"):k(g.status,g.statusText):k(nc[g.status]||g.status,g.statusText,"text"!==(g.responseType||
"text")||"string"!==typeof g.responseText?{binary:g.response}:{text:g.responseText},g.getAllResponseHeaders()))}};g.onload=c();d=g.onerror=g.ontimeout=c("error");void 0!==g.onabort?g.onabort=d:g.onreadystatechange=function(){4===g.readyState&&a.setTimeout(function(){c&&d()})};c=c("abort");try{g.send(b.hasContent&&b.data||null)}catch(gc){if(c)throw gc;}},abort:function(){c&&c()}}});l.ajaxPrefilter(function(a){a.crossDomain&&(a.contents.script=!1)});l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(a){l.globalEval(a);return a}}});l.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1);a.crossDomain&&(a.type="GET")});l.ajaxTransport("script",function(a){if(a.crossDomain||a.scriptAttrs){var b,c;return{send:function(d,n){b=l("<script>").attr(a.scriptAttrs||{}).prop({charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&n("error"===a.type?404:200,a.type)});X.head.appendChild(b[0])},
abort:function(){c&&c()}}}});var fc=[],ac=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=fc.pop()||l.expando+"_"+n++;this[a]=!0;return a}});l.ajaxPrefilter("json jsonp",function(b,c,d){var n,k=!1!==b.jsonp&&(ac.test(b.url)?"url":"string"===typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ac.test(b.data)&&"data");if(k||"jsonp"===b.dataTypes[0]){var e=b.jsonpCallback=W(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback;k?b[k]=b[k].replace(ac,
"$1"+e):!1!==b.jsonp&&(b.url+=(C.test(b.url)?"&":"?")+b.jsonp+"="+e);b.converters["script json"]=function(){n||l.error(e+" was not called");return n[0]};b.dataTypes[0]="json";var g=a[e];a[e]=function(){n=arguments};d.always(function(){void 0===g?l(a).removeProp(e):a[e]=g;b[e]&&(b.jsonpCallback=c.jsonpCallback,fc.push(e));n&&W(g)&&g(n[0]);n=g=void 0});return"script"}});ba.createHTMLDocument=function(){var a=X.implementation.createHTMLDocument("").body;a.innerHTML="<form></form><form></form>";return 2===
a.childNodes.length}();l.parseHTML=function(a,b,c){if("string"!==typeof a)return[];"boolean"===typeof b&&(c=b,b=!1);if(!b)if(ba.createHTMLDocument){b=X.implementation.createHTMLDocument("");var d=b.createElement("base");d.href=X.location.href;b.head.appendChild(d)}else b=X;d=pb.exec(a);c=!c&&[];if(d)return[b.createElement(d[1])];d=P([a],b,c);c&&c.length&&l(c).remove();return l.merge([],d.childNodes)};l.fn.load=function(a,b,c){var d,n,k=this,e=a.indexOf(" ");if(-1<e){var g=za(a.slice(e));a=a.slice(0,
e)}W(b)?(c=b,b=void 0):b&&"object"===typeof b&&(d="POST");0<k.length&&l.ajax({url:a,type:d||"GET",dataType:"html",data:b}).done(function(a){n=arguments;k.html(g?l("<div>").append(l.parseHTML(a)).find(g):a)}).always(c&&function(a,b){k.each(function(){c.apply(this,n||[a.responseText,b,a])})});return this};l.expr.pseudos.animated=function(a){return l.grep(l.timers,function(b){return a===b.elem}).length};l.offset={setOffset:function(a,b,c){var d=l.css(a,"position"),n=l(a),k={};"static"===d&&(a.style.position=
"relative");var e=n.offset();var g=l.css(a,"top");var C=l.css(a,"left");("absolute"===d||"fixed"===d)&&-1<(g+C).indexOf("auto")?(C=n.position(),g=C.top,C=C.left):(g=parseFloat(g)||0,C=parseFloat(C)||0);W(b)&&(b=b.call(a,c,l.extend({},e)));null!=b.top&&(k.top=b.top-e.top+g);null!=b.left&&(k.left=b.left-e.left+C);"using"in b?b.using.call(a,k):n.css(k)}};l.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){l.offset.setOffset(this,a,b)});var b;if(b=this[0]){if(!b.getClientRects().length)return{top:0,
left:0};var c=b.getBoundingClientRect();b=b.ownerDocument.defaultView;return{top:c.top+b.pageYOffset,left:c.left+b.pageXOffset}}},position:function(){if(this[0]){var a,b=this[0],c={top:0,left:0};if("fixed"===l.css(b,"position"))var d=b.getBoundingClientRect();else{d=this.offset();var n=b.ownerDocument;for(a=b.offsetParent||n.documentElement;a&&(a===n.body||a===n.documentElement)&&"static"===l.css(a,"position");)a=a.parentNode;a&&a!==b&&1===a.nodeType&&(c=l(a).offset(),c.top+=l.css(a,"borderTopWidth",
!0),c.left+=l.css(a,"borderLeftWidth",!0))}return{top:d.top-c.top-l.css(b,"marginTop",!0),left:d.left-c.left-l.css(b,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent;a&&"static"===l.css(a,"position");)a=a.offsetParent;return a||Ca})}});l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c="pageYOffset"===b;l.fn[a]=function(d){return La(this,function(a,d,n){if(Fa(a))var k=a;else 9===a.nodeType&&(k=a.defaultView);if(void 0===
n)return k?k[b]:a[d];k?k.scrollTo(c?k.pageXOffset:n,c?n:k.pageYOffset):a[d]=n},a,d,arguments.length)}});l.each(["top","left"],function(a,b){l.cssHooks[b]=pa(ba.pixelPosition,function(a,c){if(c)return c=z(a,b),ub.test(c)?l(a).position()[b]+"px":c})});l.each({Height:"height",Width:"width"},function(a,b){l.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){l.fn[d]=function(n,k){var e=arguments.length&&(c||"boolean"!==typeof n),g=c||(!0===n||!0===k?"margin":"border");return La(this,function(b,
c,n){return Fa(b)?0===d.indexOf("outer")?b["inner"+a]:b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===n?l.css(b,c,g):l.style(b,c,n,g)},b,e?n:void 0,e)}})});l.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){l.fn[b]=function(a){return this.on(b,a)}});l.fn.extend({bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,
b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(a,b){l.fn[b]=function(a,c){return 0<arguments.length?
this.on(b,null,a,c):this.trigger(b)}});var oc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;l.proxy=function(a,b){if("string"===typeof b){var c=a[b];b=a;a=c}if(W(a)){var d=Xa.call(arguments,2);c=function(){return a.apply(b||this,d.concat(Xa.call(arguments)))};c.guid=a.guid=a.guid||l.guid++;return c}};l.holdReady=function(a){a?l.readyWait++:l.ready(!0)};l.isArray=Array.isArray;l.parseJSON=JSON.parse;l.nodeName=A;l.isFunction=W;l.isWindow=Fa;l.camelCase=G;l.type=q;l.now=Date.now;l.isNumeric=function(a){var b=
l.type(a);return("number"===b||"string"===b)&&!isNaN(a-parseFloat(a))};l.trim=function(a){return null==a?"":(a+"").replace(oc,"")};!(f=[],d=function(){return l}.apply(h,f),void 0!==d&&(c.exports=d));var pc=a.jQuery,qc=a.$;l.noConflict=function(b){a.$===l&&(a.$=qc);b&&a.jQuery===l&&(a.jQuery=pc);return l};"undefined"===typeof w&&(a.jQuery=a.$=l);return l})},"8++/":function(c,h){c.exports=function(a){return a!==a}},"86tT":function(c,h,a){var f=a("gHOb"),d=a("UnEC");c.exports=function(a){return d(a)&&
"[object Map]"==f(a)}},"8AZL":function(c,h){c.exports=function(a,c,d){switch(d.length){case 0:return a.call(c);case 1:return a.call(c,d[0]);case 2:return a.call(c,d[0],d[1]);case 3:return a.call(c,d[0],d[1],d[2])}return a.apply(c,d)}},"8gK5":function(c,h){c.exports=function(a){var c=[];if(null!=a)for(var d in Object(a))c.push(d);return c}},"8tbe":function(c,h,a){a.d(h,"c",function(){return b});a.d(h,"a",function(){return w});a.d(h,"b",function(){return D});c=a("Z60a");var f=a.n(c);c=a("C9uT");var d=
a.n(c),b=function(){function a(b){f()(this,a);this.action=a.evtName();this.user=b?b:null}d()(a,null,[{key:"evtName",value:function(){return"start"}}]);return a}(),w=function(){function a(b){f()(this,a);this.action=a.evtName();this.reason=b&&0<=a.reasons().indexOf(b)?b:null}d()(a,null,[{key:"evtName",value:function(){return"destroy"}},{key:"reasons",value:function(){return["logout","destroy"]}}]);return a}(),D=function(){function a(b){f()(this,a);this.action=a.evtName();this.offlineStatus=b?!!b:!1}
d()(a,null,[{key:"evtName",value:function(){return"offlineStatusChange"}},{key:"of",value:function(b){return b?new a(b.offlineStatus):null}}]);return a}()},"95Qu":function(c,h){(function(){var a={rotl:function(a,c){return a<<c|a>>>32-c},rotr:function(a,c){return a<<32-c|a>>>c},endian:function(c){if(c.constructor==Number)return a.rotl(c,8)&16711935|a.rotl(c,24)&4278255360;for(var d=0;d<c.length;d++)c[d]=a.endian(c[d]);return c},randomBytes:function(a){for(var c=[];0<a;a--)c.push(Math.floor(256*Math.random()));
return c},bytesToWords:function(a){for(var c=[],b=0,f=0;b<a.length;b++,f+=8)c[f>>>5]|=a[b]<<24-f%32;return c},wordsToBytes:function(a){for(var c=[],b=0;b<32*a.length;b+=8)c.push(a[b>>>5]>>>24-b%32&255);return c},bytesToHex:function(a){for(var c=[],b=0;b<a.length;b++)c.push((a[b]>>>4).toString(16)),c.push((a[b]&15).toString(16));return c.join("")},hexToBytes:function(a){for(var c=[],b=0;b<a.length;b+=2)c.push(parseInt(a.substr(b,2),16));return c},bytesToBase64:function(a){for(var c=[],b=0;b<a.length;b+=
3)for(var f=a[b]<<16|a[b+1]<<8|a[b+2],h=0;4>h;h++)8*b+6*h<=8*a.length?c.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>>6*(3-h)&63)):c.push("=");return c.join("")},base64ToBytes:function(a){a=a.replace(/[^A-Z0-9+\/]/ig,"");for(var c=[],b=0,f=0;b<a.length;f=++b%4)0!=f&&c.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(b-1))&Math.pow(2,-2*f+8)-1)<<2*f|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(b))>>>
6-2*f);return c}};c.exports=a})()},"9LPS":function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});a.d(h,"TP_HEADER_NAME",function(){return f});a.d(h,"CSRF_HEADER_NAME",function(){return d});a.d(h,"CSRF_COOKIE_NAME",function(){return b});a.d(h,"TPC_BLOCKED_HEADER",function(){return w});a.d(h,"DEFAULT_USER_IMAGE",function(){return D});a.d(h,"WIDGET_NAMES",function(){return q});a.d(h,"WIDGET_STATUS",function(){return m});var f="X-RMRQ-SESSION",d="X-CSRF-TOKEN",b="XSRF-TOKEN",w="X-TPC-BLOCKED",
D="images/Remarq-Logo-ForTopBar.png",q=Object.freeze(new function u(){var a=this;this.REMARQ="GroveSide";this.TOP_WIDGET="TopWidget";this.CORNER_WIDGET="CornerWidget";this.POLL_WIDGET="PollWidget";this.SURVEY_WIDGET="SurveyWidget";this.STICKY_WIDGET="Sticky";this.PDF_FRAME="pdfFrame";this.CROSS_TABS_MESSAGE_BROKER="CrossTabsMessageBroker";this.DASHBOARD="grove-body";this.PUBLIC_PROFILE="PublicProfile";u.prototype.fromFrameId=function(b){switch(b){case "GroveSide":return a.REMARQ;case "SurveyWidget":return a.SURVEY_WIDGET;
case "Sticky":return a.STICKY_WIDGET;case "PollWidget":return a.POLL_WIDGET;case "CornerWidget":return a.CORNER_WIDGET;case "TopWidget":return a.TOP_WIDGET;case "pdfFrame":return a.PDF_FRAME;default:return null}}}),m=Object.freeze(new function(){this.INITIALIZED="INITIALIZED";this.LOADING="LOADING";this.UNINSTALLED="UNINSTALLED"})},AgIj:function(c,h,a){var f=a("cdq7"),d=a("JyYQ"),b=a("5Zxu"),w=Math.max,D=Math.min;c.exports=function(a,c,h){var q=null==a?0:a.length;if(!q)return-1;var e=q-1;void 0!==
h&&(e=b(h),e=0>h?w(q+e,0):D(e,q-1));return f(a,d(c,3),e,!0)}},BnCw:function(c,h,a){function f(){"undefined"!==typeof Reflect&&Reflect.get?(c.exports=f=Reflect.get,c.exports.__esModule=!0):(c.exports=f=function(a,c,f){var b=d(a,c);if(b)return b=Object.getOwnPropertyDescriptor(b,c),b.get?b.get.call(3>arguments.length?a:f):b.value},c.exports.__esModule=!0);c.exports["default"]=c.exports;return f.apply(this,arguments)}var d=a("/1gr");c.exports=f;c.exports.__esModule=!0;c.exports["default"]=c.exports},
C8kI:function(c,h,a){function f(a){return a.toLowerCase()}Object.defineProperty(h,"__esModule",{value:!0});h.isFollowing=function(a,b){return a&&b&&b.followingArticles&&(-1!=b.followingArticles.indexOf(a)||-1!=b.followingArticles.indexOf(a.toLowerCase()))?!0:!1};h.doiMatches=function(a,b){a=a.toLowerCase();b=b.toLowerCase();return-1<a.indexOf(b)||-1<b.indexOf(a)};h.normalize=f;h.realDoi=function(a){if(null!=a){var b=a.indexOf(";jsessionid=");-1<b&&(a=a.substring(0,b))}null==a?a=null:a.startsWith("10.")||
(a.startsWith("full")||a.startsWith("abs")||a.startsWith("denial")||a.startsWith("doi/")||a.startsWith("citedby/")?(b=a.indexOf("/"),a=a.substring(b+1)):a=(a=/^[^10.]*(10\.[0-9]{4}.*)/i,"function"===typeof a.matches)&&a.matches()&&"function"===typeof a.group?a.group(1):null);return a&&f(a)};h.doiDescriptor=function(a,b,c){return a+"/"+(b||c)}},C9uT:function(c,h){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,
d.key,d)}}c.exports=function(c,d,b){d&&a(c.prototype,d);b&&a(c,b);Object.defineProperty(c,"prototype",{writable:!1});return c};c.exports.__esModule=!0;c.exports["default"]=c.exports},CAlj:function(c,h,a){a.d(h,"a",function(){return A});c=a("Oy1H");var f=a.n(c);c=a("Z60a");var d=a.n(c);c=a("C9uT");var b=a.n(c),w=a("4EtY"),D=a("Tkzw"),q=a("mBFJ"),m=a("+Fex"),A=function(){function a(b){d()(this,a);var c=this;c.filters=null;c.holder=null;c.grovePrefix=b;c.filters=null;c.activePollsIds=null;(function(){var a=
{};Object.defineProperty(c,"surveyWidget",{get:function(){a.surveyWidget||(a.surveyWidget=document.getElementById("SurveyWidget"));return a.surveyWidget},set:function(b){a.surveyWidget=b},configurable:!1,enumerable:!0});Object.defineProperty(c,"pollWidget",{get:function(){a.pollWidget||(a.pollWidget=document.getElementById("PollWidget"));return a.pollWidget},set:function(b){a.pollWidget=b},configurable:!1,enumerable:!0});Object.defineProperty(c,"sideWidget",{get:function(){a.sideWidget||(a.sideWidget=
document.getElementById("GroveSide"));return a.sideWidget},set:function(b){a.sideWidget=b},configurable:!1,enumerable:!0})})();(function(){c.holder={};Object.keys(m.a.TYPE).forEach(function(a){c.holder[a]={}})})();(function(){var a=w.a.getInstance().get(q.a.evtName()),b=null;a&&(b=JSON.parse(a));a&&b?(Object.setPrototypeOf(b,q.a.prototype),c.filters=b):(c.filters=new q.a,c._updateFiltersCookie())})();c._initSubscriptions()}b()(a,[{key:"_initSubscriptions",value:function(){window.addEventListener("message",
this._handleFrameMessages.bind(this))}},{key:"_handleFrameMessages",value:function(a){if(a&&a.data)switch(a.data._name){case D.WidgetInitializedEvent.evtName():this._handleWidgetInitializedEvent(a);break;case D.ToggleWidgetEvent.evtName():this._handleToggleWidgetEvent(a);break;case D.UpdateSurveyFilterEvent.evtName():this._handleUpdateSurveyFilterEvent(a);break;case D.GMLoginEvent.evtName():this._handleLoginEvent(a);break;case D.SubmitCompletedSurveyErrorEvent.evtName():this._handleSubmitCompletedSurveyErrorEvent(a);
break;case D.UpdateCurrentPollEvent.evtName():this._handleUpdateCurrentPollEvent(a);break;default:"resize"===a.data.action&&this._handleExpandWidgetEvent(a)}}},{key:"_handleSubmitCompletedSurveyErrorEvent",value:function(a){if(a&&a.data&&a.data._name===D.SubmitCompletedSurveyErrorEvent.evtName()&&a.data.widgetId)switch(a.data.widgetId){case "PollWidget":this.pollWidget&&(a=this.pollWidget,a.style.visibility="hidden");break;case "SurveyWidget":this.surveyWidget&&(a=this.surveyWidget,a.setAttribute("data-expanded",
"false"),a.style.visibility="hidden")}}},{key:"_handleExpandWidgetEvent",value:function(a){if(a&&a.data&&"resize"===a.data.action)switch(a.data["class"]){case "expanded":this.pollWidget&&(this.pollWidget.setAttribute("data-noanimation","true"),this.pollWidget.style.visibility="hidden");break;case "collapsed":this.pollWidget&&(this.pollWidget.setAttribute("data-noanimation","false"),this.pollWidget.style.visibility="visible")}}},{key:"_handleLoginEvent",value:function(a){a&&a.data&&a.data._name===
D.GMLoginEvent.evtName()&&a.data.user&&(this.pollWidget&&this.pollWidget.contentWindow&&this.grovePrefix&&(this.pollWidget.setAttribute("data-expanded","false"),this.pollWidget.style.visibility="hidden",this.pollWidget.contentWindow.postMessage(new D.ReloadWidgetEvent({widgetId:"PollWidget"}),this.grovePrefix)),this._toggleSurveysWidget(this.surveyWidget,!1))}},{key:"_handleUpdateSurveyFilterEvent",value:function(a){a&&a.data&&a.data._name===D.UpdateSurveyFilterEvent.evtName()&&a.data.filter&&(this.filters.put(a.data.filter),
this._updateFiltersCookie())}},{key:"toggleWidgetVisibility",value:function(a,b,c,d){if(a){var e=document.getElementById(a);switch(a){case "PollWidget":this._togglePollsWidget(e,b,d);break;case "SurveyWidget":this._toggleSurveysWidget(e,b,c)}}}},{key:"_toggleSurveysWidget",value:function(a,b,c){a&&(b?c&&this.holder&&this.holder[m.a.TYPE.SURVEY]?(b=this.holder[m.a.TYPE.SURVEY][c])&&b.settings&&b.settings.condition?m.a.extractCondition(b.settings.condition.type)===m.a.CONDITION.AFTER_SEC&&0<=b.settings.condition.value&&
setTimeout(function(){a.setAttribute("data-expanded","true");a.style.visibility="visible"},1E3*b.settings.condition.value):b&&b.settings&&!b.settings.condition&&(a.setAttribute("data-expanded","true"),a.style.visibility="visible"):(a.setAttribute("data-expanded","true"),a.style.visibility="visible"):(a.setAttribute("data-expanded","false"),a.style.visibility="hidden"))}},{key:"_togglePollsWidget",value:function(a,b,c){a&&"hidden"!=c&&(b?a.setAttribute("data-expanded","true"):a.setAttribute("data-expanded",
"false"),c&&(a.style.visibility=c))}},{key:"setActiveSurveysPolls",value:function(a){var b=this;b.activePollsIds=[];a&&a.active&&a.active.forEach(function(a){(a=m.a.extractDto(a))&&a.type&&a.id&&(b.holder[a.type][a.id]=a,a.type===m.a.TYPE.POLL&&b.activePollsIds.push(a.id))})}},{key:"containsActivePolls",value:function(){return this._containsActiveSurveyType(m.a.TYPE.POLL)}},{key:"containsActiveSurveys",value:function(){return this._containsActiveSurveyType(m.a.TYPE.SURVEY)}},{key:"_containsActiveSurveyType",
value:function(a){return this.holder&&a&&this.holder[a]&&"object"===f()(this.holder[a])?(a=Object.keys(this.holder[a]))&&0<a.length?!0:!1:!1}},{key:"_handleWidgetInitializedEvent",value:function(a){if(a&&a.data&&a.data._name===D.WidgetInitializedEvent.evtName()){var b;switch(a.data.widgetId){case "SurveyWidget":(b=this._getCandidateSurveys(m.a.TYPE.SURVEY))&&this.surveyWidget&&this.surveyWidget.contentWindow&&this.surveyWidget.contentWindow.postMessage(new D.ActiveSurveysEvent({data:b}),this.grovePrefix);
break;case "PollWidget":(b=this._getCandidateSurveys(m.a.TYPE.POLL))&&this.pollWidget&&this.pollWidget.contentWindow&&this.pollWidget.contentWindow.postMessage(new D.ActiveSurveysEvent({data:b,currentPollId:a.data.currentPollId}),this.grovePrefix)}}}},{key:"_handleUpdateCurrentPollEvent",value:function(a){this._getCandidateSurveys(m.a.TYPE.POLL)&&this.pollWidget&&this.pollWidget.contentWindow&&this.pollWidget.contentWindow.postMessage(new D.UpdateCurrentPollWidgetEvent({currentPollId:a.data.currentPollId}),
this.grovePrefix)}},{key:"_handleToggleWidgetEvent",value:function(a){a&&a.data&&a.data._name===D.ToggleWidgetEvent.evtName()&&this.toggleWidgetVisibility(a.data.widgetId,a.data.value,a.data.surveyId,a.data.visibility)}},{key:"_updateFiltersCookie",value:function(){try{w.a.getInstance().setCookie(q.a.evtName(),JSON.stringify(this.filters),q.a.expirationDate())}catch(e){return!1}return!0}},{key:"_getCandidateSurveys",value:function(a){return a&&m.a.extractType(a)&&this.holder&&this.holder[a]?this.holder[a]:
null}}]);return a}()},CHen:function(c,h,a){var f=a("uCi2"),d=a("HAGj"),b=a("bIjD");c.exports=function(a,c,q){for(var m=-1,h=c.length,u={};++m<h;){var e=c[m],r=f(a,e);q(r,e)&&d(u,b(e,a),r)}return u}},CK11:function(c,h,a){(function(c){var d=a("4T/i");h.a=function(a,f){var b=this,q="page",m=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.topAir,h=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.bottomAir,u=a.stickyWidgetConfiguration&&a.stickyWidgetConfiguration.stickyWidth,e=a.stickyWidgetConfiguration&&
a.stickyWidgetConfiguration.air,r;this.access=f.access;this.started=!1;f=a.selectors.stickyIndex?a.selectors.stickyIndex[0]:void 0;var t=void 0,w=f?Object(d.a)(f)[0]:void 0,K=void 0;this.install=null!==a.selectors.stickyIndex&&void 0!==a.selectors.stickyIndex&&void 0!==w&&"full"===this.access;if(!0===this.install){f=a.selectors.stickyIndex[0];t=a.selectors.stickyIndex[1];w=Object(d.a)(f)[0];K=void 0!==t?Object(d.a)(t)[0]:void 0;var N=void 0!==w&&null!=e?w.offsetLeft-u-e:null;var F=void 0!==K?K.getBoundingClientRect().height+
m:m}this.setPdfLeftOffset=function(a){!1!==this.install&&null!=a&&(r=a-e)};this.setView=function(a){if(!1!==this.install&&(q=a,document.getElementById("Sticky"))){switch(q){case "page":null!=N&&(document.getElementById("Sticky").style.left=(0<=N?N:0)+"px");break;case "pdf":null!=r&&(document.getElementById("Sticky").style.left=(0<r&&0<r-u?r-u:0)+"px"),this.show()}F||(K=void 0!=t?Object(d.a)(t)[0]:void 0,F=void 0!=K?K.getBoundingClientRect().height+m:m);null!=F&&(document.getElementById("Sticky").style.top=
F+"px")}};this.show=function(){if(!1!==this.install)switch(q){case "pdf":document.getElementById("Sticky")&&(document.getElementById("Sticky").style.visibility="visible");break;case "page":document.getElementById("Sticky")&&document.getElementById("TopWidget")&&(document.getElementById("Sticky").style.visibility=0>document.getElementById("TopWidget").getBoundingClientRect().bottom?"visible":"hidden")}};this.hide=function(){!1!==this.install&&document.getElementById("Sticky")&&(document.getElementById("Sticky").style.visibility=
"hidden")};this.render=function(){if(!1!==this.install&&"full"===b.access){var a=c(w).offset().left;N=null!=e?a-u-e:null;if(document.getElementById("TopWidget"))switch(document.getElementById("TopWidget").style.visibility){case "visible":b.show();break;case "hidden":b.hide()}else b.hide();switch(q){case "pdf":b.setView("pdf");b.hide();break;case "page":b.setView("page"),void 0!==w&&(w.getBoundingClientRect().bottom<=h||0>N)&&b.hide()}}};this.start=function(){!1!==this.install&&(document.addEventListener("scroll",
this.render),window.addEventListener("resize",this.render),this.started=!0)}}}).call(h,a("7t+N"))},CYdk:function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});h["default"]=function(a,c,b){c=c||10;return new Promise(function(b,d){try{var f=a();if(f)b(f);else var m=setInterval(function(){try{var c=a();c&&(clearInterval(m),b(c))}catch(u){d(u)}},c)}catch(A){d(A)}})}},CxPB:function(c,h,a){var f=a("wSKX");c.exports=function(a){return"function"==typeof a?a:f}},D79o:function(c,h,a){function f(a,
b,c){c=c||a.length;for(var d=b.indexOf(a),e=[],q=b.indexOf(a);-1!=q;)e.push(q),q=b.indexOf(a,q+1);if(-1!=d)return{text:a,s:d,ss:e,c:100*a.length/c};d=a.length/2;return 5<=d?[f(a.substring(0,d),b,c),f(a.substring(d),b,c)]:{text:a,s:-1,ss:[]}}function d(a,b){if(!Array.isArray(a))return[a];b=b||[];a.forEach(function(a){Array.isArray(a)?d(a,b):b.push(a)});return b}function b(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];if(null!=d){for(var e=c+1;e<a.length;e++){var f=a[e];if(d.s+d.text.length==f.s)d.text+=
f.text,d.c+=f.c,a[e]=null;else break}b.push(d)}}return b}function w(a){for(var b=a[0].ss.map(function(b){return[{s:b,c:a[0].c,text:a[0].text}]}),c=function(c){var d=a[c].ss.map(function(b){return{s:b,c:a[c].c,text:a[c].text}});b=m()(b,function(a){var b=a[a.length-1].s,c=d.filter(function(a){return a.s>b});return 0==c.length?[a]:c=A()(c,function(b){var c=a.slice();c.push(b);return c})})},d=1;d<a.length;d++)c(d);return b}function D(a){return a.reduce(function(a,b){return a+b.c},0)}function q(a){return a[a.length-
1].s-a[0].s}Object.defineProperty(h,"__esModule",{value:!0});c=a("Oy1H");a.n(c);c=a("nfWN");var m=a.n(c);c=a("2247");var A=a.n(c),u=a("cuGy"),e={};try{e=window||{}}catch(r){}h["default"]={confidence:D,distance:q,combos:w,find:function(a,c,m){var r=a;m&&(r=m.back.trim()+a+m.front.trim());if(5>r.length)return null;var h=Date.now();c=f(r,c);c=d(c).filter(function(a){return-1!=a.s});if(0<c.length)c=w(c),c=c.sort(function(a,b){var c=D(a),d=D(b);return c==d?(a=q(a),b=q(b),a-b):d-c});else return[];var t=
c[0];t=b(t);var A=D(t);c=t.slice(0);t[0]&&m&&(a=this.find(a,r))&&(a.forEach(function(a){a.s+=t[0].s}),t=a,t.forEach(function(a){a.c=a.c*A/100}));t[0]||(t=c);a=q(t);m=t.reduce(function(a,b){return a+b.text.length},0);t.confidence=A;t.dist=a;t.totLength=m;h=Date.now()-h;t.elapsed=h;Object(u.debug)("partialMatch",A,h,e.articleInfo&&e.articleInfo.page,e.articleInfo&&e.articleInfo.id);return t}}},En79:function(c,h,a){c.exports=a("FS69")},FS69:function(c,h,a){c=function(a){function c(a,b,c){Object.defineProperty(a,
b,{value:c,enumerable:!0,configurable:!0,writable:!0});return a[b]}function b(a,b,c,d){b=Object.create((b&&b.prototype instanceof h?b:h).prototype);d=new K(d||[]);b._invoke=e(a,c,d);return b}function f(a,b,c){try{return{type:"normal",arg:a.call(b,c)}}catch(ja){return{type:"throw",arg:ja}}}function h(){}function q(){}function m(){}function A(a){["next","throw","return"].forEach(function(b){c(a,b,function(a){return this._invoke(b,a)})})}function u(a,b){function c(d,e,g,q){d=f(a[d],a,e);if("throw"===
d.type)q(d.arg);else{var m=d.arg;return(d=m.value)&&"object"===typeof d&&I.call(d,"__await")?b.resolve(d.__await).then(function(a){c("next",a,g,q)},function(a){c("throw",a,g,q)}):b.resolve(d).then(function(a){m.value=a;g(m)},function(a){return c("throw",a,g,q)})}}var d;this._invoke=function(a,e){function g(){return new b(function(b,d){c(a,e,b,d)})}return d=d?d.then(g,g):g()}}function e(a,b,c){var d=P;return function(e,q){if(d===U)throw Error("Generator is already running");if(d===ka){if("throw"===
e)throw q;return F()}c.method=e;for(c.arg=q;;){if(e=c.delegate)if(e=r(e,c)){if(e===g)continue;return e}if("next"===c.method)c.sent=c._sent=c.arg;else if("throw"===c.method){if(d===P)throw d=ka,c.arg;c.dispatchException(c.arg)}else"return"===c.method&&c.abrupt("return",c.arg);d=U;e=f(a,b,c);if("normal"===e.type){d=c.done?ka:L;if(e.arg===g)continue;return{value:e.arg,done:c.done}}"throw"===e.type&&(d=ka,c.method="throw",c.arg=e.arg)}}}function r(a,b){var c=a.iterator[b.method];if(c===B){b.delegate=
null;if("throw"===b.method){if(a.iterator["return"]&&(b.method="return",b.arg=B,r(a,b),"throw"===b.method))return g;b.method="throw";b.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}c=f(c,a.iterator,b.arg);if("throw"===c.type)return b.method="throw",b.arg=c.arg,b.delegate=null,g;c=c.arg;if(!c)return b.method="throw",b.arg=new TypeError("iterator result is not an object"),b.delegate=null,g;if(c.done)b[a.resultName]=c.value,b.next=a.nextLoc,"return"!==b.method&&(b.method=
"next",b.arg=B);else return c;b.delegate=null;return g}function t(a){var b={tryLoc:a[0]};1 in a&&(b.catchLoc=a[1]);2 in a&&(b.finallyLoc=a[2],b.afterLoc=a[3]);this.tryEntries.push(b)}function R(a){var b=a.completion||{};b.type="normal";delete b.arg;a.completion=b}function K(a){this.tryEntries=[{tryLoc:"root"}];a.forEach(t,this);this.reset(!0)}function N(a){if(a){var b=a[H];if(b)return b.call(a);if("function"===typeof a.next)return a;if(!isNaN(a.length)){var c=-1;b=function x(){for(;++c<a.length;)if(I.call(a,
c))return x.value=a[c],x.done=!1,x;x.value=B;x.done=!0;return x};return b.next=b}}return{next:F}}function F(){return{value:B,done:!0}}var G=Object.prototype,I=G.hasOwnProperty,B,v="function"===typeof Symbol?Symbol:{},H=v.iterator||"@@iterator",T=v.asyncIterator||"@@asyncIterator",Y=v.toStringTag||"@@toStringTag";try{c({},"")}catch(J){c=function(a,b,c){return a[b]=c}}a.wrap=b;var P="suspendedStart",L="suspendedYield",U="executing",ka="completed",g={};v={};c(v,H,function(){return this});var V=Object.getPrototypeOf;
(V=V&&V(V(N([]))))&&V!==G&&I.call(V,H)&&(v=V);var ia=m.prototype=h.prototype=Object.create(v);q.prototype=m;c(ia,"constructor",m);c(m,"constructor",q);q.displayName=c(m,Y,"GeneratorFunction");a.isGeneratorFunction=function(a){return(a="function"===typeof a&&a.constructor)?a===q||"GeneratorFunction"===(a.displayName||a.name):!1};a.mark=function(a){Object.setPrototypeOf?Object.setPrototypeOf(a,m):(a.__proto__=m,c(a,Y,"GeneratorFunction"));a.prototype=Object.create(ia);return a};a.awrap=function(a){return{__await:a}};
A(u.prototype);c(u.prototype,T,function(){return this});a.AsyncIterator=u;a.async=function(c,d,e,g,f){void 0===f&&(f=Promise);var q=new u(b(c,d,e,g),f);return a.isGeneratorFunction(d)?q:q.next().then(function(a){return a.done?a.value:q.next()})};A(ia);c(ia,Y,"Generator");c(ia,H,function(){return this});c(ia,"toString",function(){return"[object Generator]"});a.keys=function(a){var b=[],c;for(c in a)b.push(c);b.reverse();return function x(){for(;b.length;){var c=b.pop();if(c in a)return x.value=c,x.done=
!1,x}x.done=!0;return x}};a.values=N;K.prototype={constructor:K,reset:function(a){this.next=this.prev=0;this.sent=this._sent=B;this.done=!1;this.delegate=null;this.method="next";this.arg=B;this.tryEntries.forEach(R);if(!a)for(var b in this)"t"===b.charAt(0)&&I.call(this,b)&&!isNaN(+b.slice(1))&&(this[b]=B)},stop:function(){this.done=!0;var a=this.tryEntries[0].completion;if("throw"===a.type)throw a.arg;return this.rval},dispatchException:function(a){function b(b,d){g.type="throw";g.arg=a;c.next=b;
d&&(c.method="next",c.arg=B);return!!d}if(this.done)throw a;for(var c=this,d=this.tryEntries.length-1;0<=d;--d){var e=this.tryEntries[d],g=e.completion;if("root"===e.tryLoc)return b("end");if(e.tryLoc<=this.prev){var f=I.call(e,"catchLoc"),q=I.call(e,"finallyLoc");if(f&&q){if(this.prev<e.catchLoc)return b(e.catchLoc,!0);if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else if(f){if(this.prev<e.catchLoc)return b(e.catchLoc,!0)}else if(q){if(this.prev<e.finallyLoc)return b(e.finallyLoc)}else throw Error("try statement without catch or finally");
}}},abrupt:function(a,b){for(var c=this.tryEntries.length-1;0<=c;--c){var d=this.tryEntries[c];if(d.tryLoc<=this.prev&&I.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var e=d;break}}e&&("break"===a||"continue"===a)&&e.tryLoc<=b&&b<=e.finallyLoc&&(e=null);c=e?e.completion:{};c.type=a;c.arg=b;return e?(this.method="next",this.next=e.finallyLoc,g):this.complete(c)},complete:function(a,b){if("throw"===a.type)throw a.arg;"break"===a.type||"continue"===a.type?this.next=a.arg:"return"===a.type?(this.rval=
this.arg=a.arg,this.method="return",this.next="end"):"normal"===a.type&&b&&(this.next=b);return g},finish:function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.finallyLoc===a)return this.complete(c.completion,c.afterLoc),R(c),g}},"catch":function(a){for(var b=this.tryEntries.length-1;0<=b;--b){var c=this.tryEntries[b];if(c.tryLoc===a){a=c.completion;if("throw"===a.type){var d=a.arg;R(c)}return d}}throw Error("illegal catch attempt");},delegateYield:function(a,b,c){this.delegate=
{iterator:N(a),resultName:b,nextLoc:c};"next"===this.method&&(this.arg=B);return g}};return a}(c.exports);try{regeneratorRuntime=c}catch(f){"object"===typeof globalThis?globalThis.regeneratorRuntime=c:Function("r","regeneratorRuntime = r")(c)}},Fkvj:function(c,h,a){function f(a,c,h,g,V,ia){var U,ka=c&1,L=c&2,ja=c&4;h&&(U=V?h(a,g,V,ia):h(a));if(void 0!==U)return U;if(!v(a))return a;if(g=G(a)){if(U=K(a),!ka)return A(a,U)}else{var x=R(a),z="[object Function]"==x||"[object GeneratorFunction]"==x;if(I(a))return m(a,
ka);if("[object Object]"==x||"[object Arguments]"==x||z&&!V){if(U=L||z?{}:F(a),!ka)return L?e(a,q(U,a)):u(a,D(U,a))}else{if(!P[x])return V?a:{};U=N(a,x,ka)}}ia||(ia=new d);if(V=ia.get(a))return V;ia.set(a,U);H(a)?a.forEach(function(b){U.add(f(b,c,h,b,a,ia))}):B(a)&&a.forEach(function(b,d){U.set(d,f(b,c,h,d,a,ia))});L=ja?L?t:r:L?Y:T;var pa=g?void 0:L(a);b(pa||a,function(b,d){pa&&(d=b,b=a[d]);w(U,d,f(b,c,h,d,a,ia))});return U}var d=a("bJWQ"),b=a("PqYH"),w=a("i4ON"),D=a("jD7S"),q=a("py9u"),m=a("mKB/"),
A=a("hrPF"),u=a("Nkkh"),e=a("1QDk"),r=a("MoMe"),t=a("xond"),R=a("gHOb"),K=a("UfSK"),N=a("5/Qr"),F=a("WQFf"),G=a("NGEn"),I=a("ggOT"),B=a("dwsC"),v=a("yCNF"),H=a("SGXn"),T=a("ktak"),Y=a("t8rQ"),P={};P["[object Arguments]"]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P["[object Object]"]=
P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0;P["[object Error]"]=P["[object Function]"]=P["[object WeakMap]"]=!1;c.exports=f},Fp5l:function(c,h,a){var f=a("bGc4"),d=a("UnEC");c.exports=function(a){return d(a)&&f(a)}},G0Wc:function(c,h,a){var f=a("yCNF"),d=a("HT7L"),b=a("8gK5"),w=Object.prototype.hasOwnProperty;c.exports=function(a){if(!f(a))return b(a);
var c=d(a),m=[],h;for(h in a)("constructor"!=h||!c&&w.call(a,h))&&m.push(h);return m}},G8ar:function(c,h,a){var f=a("cdq7"),d=a("8++/"),b=a("i6nN");c.exports=function(a,c,q){return c===c?b(a,c,q):f(a,d,q)}},GCEA:function(c,h,a){function f(a){var b=d();return function(){var c=D()(a);if(b){var d=D()(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return w()(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(U){return!1}}c=a("j/rp");var b=a.n(c);c=a("T/v0");var w=a.n(c);c=a("tNLN");var D=a.n(c);c=a("Z60a");var q=a.n(c);c=a("C9uT");var m=a.n(c),A=a("CYdk");c=a("JyB8");a.n(c);var u=a("ZV5t"),e=a("M+3u"),r=a("vzIA");c=a("6PBa");var t=a.n(c);c=a("07sv");var R=a.n(c);c=a("wSKX");var K=a.n(c),N=a("RTdn"),F=a("K9Qf");c=a("moUy");a.n(c);var G=a("8tbe"),I=a("cuGy"),B=a("jItp"),v=
a("yVmd"),H=window,T=a("7t+N");T.__orig="rmq";window.rmqJquery=T;window.jQuery&&(window.jQuery.__orig="own");var Y=null;a=function(){function a(b,c,d,e,f,m){q()(this,a);Y=this;H.LiteratumHandler=this;this.grovePrefix=b;this.apiBase=c;this.gp=d||{};this.urlParams=e||{};this.contentType="EPUB"+(H.readerConfig&&"pdf"===H.readerConfig.format?"_PDF":"");this.urlParams.contentType=this.contentType;b=this.urlParams;c=this.gp;Object.assign(b,{});b.theme="liter";b.version=c.isLiter?"liter":"full";c={frameOrigin:Object(N.extractSiteUrl)(!1),
expanded:"liter",mode:"literatum"};Object.assign(c,b);this.dataset=c=t()(c,K.a);this.waitForLogin=f;this.userLoggedIn=m;this.highlightEventHandler=this.rmqInjectorHandler=this.contentFrameHandler=this.readerCheckerIntervalId=this.readerUtil=null}m()(a,[{key:"installInFrame",value:function(a,b,c){if(a&&a.contentWindow){var d=this.dataset,e=a.contentWindow.document.createElement("script");e.id="groveScript";e.src=this.grovePrefix+("/"===this.grovePrefix[this.grovePrefix.length-1]?"":"/")+"epub_internal.bundle.js";
if(c){a.contentWindow.spineOfFrame=c;var g=this;Object.defineProperty(a.contentWindow,"readerUtil",{get:function(){return g.readerUtil},set:function(a){},configurable:!1,enumerable:!0});a.contentWindow.windowEventManager=new B.WindowEventManager(a.contentWindow.window)}e.dataset.page=JSON.stringify(b);e.dataset.waitForLogin=this.waitForLogin&&!this.userLoggedIn?"true":"false";R()(a.dataset,function(a,b){e.dataset[b]=a});R()(d,function(a,b){e.dataset[b]=a});try{a.contentWindow.document.head.appendChild(e)}catch(ha){Object(I.error)(ha)}}}},
{key:"getSpineItemForPage",value:function(a){return this.reader.getLoadedSpineItems().filter(function(b){return b.idref===a})[0]}},{key:"getFramesForPage",value:function(b){var c=this.getSpineItemForPage(b);return c?a.getContentFrames().filter(function(a,b){a=b.dataset.loaduri;b=c.href;return a&&-1!==a.indexOf(b)}):T()}},{key:"_handleUserLoginEvent",value:function(a,b){this.userLoggedIn=b&&b.id;this.waitForLogin&&this._handleFrameEvent(new G.c(b))}},{key:"_handleUserLogoutEvent",value:function(a){delete this.userLoggedIn;
this.contentFrameHandler&&this.contentFrameHandler.clearLoadedAnnotations();this.waitForLogin&&this._handleFrameEvent(new G.a("logout"))}},{key:"initiate",value:function(a){var b=this;return Promise.all([Object(A["default"])(function(){return T("iframe[enable-annotation]").length}),Object(A["default"])(function(){return H.READIUM})]).then(function(a){a=a[1];var c=a.fxlPagingFrameScale;a.fxlPagingFrameScale=function(a,b){try{return a[0].contentDocument?c(a,b):null}catch(ja){return null}};var d=!1;
a&&a.reader&&(d=b._resolveDoiFromReader(a.reader));if(d)return a;throw"could not resolve doi from reader..";}).then(function(c){return new Promise(function(d,e){b.rmqInjectorHandler=new r.a(H,b.dataset,b.grovePrefix,b.apiBase,b.urlParams,b.gp);b.rmqInjectorHandler.injectInTab(a).then(function(a){d(c)})["catch"](function(a){e("could not inject remarq to readium panel..",a)})})}).then(function(a){return new Promise(function(c,d){try{b.setupReader(a.reader),null!=b.readerCheckerIntervalId&&(b.readerCheckerIntervalId=
setInterval(function(){b.reader!==H.READIUM.reader&&(Object(I.debug)("READER CHANGED!!!!"),clearInterval(b.readerCheckerIntervalId),b.setupReader(H.READIUM.reader))},100)),c(b)}catch(ra){d("could not setup reader..",ra)}})})}},{key:"setupReader",value:function(a){this.reader=a;this.readerUtil||(this.contentFrameHandler=new u.a(this,H),this.highlightEventHandler=new L(this),this.readerUtil=new F.a(a,[this.contentFrameHandler,this.highlightEventHandler]))}},{key:"_resolveDoiFromReader",value:function(a){function b(a){a=
a.attr("href");var b=a.indexOf("doi.org");return a.substring(b+7)}if(H.readerConfig&&H.readerConfig.doi)return this.doi=H.readerConfig.doi,!0;a="function"===typeof a.metadata&&a.metadata();var c=T('a[href*="doi.org"]');1===c.length?this.doi=b(c):1<c.length&&(c=T('p.doi a[href*="doi.org"]'),1===c.length&&(this.doi=b(c)));this.doi||(c=/.*(10\.[0-9]{4}[0-9]?\/).*/,c.test(H.location.pathname)&&(c=c.exec(H.location.pathname)[1],c=H.location.pathname.indexOf(c),this.doi=H.location.pathname.substring(c)));
return this.doi?(this.dataset.doi=this.urlParams.doi=this.doi,!0):a&&a.identifier?(this.dataset.doi=this.urlParams.doi=this.doi=a.identifier,!0):!1}},{key:"handleExpand",value:function(a){this.rmqInjectorHandler?this.rmqInjectorHandler.handleExpand(a):Object(I.debug)("LITERATUM HANDLER :: HANDLE EXPAND -> REMARQ INJECTOR NOT INITIALIZED YET..")}},{key:"scrollToElement",value:function(a,b){this.readerUtil.scrollToElement(a,b)}},{key:"broadcastToFrames",value:function(a){(new Date).getTime();a.name=
a.messageIndication;this.readerUtil&&this.readerUtil.updateCurrentView();if(a&&a.name)switch(a.name){case "test":break;case "highlight":this.highlightEventHandler.processEvent(a);break;case "newUser":var b=a.user;b?this._handleUserLoginEvent(a,b):this._handleUserLogoutEvent(a);break;case "allComments":case "addConversationItems":this._handleAllCommentsEvent(a);break;default:this._handleFrameEvent(a)}else a&&this._handleFrameEvent(a)}},{key:"_handleAllCommentsEvent",value:function(a){var b=this;if(a&&
("allComments"===a.messageIndication||"addConversationItems"===a.messageIndication)&&a.comments&&Array.isArray(a.comments)){var c=a.comments.reduce(function(a,c){var d=Object(B.getMostRelativeContextRange)(b.contentType,c.contextRanges,Object(N.extractSiteUrl)(),c.doi,"full/"+b.doi);(d=d&&d.page)&&d.idref?(a[d.idref]=a[d.idref]||[]).push(c):(a.__unresolved__=a.__unresolved__||[]).push(c);return a},{});T.each(this.contentFrameHandler.loadedContentFrames.holder,function(b,d){b=(c[b]||[]).concat(c.__unresolved__||
[]);0<b.length&&!d.isAnnotationCollectionLoaded(b)&&(a.comments=b,d.contentFrame.postMessage(a,"*"))})}}},{key:"_handleFrameEvent",value:function(a){a&&this.contentFrameHandler&&this.contentFrameHandler.loadedContentFrames&&this.contentFrameHandler.loadedContentFrames.values().forEach(function(b){if(b){var c=b.contentFrame;b=b.spineItem;c&&b&&a&&c.postMessage(a,"*")}})}},{key:"getPage",value:function(a){var b=this,c=this;return new Promise(function(d,e){if(a){var g=b.getFramesForPage(a)[0];g?d({html:g.contentDocument.documentElement.innerHTML}):
(g=c.reader.spine().items.filter(function(b){return b.idref===a.idref})[0])?(g=g.href,H.READIUM.getCurrentPublicationFetcher().getFileContentsFromPackage(g,function(a){d({html:a})},function(a){e(a)})):e("cannot find tgt spine for idref ".concat(a.idref))}else e("Not implemented for whole epub")})}},{key:"destroy",value:function(){this.broadcastToFrames({action:"destroy",reason:"destroy"});this.groveSide=null}},{key:"setOfflineStatus",value:function(a){this.broadcastToFrames(new G.b(a))}}],[{key:"getInstance",
value:function(){return Y}},{key:"getContentFrames",value:function(){return T("#epub-reader-container").find("iframe")}}]);return a}();var P=function(){function a(b,c){q()(this,a);this.created=(new Date).getTime();this.applied=null;this.data=b;this.consumer=c?c:null}m()(a,[{key:"process",value:function(){var a=this;this.consumer&&((new e.b([this.consumer])).on(e.a.CONSUMER_FINISHED,function(){a.applied=(new Date).getTime()}).start(function(){Object(I.debug)("waiting for event consumption")}),this.consumer.start())}}]);
return a}(),L=function(a){function c(a){q()(this,c);var b=d.call(this);b.events=F.b.eventNames();b.name=[F.b.CONTENT_RELOADED_EVENT,F.b.VIEW_DESTROYED_EVENT,F.b.VIEW_CREATED_EVENT,F.b.CONTENT_FRAME_UNLOADED_EVENT];b.delegate=a?a:null;b.throttleWindow=5E3;b.showEvent=null;b.hideEvent=null;b.annotationsLoadingConsumer=null;return b}b()(c,a);var d=f(c);m()(c,[{key:"notify",value:function(a,b){if(a)switch(a){case F.b.CONTENT_RELOADED_EVENT:this._handleContentReloadedEvent(a,b);break;case F.b.VIEW_DESTROYED_EVENT:case F.b.VIEW_CREATED_EVENT:this._handleReaderViewChangeEvent(a,
b);break;case F.b.CONTENT_FRAME_UNLOADED_EVENT:this._handleContentFrameUnloadedEvent(a,b)}}},{key:"_handleContentFrameUnloadedEvent",value:function(a,b){a&&a===F.b.CONTENT_FRAME_UNLOADED_EVENT&&b&&(a=this&&this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer&&(this.showEvent.consumer.status===e.c.STARTED||this.showEvent.consumer.status===e.c.READY)?this.showEvent:this&&this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.consumer&&(this.hideEvent.consumer.status===e.c.STARTED||this.hideEvent.consumer.status===
e.c.READY)?this.hideEvent:null,a&&a.data&&a.data.page&&this.delegate.contentFrameHandler&&this.delegate.contentFrameHandler.loadedContentFrames&&(a=this.delegate.contentFrameHandler.loadedContentFrames.get(a.data.page.idref))&&a.contentFrame&&a.contentFrame.sHref===b&&(this.cancel(),Object(I.debug)("found processed highlight in the removed content frame! canceling process..")))}},{key:"_handleReaderViewChangeEvent",value:function(a,b){!a||a!==F.b.VIEW_DESTROYED_EVENT&&a!==F.b.VIEW_CREATED_EVENT||
this.cancel()}},{key:"_handleContentReloadedEvent",value:function(a,b){a&&a===F.b.CONTENT_RELOADED_EVENT&&b&&(a=(a=b["new"])&&a.openPages&&Array.isArray(a.openPages)&&0<a.openPages.length?a.openPages[0]:null)&&(this.showEvent||this.hideEvent)&&(this.showEvent&&this.showEvent.data&&this.showEvent.consumer&&this.showEvent.consumer.status===e.c.STARTED?(b=this.showEvent.data.page,!b||a.idref===b.idref&&a.spineItemIndex===b.index||this.cancel()):this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.status===
e.c.FINISHED&&this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.data&&(this.hideEvent.consumer.status===e.c.READY||this.hideEvent.consumer.status===e.c.STARTED)&&(b=this.hideEvent.data.page,!b||a.idref===b.idref&&a.spineItemIndex===b.index||this.cancel()))}},{key:"processEvent",value:function(a){var b=this;if(this._isShowEvent(a)){this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status!==e.c.FINISHED&&Object(I.debug)("Unfinished consumer?");if(this.showEvent)if(this.isSameEvent(this.showEvent.data,
a)){if(this.showEvent.consumer.status!==e.c.FINISHED){Object(I.debug)("skipping event as a same one is already processed..");return}Object(I.debug)("redo highlight & scroll")}else this.cancel(),Object(I.debug)("canceling previous processed highlight event..",a);Object(I.debug)("creating new show event and start process..");this.annotationsLoadingConsumer=this.createAnnotationsLoadingConsumer(a,function(){b.showEvent=new P(a,b.createHighlightEventConsumer(a));b.showEvent.process()})}else if(!this._isHideEvent(a)||
this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status!==e.c.FINISHED)this._isHideEvent(a)&&this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.status===e.c.STARTED&&(new e.b([this.annotationsLoadingConsumer],function(){Object(I.debug)("hide event is waiting for loading annotations consumer to finish")})).on(e.a.CONSUMER_FINISHED,function(c){!b.hideEvent&&b.showEvent&&b._matchEvents(b.showEvent.data,a)&&b.annotationsLoadingConsumer&&b.annotationsLoadingConsumer.status===
e.c.FINISHED&&b.processEvent(a)}).start();else if(!this.hideEvent&&this.showEvent&&this._matchEvents(this.showEvent.data,a)){this.hideEvent=new P(a,this.createHighlightEventConsumer(a));var c=function(){var a=function(){b.hideEvent?((new e.b([b.hideEvent.consumer],function(){Object(I.debug)("waiting for hide highlight to finish..")})).on(e.a.CONSUMER_FINISHED,function(){b.cancel()}).start(),b.hideEvent.process()):Object(I.debug)("highlight hide event canceled!")},c=b.hideEvent.created-b.showEvent.applied;
c<b.throttleWindow?(c=0>c?b.throttleWindow:b.throttleWindow-c,setTimeout(a,c)):a()};this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.status===e.c.FINISHED?c():this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.status===e.c.STARTED&&(new e.b([this.showEvent.consumer],function(){Object(I.debug)("waiting for show event to finish..")})).on(e.a.CONSUMER_FINISHED,function(a){c()}).start()}else this.hideEvent?Object(I.debug)("skipping hide highlight event because another is in progress..",
a):Object(I.debug)("skipping hide highlight event because not matched with the current handle show highlight..",a)}},{key:"createAnnotationsLoadingConsumer",value:function(a,b){if(a&&this.delegate.readerUtil.currentView&&this.delegate.readerUtil.currentView.isLoaded(a.page)&&this.delegate.contentFrameHandler&&this.delegate.contentFrameHandler.loadedContentFrames){var c=this.delegate.contentFrameHandler.loadedContentFrames.get(a.page.idref);if(c&&c.isAnnotationLoaded({commentId:a.commentId,access:a.access,
page:a.page}))return(new e.b([],function(){Object(I.debug)("annotations loaded for frame..");b&&"function"===typeof b&&b()})).start();if(c&&!c.isAnnotationLoaded({commentId:a.commentId,access:a.access,page:a.page}))return(new e.b([this.delegate.contentFrameHandler],function(){Object(I.debug)("waiting for annotations to load on a loaded content frame..")})).on(v.a.ANNOTATIONS_LOADED_EVENT,function(c){if(c&&c.result&&c.delegate){var d=c.result;d&&d.isAnnotationLoaded({commentId:a.commentId,access:a.access,
page:a.page})?(Object(I.debug)("annotations for event loaded.. ",a),b&&"function"===typeof b&&b()):d&&!d.isAnnotationLoaded({commentId:a.commentId,access:a.access,page:a.page})?c.replay():Object(I.error)("not expected!")}}).start()}else return(new e.b([],function(){Object(I.debug)("content frame not loaded yet, skipping annot loading consumer..");b&&"function"===typeof b&&b()})).start()}},{key:"createHighlightEventConsumer",value:function(a){var b=this,c=a.page,d=Object(B.getMostRelativeContextRange)(this.delegate.contentType,
a.contextRanges,Object(N.extractSiteUrl)(),"full/"+this.doi,"full/"+this.doi);c||(c=d&&d.page);return c&&c.idref&&this.delegate.readerUtil?this.delegate.readerUtil.currentView&&this.delegate.readerUtil.currentView.isLoaded(c)?(Object(I.debug)("highlight found in page.. applying scroll."),new e.b([this.delegate.readerUtil,this.delegate.contentFrameHandler],function(){var d=b.delegate.contentFrameHandler.loadedContentFrames.get(c.idref);d&&d.contentFrame?d.contentFrame.postMessage(a,"*"):Object(I.error)("BROADCAST EVENT TO FRAMES -> CONTENT FRAME NOT FOUND!")})):
this._isShowEvent(a)?(new e.b([this.delegate.readerUtil,this.delegate.contentFrameHandler],function(){b.delegate.readerUtil.openSpineItemPage(c.idref,c.index)})).on(F.b.NEW_CONTENT_FRAME_EVENT,function(a){Object(I.debug)("consuming the new content frame event.. [idref : "+c.idref+"]");Object(I.debug)(a)}).on(v.a.ANNOTATIONS_LOADED_EVENT,function(d){Object(I.debug)("consuming the annotations loaded event.. [idref : "+c.idref+"]");Object(I.debug)(d);var e=b.delegate.contentFrameHandler.loadedContentFrames.get(c.idref);
e&&e.contentFrame&&e.isAnnotationLoaded(a)?e.contentFrame.postMessage(a,"*"):d.replay()}):new e.b([],function(){Object(I.debug)("Noop chain event consumer")}):null}},{key:"_isShowEvent",value:function(a){return!!a&&a.highlight}},{key:"_isHideEvent",value:function(a){return!!a&&!a.highlight}},{key:"_matchEvents",value:function(a,b){return!!a&&!!b&&a.access===b.access&&a.highlight===!b.highlight&&(a.commentId&&b.commentId&&a.commentId===b.commentId||a.id&&b.id&&a.id===b.id)}},{key:"isSameEvent",value:function(a,
b){return!!a&&!!b&&a.access===b.access&&a.highlight===b.highlight&&(a.commentId&&b.commentId&&a.commentId===b.commentId||a.id&&b.id&&a.id===b.id)}},{key:"cancel",value:function(){this.annotationsLoadingConsumer=(this.annotationsLoadingConsumer&&this.annotationsLoadingConsumer.cancel(),null);this.showEvent=(this.showEvent&&this.showEvent.consumer&&this.showEvent.consumer.cancel(),null);this.hideEvent=(this.hideEvent&&this.hideEvent.consumer&&this.hideEvent.consumer.cancel(),null)}}]);return c}(c.Observer);
h.a=a},HAGj:function(c,h,a){var f=a("i4ON"),d=a("bIjD"),b=a("ZGh9"),w=a("yCNF"),D=a("Ubhr");c.exports=function(a,c,h,u){if(!w(a))return a;c=d(c,a);for(var e=-1,q=c.length,m=q-1,A=a;null!=A&&++e<q;){var K=D(c[e]),N=h;if("__proto__"===K||"constructor"===K||"prototype"===K)break;if(e!=m){var F=A[K];N=u?u(F,K,A):void 0;void 0===N&&(N=w(F)?F:b(c[e+1])?[]:{})}f(A,K,N);A=A[K]}return a}},HCHl:function(c,h,a){c=a("Z60a");var f=a.n(c);c=a("C9uT");var d=a.n(c),b=a("4T/i"),w=a("6t3S"),D=a("ObtK");c=a("JEhQ");
var q=a.n(c),m=a("7t+N");m.__orig="rmq";window.rmqJquery=m;window.jQuery&&(window.jQuery.__orig="own");var A=0,u={};a=function(){function a(b,c,d,e,q,h){f()(this,a);this.id=A++;this.gp=q;u[""+this.id]=this;this.Remarq=b;this.pdfHandler=new D.a(b,c,d,e,q);m("body").append('<div id="rmq_pdfTooltip" class="rmq_tooltipCustom rmq_tooltipPosition rmq_pdfTooltipbg" data-init="true" style="display: none"><div class="rmq_tooltiptext rmq_annotatedpdf rmq_adderPdfExplanatoryText">Select REMARQ PDF to open the article including all annotations and conversations.</div><span class="rmq_tooltiptext"><button id="rmq_annotatedpdf"><div class="rmq_adderIcon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="15" height="19" viewBox="0 0 15 19"><defs><path id="rmqpdf_a" d="M.655 1.39h4.79V.45H.655z"/><path id="rmqpdf_c" d="M0 18.611h14.101V.001H0v18.61zm1.5-1.5h11.102V1.498H1.5V17.11z"/><path id="rmqpdf_e" d="M3.046.22c1.31 0 2.4.812 2.4 2.132v2.224c0 1.181-.822 1.947-1.93 2.086v.147c0 .526.148.647.729.647h.139v.83a2.751 2.751 0 0 1-.37.028c-.895 0-1.466-.425-1.466-1.246v-.406C1.44 6.514.655 5.748.655 4.576V2.361c0-1.319 1.072-2.14 2.39-2.14zm1.338 4.218v-1.78c0-.223-.027-.426-.083-.592-.147-.618-.683-.868-1.255-.868-.701 0-1.33.38-1.33 1.31V4.29c0 .221.028.416.075.59.156.61.692.86 1.255.86.7 0 1.338-.362 1.338-1.302z"/></defs><g fill="none" fill-rule="evenodd"><g transform="translate(4 13)"><mask id="rmqpdf_b" fill="#fff"><use xlink:href="#rmqpdf_a"/></mask><use fill="#333" xlink:href="#rmqpdf_a"/><g fill="#F8F8F8" mask="url(#rmqpdf_b)"><path d="M-5-14h16V6H-5z"/></g></g><mask id="rmqpdf_d" fill="#fff"><use xlink:href="#rmqpdf_c"/></mask><use fill="#333" xlink:href="#rmqpdf_c"/><g fill="#F8F8F8" mask="url(#rmqpdf_d)"><path d="M-1-1h16v20H-1z"/></g><g transform="translate(4 4)"><mask id="rmqpdf_f" fill="#fff"><use xlink:href="#rmqpdf_e"/></mask><use fill="#333" xlink:href="#rmqpdf_e"/><g fill="#F8F8F8" mask="url(#rmqpdf_f)"><path d="M-5-5h16v20H-5z"/></g></g></g></svg></div><div class="rmq_adderText">REMARQ PDF</div></button><button id="rmq_originalpdf"><div class="rmq_adderIcon"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="19" viewBox="0 0 14 19"><defs><path id="pdf_a" d="M0 18.611h14.101V.001H0v18.61zm1.5-1.5h11.102V1.498H1.5V17.11z"/><path id="pdf_c" d="M3.16 5.85l.017-.035c.103-.277.103-.277.172-.449.035-.12.121-.363.311-.914.086-.225.138-.432.19-.604.258.448.465.793.776 1.225.12.155.207.293.31.414l-.155.051c-.12.052-.259.086-.449.156l-.24.086c-.432.138-.674.224-1.07.38.051-.104.085-.207.137-.31M3.556.845a.399.399 0 0 1 .052-.12c.017.017.017.052.034.102.07.38.07.501-.034 1.001-.017-.05-.035-.103-.035-.137-.086-.38-.103-.57-.017-.846m2.916 5.037c.172 0 .344 0 .585.052.173.035.225.103.225.121v.121s-.018.017-.103.034a.847.847 0 0 1-.345.018c-.086-.035-.225-.087-.518-.328.052-.018.104-.018.156-.018M1.417 7.781c-.07.121-.12.242-.172.328-.173.328-.207.396-.31.5-.07.052-.156.017-.208-.017C.71 8.575.658 8.54.78 8.23c.068-.173.397-.38.69-.569 0 .051-.035.085-.052.12m1.26-2.622c-.052.155-.052.155-.156.414l-.017.035a8.76 8.76 0 0 1-.466.982c-.207.104-.414.207-.707.38-.62.362-1.053.621-1.208 1.035-.086.225-.293.777.155 1.14a.846.846 0 0 0 1.105 0c.207-.19.293-.363.465-.692.052-.085.104-.189.172-.327.277-.535.45-.897.484-.949 0-.017.017-.034.034-.052.121-.05.26-.103.414-.172.57-.242.811-.31 1.328-.483l.242-.086c.19-.069.327-.103.466-.155.172-.069.311-.104.448-.155.121.103.242.223.397.344.328.276.553.414.794.483.207.052.5.035.69-.017.604-.155.62-.603.638-.794.017-.259-.138-.707-.81-.828-.31-.052-.518-.052-.708-.052-.19 0-.345.018-.587.052a.983.983 0 0 1-.207.035c-.172-.173-.293-.345-.483-.604-.362-.518-.586-.88-.948-1.518-.052-.086-.104-.189-.156-.276.035-.155.07-.327.104-.534l.052-.243c.137-.655.172-.879.068-1.414-.12-.587-.517-.724-.724-.707-.103 0-.517.07-.69.673-.12.413-.103.724 0 1.155.07.311.225.691.483 1.157-.086.362-.19.69-.379 1.241-.173.57-.259.794-.293.932"/></defs><g fill="none" fill-rule="evenodd"><mask id="pdf_b" fill="#fff"><use xlink:href="#pdf_a"/></mask><use fill="#333" xlink:href="#pdf_a"/><g fill="#F8F8F8" mask="url(#pdf_b)"><path d="M-1-1h16v20H-1z"/></g><g><g transform="translate(3 5)"><mask id="pdf_d" fill="#fff"><use xlink:href="#pdf_c"/></mask><use fill="#333" xlink:href="#pdf_c"/><g fill="#F8F8F8" mask="url(#pdf_d)"><path d="M-1 0H9v10H-1z"/></g></g></g></g></svg></div><div class="rmq_adderText">PDF</div></button></span></div>');
this.tooltip=m("#rmq_pdfTooltip").hide();m("#rmq_annotatedpdf",this.tooltip).on("click",this.showRemarq(h));m("#rmq_originalpdf",this.tooltip).on("click",this.showOriginal());m("#rmq_clearPDF",this.tooltip).on("click",this.hide());document.addEventListener("click",this.hide());this.decoratedLinks=[];this.sendGaEvent=Object(w.a)(q)}d()(a,[{key:"show",value:function(a,b,c){var d=this;return function(c,e){var f=c.currentTarget;if(e||f.dataset.denied)if(f.href)window.location.href=f.href;else{if(f=m(f),
(c=f.data("handlerFn"))&&f.off("click",c),f.click(),c)f.on("click",c)}else d.sendGaEvent("PdfDialog","ShowPrompt"),d.showEvent=c.originalEvent,c.preventDefault(),e=m(f).offset(),c=e.top+m(f).height()+6,e=e.left,d.tgtElement=f,d.tgtElement.type=a,d.tgtElement.pdId=b,d.tooltip.css({top:c,left:e}).show()}}},{key:"hide",value:function(){var a=this,b=this;b.hideFN=function(c){a.hideEvent=c;if((!b.showEvent||b.showEvent.timeStamp!==c.timeStamp)&&b.tgtElement&&c.target!==b.tgtElement)if(b.actionEvent||b.sendGaEvent("PdfDialog",
"HidePrompt"),delete b.actionEvent,b.tgtElement.dataset&&"loading"===b.tgtElement.dataset.status)m(b.tgtElement).data("loadPromise").then(function(a){b.tgtElement=null;b.tooltip.hide()})["catch"](function(a){b.tgtElement=null;b.tooltip.hide()});else b.tgtElement=null,b.tooltip.hide()};return b.hideFN}},{key:"showRemarq",value:function(a){var b=this,c=this;c.showRemarqFN=function(d){c.sendGaEvent("PdfDialog","ShowRemarq");c.actionEvent=d;var e=c.tgtElement;d=e.type;var f=e.pdId,u=parseFloat(e.innerText.substring(e.innerText.indexOf("(")+
1,e.innerText.indexOf(" K)")));isNaN(u)&&(u=null);c.tgtElement.dataset.status="loading";var h=m.Deferred();m(c.tgtElement).data("loadPromise",h.promise());var r=m("#rmq_annotatedpdf",b.tooltip).html();m("#rmq_annotatedpdf",b.tooltip).html('<img src="'.concat(q.a,'"></img>')).prop("disabled","disabled");c.pdfHandler.handle(d,f,e,u,a).then(function(a){c.tgtElement.dataset.status="loaded";c.Remarq.pdfFrame=a;m("#rmq_annotatedpdf",b.tooltip).html(r).prop("disabled","");h.resolve(a)})["catch"](function(a){c.tgtElement.dataset.status=
"load_error";m("#rmq_annotatedpdf",b.tooltip).html(r).prop("disabled","");"A"===e.tagName&&(e.dataset.denied=a&&a.msg||"true");h.reject(a);m(e).click()})};return c.showRemarqFN}},{key:"showOriginal",value:function(){var a=this;a.showOriginalFN=function(b){a.sendGaEvent("PdfDialog","ShowOriginal");a.actionEvent=b;m(a.tgtElement).trigger("click",[!0])};return a.showOriginalFN}},{key:"decorateLinks",value:function(a,c,d){var e=this;c&&c.map(function(a){return Object(b.a)(a).filter(function(a){return a.href&&
-1!==a.href.indexOf("scholar.google.com")?!1:!0})}).forEach(function(b){b.forEach(function(b){var c=m(b);b=b.click;var f=e.show(d,a);c.on("click",f);c.data("handlerFn",f);c.data("fallbackFn",b);e.decoratedLinks.push(c)})})}},{key:"destroy",value:function(){this.tooltip&&(document.removeEventListener("click",this.hide()),m("#rmq_annotatedpdf",this.tooltip).off("click",this.showRemarqFN),m("#rmq_originalpdf",this.tooltip).off("click",this.showOriginalFN),m("#rmq_clearPDF",this.tooltip).off("click",
this.hideFN),this.tooltip.remove(),this.decoratedLinks.forEach(function(a){var b=a.data("handlerFn");a.data("fallbackFn");a.off("click",b)}),this.tooltip=null,delete u[""+this.id])}}]);return a}();h.a=a},"Ilb/":function(c,h,a){var f=a("Kzd6");c.exports=function(a,b){b=b?f(a.buffer):a.buffer;return new a.constructor(b,a.byteOffset,a.length)}},JDN0:function(c,h,a){var f=a("aCM0"),d=a("NGEn"),b=a("UnEC");c.exports=function(a){return"string"==typeof a||!d(a)&&b(a)&&"[object String]"==f(a)}},JEhQ:function(c,
h){c.exports="data:image/gif;base64,R0lGODlhGAAYAPQAAP///wAAAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJBwAAACwAAAAAGAAYAAAFriAgjiQAQWVaDgr5POSgkoTDjFE0NoQ8iw8HQZQTDQjDn4jhSABhAAOhoTqSDg7qSUQwxEaEwwFhXHhHgzOA1xshxAnfTzotGRaHglJqkJcaVEqCgyoCBQkJBQKDDXQGDYaIioyOgYSXA36XIgYMBWRzXZoKBQUMmil0lgalLSIClgBpO0g+s26nUWddXyoEDIsACq5SsTMMDIECwUdJPw0Mzsu0qHYkw72bBmozIQAh+QQJBwAAACwAAAAAGAAYAAAFsCAgjiTAMGVaDgR5HKQwqKNxIKPjjFCk0KNXC6ATKSI7oAhxWIhezwhENTCQEoeGCdWIPEgzESGxEIgGBWstEW4QCGGAIJEoxGmGt5ZkgCRQQHkGd2CESoeIIwoMBQUMP4cNeQQGDYuNj4iSb5WJnmeGng0CDGaBlIQEJziHk3sABidDAHBgagButSKvAAoyuHuUYHgCkAZqebw0AgLBQyyzNKO3byNuoSS8x8OfwIchACH5BAkHAAAALAAAAAAYABgAAAW4ICCOJIAgZVoOBJkkpDKoo5EI43GMjNPSokXCINKJCI4HcCRIQEQvqIOhGhBHhUTDhGo4diOZyFAoKEQDxra2mAEgjghOpCgz3LTBIxJ5kgwMBShACREHZ1V4Kg1rS44pBAgMDAg/Sw0GBAQGDZGTlY+YmpyPpSQDiqYiDQoCliqZBqkGAgKIS5kEjQ21VwCyp76dBHiNvz+MR74AqSOdVwbQuo+abppo10ssjdkAnc0rf8vgl8YqIQAh+QQJBwAAACwAAAAAGAAYAAAFrCAgjiQgCGVaDgZZFCQxqKNRKGOSjMjR0qLXTyciHA7AkaLACMIAiwOC1iAxCrMToHHYjWQiA4NBEA0Q1RpWxHg4cMXxNDk4OBxNUkPAQAEXDgllKgMzQA1pSYopBgonCj9JEA8REQ8QjY+RQJOVl4ugoYssBJuMpYYjDQSliwasiQOwNakALKqsqbWvIohFm7V6rQAGP6+JQLlFg7KDQLKJrLjBKbvAor3IKiEAIfkECQcAAAAsAAAAABgAGAAABbUgII4koChlmhokw5DEoI4NQ4xFMQoJO4uuhignMiQWvxGBIQC+AJBEUyUcIRiyE6CR0CllW4HABxBURTUw4nC4FcWo5CDBRpQaCoF7VjgsyCUDYDMNZ0mHdwYEBAaGMwwHDg4HDA2KjI4qkJKUiJ6faJkiA4qAKQkRB3E0i6YpAw8RERAjA4tnBoMApCMQDhFTuySKoSKMJAq6rD4GzASiJYtgi6PUcs9Kew0xh7rNJMqIhYchACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJEAQZZo2JIKQxqCOjWCMDDMqxT2LAgELkBMZCoXfyCBQiFwiRsGpku0EshNgUNAtrYPT0GQVNRBWwSKBMp98P24iISgNDAS4ipGA6JUpA2WAhDR4eWM/CAkHBwkIDYcGiTOLjY+FmZkNlCN3eUoLDmwlDW+AAwcODl5bYl8wCVYMDw5UWzBtnAANEQ8kBIM0oAAGPgcREIQnVloAChEOqARjzgAQEbczg8YkWJq8nSUhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJGAYZZoOpKKQqDoORDMKwkgwtiwSBBYAJ2owGL5RgxBziQQMgkwoMkhNqAEDARPSaiMDFdDIiRSFQowMXE8Z6RdpYHWnEAWGPVkajPmARVZMPUkCBQkJBQINgwaFPoeJi4GVlQ2Qc3VJBQcLV0ptfAMJBwdcIl+FYjALQgimoGNWIhAQZA4HXSpLMQ8PIgkOSHxAQhERPw7ASTSFyCMMDqBTJL8tf3y2fCEAIfkECQcAAAAsAAAAABgAGAAABa8gII4k0DRlmg6kYZCoOg5EDBDEaAi2jLO3nEkgkMEIL4BLpBAkVy3hCTAQKGAznM0AFNFGBAbj2cA9jQixcGZAGgECBu/9HnTp+FGjjezJFAwFBQwKe2Z+KoCChHmNjVMqA21nKQwJEJRlbnUFCQlFXlpeCWcGBUACCwlrdw8RKGImBwktdyMQEQciB7oACwcIeA4RVwAODiIGvHQKERAjxyMIB5QlVSTLYLZ0sW8hACH5BAkHAAAALAAAAAAYABgAAAW0ICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWPM5wNiV0UDUIBNkdoepTfMkA7thIECiyRtUAGq8fm2O4jIBgMBA1eAZ6Knx+gHaJR4QwdCMKBxEJRggFDGgQEREPjjAMBQUKIwIRDhBDC2QNDDEKoEkDoiMHDigICGkJBS2dDA6TAAnAEAkCdQ8ORQcHTAkLcQQODLPMIgIJaCWxJMIkPIoAt3EhACH5BAkHAAAALAAAAAAYABgAAAWtICCOJNA0ZZoOpGGQrDoOBCoSxNgQsQzgMZyIlvOJdi+AS2SoyXrK4umWHM5wNiV0UN3xdLiqr+mENcWpM9TIbrsBkEck8oC0DQqBQGGIz+t3eXtob0ZTPgNrIwQJDgtGAgwCWSIMDg4HiiUIDAxFAAoODwxDBWINCEGdSTQkCQcoegADBaQ6MggHjwAFBZUFCm0HB0kJCUy9bAYHCCPGIwqmRq0jySMGmj6yRiEAIfkECQcAAAAsAAAAABgAGAAABbIgII4k0DRlmg6kYZCsOg4EKhLE2BCxDOAxnIiW84l2L4BLZKipBopW8XRLDkeCiAMyMvQAA+uON4JEIo+vqukkKQ6RhLHplVGN+LyKcXA4Dgx5DWwGDXx+gIKENnqNdzIDaiMECwcFRgQCCowiCAcHCZIlCgICVgSfCEMMnA0CXaU2YSQFoQAKUQMMqjoyAglcAAyBAAIMRUYLCUkFlybDeAYJryLNk6xGNCTQXY0juHghACH5BAkHAAAALAAAAAAYABgAAAWzICCOJNA0ZVoOAmkY5KCSSgSNBDE2hDyLjohClBMNij8RJHIQvZwEVOpIekRQJyJs5AMoHA+GMbE1lnm9EcPhOHRnhpwUl3AsknHDm5RN+v8qCAkHBwkIfw1xBAYNgoSGiIqMgJQifZUjBhAJYj95ewIJCQV7KYpzBAkLLQADCHOtOpY5PgNlAAykAEUsQ1wzCgWdCIdeArczBQVbDJ0NAqyeBb64nQAGArBTt8R8mLuyPyEAOwAAAAAAAAAAAA=="},
JUs9:function(c,h,a){var f=a("G8ar");c.exports=function(a,b){return!(null==a||!a.length)&&-1<f(a,b,0)}},JyB8:function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});c=function(){function a(){this.holder={}}a.prototype.put=function(a,b){return this.holder&&b&&a?(this.holder[a]=b,!0):!1};a.prototype.get=function(a){return this.holder&&a&&this.holder[a]?this.holder[a]:null};a.prototype.contains=function(a){return!!(this.holder&&a&&0<=Object.keys(this.holder).indexOf(a))};a.prototype.remove=
function(a){this.holder&&a&&delete this.holder[a]};a.prototype.isEmpty=function(){if(this.holder){var a=Object.keys(this.holder);if(a&&Array.isArray(a))return 0===a.length}return!1};a.prototype.delegate=function(a){return a&&"function"===typeof a?a(this):null};a.prototype.values=function(){var a=this;return this.holder&&"object"===typeof this.holder?Object.keys(this.holder).map(function(b){return a.holder[b]}):[]};a.prototype.keys=function(){return this.holder&&"object"===typeof this.holder?Object.keys(this.holder):
[]};a.prototype.clear=function(){var a=this;this.holder&&"object"===typeof this.holder&&Object.keys(this.holder).forEach(function(b){return delete a.holder[b]})};a.prototype.updateBucketProperty=function(a,b,c,f){return(f=this.get(a))&&b?(f[b]=c,this.put(a,f),!0):!1};return a}();h.HolderUtil=c},K9Qf:function(c,h,a){function f(a){var b=d();return function(){var c=A()(a);if(b){var d=A()(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return m()(this,c)}}function d(){if("undefined"===
typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(L){return!1}}a.d(h,"b",function(){return F});a.d(h,"a",function(){return G});a.d(h,"c",function(){return H});c=a("Z60a");var b=a.n(c);c=a("C9uT");var w=a.n(c);c=a("BnCw");var D=a.n(c);c=a("j/rp");var q=a.n(c);c=a("T/v0");var m=a.n(c);c=a("tNLN");var A=a.n(c);c=a("KgVm");var u=a.n(c);c=a("P6Rp");var e=
a.n(c);c=a("moUy");a.n(c);var r=a("cuGy");"use strict";var t=a("7t+N");t.__orig="rmq";window.rmqJquery=t;window.jQuery&&(window.jQuery.__orig="own");var R=Object.freeze({MEDIA_OVERLAY_STATUS_CHANGED:"MediaOverlayStatusChanged",PAGINATION_CHANGED:"PaginationChanged",READER_VIEW_CREATED:"ReaderViewCreated",READER_VIEW_DESTROYED:"ReaderViewDestroyed",SETTINGS_APPLIED:"SettingsApplied"}),K=Object.freeze({CONTENT_DOCUMENT_LOADED:"ContentDocumentLoaded",CONTENT_DOCUMENT_LOAD_START:"ContentDocumentLoadStart",
CONTENT_DOCUMENT_UNLOADED:"ContentDocumentUnloaded",IFRAME_LOADED:"IframeLoaded",CURRENT_VIEW_PAGINATION_CHANGED:"CurrentViewPaginationChanged",FXL_VIEW_RESIZED:"FXLViewResized"}),N=Object.freeze({PAGE_EFFECT:1,UNKNOWN:2,SCROLL_EFFECT:4,name:function(a){if(a)switch(a){case 1:case "PAGE_EFFECT":return"PAGE_EFFECT";case 4:case "SCROLL_EFFECT":return"SCROLL_EFFECT"}return null}}),F=Object.freeze({NEW_CONTENT_FRAME_EVENT:"NEW_CONTENT_FRAME_EVENT",CONTENT_FRAME_UNLOADED_EVENT:"CONTENT_FRAME_UNLOADED_EVENT",
CONTENT_RELOADED_EVENT:"CONTENT_RELOADED_EVENT",VIEW_CREATED_EVENT:"VIEW_CREATED_EVENT",VIEW_DESTROYED_EVENT:"VIEW_DESTROYED_EVENT",eventNames:function(){return Object.keys(F)}}),G=function(a){function c(a,e){b()(this,c);e=d.call(this,e);e.id=(new Date).getMilliseconds();e._reader=a?a:null;e.settings=null;e.setViewerSettings(e._reader?e._reader.viewerSettings():null);e.currentView=null;e.currentViewType=N.name(e._reader?e._reader.getCurrentViewType():null);e.spineItems=[];e._setupReaderState();e.initSubscription();
return e}q()(c,a);var d=f(c);w()(c,[{key:"getMetadata",value:function(){return this._reader&&"function"===typeof this._reader.metadata?this._reader.metadata():null}},{key:"subscribe",value:function(a){D()(A()(c.prototype),"subscribe",this).call(this,a);this.currentView&&this.currentView.subscribe(a)}},{key:"unsubscribe",value:function(a){D()(A()(c.prototype),"unsubscribe",this).call(this,a);this.currentView&&this.currentView.unsubscribe(a)}},{key:"initSubscription",value:function(){if(this._reader){var a=
{ctx:this};this._reader.addListener(R.PAGINATION_CHANGED,this._handlePaginationChangedEvent,a,!1);this._reader.addListener(R.READER_VIEW_CREATED,this._handleReaderViewCreatedEvent,a,!1);this._reader.addListener(R.READER_VIEW_DESTROYED,this._handleReaderViewDestroyedEvent,a,!1);this._reader.addListener(R.SETTINGS_APPLIED,this._handleSettingsAppliedEvent,a,!1);this._reader.addListener(K.CONTENT_DOCUMENT_LOADED,this._handleContentDocumentLoadedEvent,a,!1);this._reader.addListener(K.CURRENT_VIEW_PAGINATION_CHANGED,
this._handleCurrentViewPaginationChangedEvent,a,!1)}}},{key:"_handlePaginationChangedEvent",value:function(a){this.ctx._setupReaderState()}},{key:"_setupReaderState",value:function(){this&&this._reader&&this.spineItems&&Array.isArray(this.spineItems)&&0===this.spineItems.length&&this._setSpineItems(this._reader.spine());this&&!this.currentView&&this._initCurrentView()}},{key:"_initCurrentView",value:function(){if(this&&this._reader&&this.currentView){this.currentView.destroy();this.currentView=null;
var a=this._reader.getCurrentView();if(a)return this._setCurrentView(a),!0}else if(this&&this._reader&&!this.currentView&&(a=this._reader.getCurrentView()))return this._setCurrentView(a),!0;return!1}},{key:"_setSpineItems",value:function(a){a&&a.items&&Array.isArray(a.items)?this.spineItems=a.items.map(function(a){return H.of(a)}):this.spineItems=[]}},{key:"_handleReaderViewCreatedEvent",value:function(a){Object(r.debug)(a);var b=this.ctx;b&&(b.currentViewType=N.name(a),b.notifyAll(F.VIEW_CREATED_EVENT,
b.currentViewType))}},{key:"_handleReaderViewDestroyedEvent",value:function(){var a=this.ctx;a&&(a.currentViewType=null);a&&a.currentView&&(a.currentView.destroy(),a.currentView=null,a.notifyAll(F.VIEW_DESTROYED_EVENT,{}))}},{key:"_handleSettingsAppliedEvent",value:function(){var a=this.ctx;a&&a.setViewerSettings(a._reader?a._reader.viewerSettings():null)}},{key:"_handleContentDocumentLoadedEvent",value:function(a,b){}},{key:"_handleCurrentViewPaginationChangedEvent",value:function(a){}},{key:"_setCurrentView",
value:function(a){this.currentView=a?v.of(a,this):null}},{key:"updateCurrentView",value:function(){this.currentView&&this.currentView.update()}},{key:"scrollToElement",value:function(a,b){this._reader.openSpineItemElementId(b.idref,a,this)}},{key:"openSpineItemPage",value:function(a,b){(a=this._reader.openSpineItemPage(a,0,b))&&this.updateCurrentView();return a}},{key:"openPageIndex",value:function(a){return this._reader.openPageIndex(a)}},{key:"getViewScale",value:function(){return this._reader?
this._reader.getViewScale():null}},{key:"getLoadedSpineItems",value:function(){return this._reader.getLoadedSpineItems()}},{key:"setViewerSettings",value:function(a){this.settings=a?I.of(this._reader.viewerSettings()):null}}]);return c}(c.Subject),I=function(){function a(c){b()(this,a);this._settings=c?c:null;this.columnGap=c&&0<=c.columnGap?c.columnGap:null;this.columnMaxWidth=c&&0<=c.columnMaxWidth?c.columnMaxWidth:null;this.columnMinWidth=c&&0<=c.columnMinWidth?c.columnMinWidth:null;this.fontSelection=
c&&0<=c.fontSelection?c.fontSelection:null;this.fontSize=c&&0<=c.fontSize?c.fontSize:null;this.pageTransition=c&&-10<=c.pageTransition?c.pageTransition:null;this.scroll=c&&c.scroll?c.scroll:null}w()(a,[{key:"update",value:function(a){this._settings&&this._settings.update(a)}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),B=function(){function a(c,d){b()(this,a);this._$iframe=c?c:null;this.iLoadUri=c&&c[0]&&c[0].dataset&&(c[0].dataset.loaduri||c[0].dataset.src);this.iLoadUri||(this.iLoadUri=
c&&c.dataset&&(c.dataset.loaduri||c.dataset.src));this.sHref=d&&d.href?d.href:null;this.src=(c.data&&"function"===typeof c.data?c:t(c)).data("src");c=this.src.split("/");d=c.indexOf("ops");(this.srcBase=1<d?c[d-1]:c[0])&&this.srcBase.endsWith(".epub")&&(this.srcBase=this.srcBase.substring(0,this.srcBase.length-5));this._$iframe&&this._$iframe[0]&&(c=this._$iframe[0].getAttribute("src"))&&((c=c.split("/"))&&Array.isArray(c)&&0<c.length?this.blobSrc=c[c.length-1]:this.blobSrc=null)}w()(a,[{key:"postMessage",
value:function(a,b){var c=this._$iframe&&this._$iframe[0]&&this._$iframe[0].contentWindow?this._$iframe[0]:this._$iframe;Object(r.debug)("CONTENT FRAME POST MESSAGE:",this);c.contentWindow&&c.contentWindow.postMessage(a,b)}}],[{key:"of",value:function(b,c){return new a(b,c)}}]);return a}(),v=function(a){function c(a,e){b()(this,c);var g=d.call(this,e.observers);g._view=a?a:null;g.delegate=e;g.paginationInfo=null;g.setPaginationInfo(g._view?g._view.getPaginationInfo():null);g.loadedSpineItems=[];g.setLoadedSpineItems(g._view?
g._view.getLoadedSpineItems():[]);g.contentFrames=[];g.initContentFramesCollection();g.initSubscriptions();return g}q()(c,a);var d=f(c);w()(c,[{key:"initContentFramesCollection",value:function(){var a=this;if(this.paginationInfo&&this.paginationInfo.openPages){var b=this.loadedSpineItems.filter(function(b){return a.paginationInfo.openPages.find(function(a){return b.idref===a.idref&&b.index===a.spineItemIndex&&0<a.spineItemPageCount})});b=this._findInstalledContentFrames(b);this&&b&&Array.isArray(b)&&
b.forEach(function(b){return a.addContentFrame(b)})}}},{key:"update",value:function(){this.setPaginationInfo(this._view?this._view.getPaginationInfo():null);this.setLoadedSpineItems(this._view?this._view.getLoadedSpineItems():[]);this._removeUnloadedContentFrames(this.loadedSpineItems)}},{key:"isLoaded",value:function(a){return!!a&&!!this.loadedSpineItems.find(function(b){return b.idref===a.idref&&b.index===a.index})}},{key:"_findInstalledContentFrames",value:function(a){var b=[],c=t("#epub-reader-container").find("iframe");
if(c&&a&&Array.isArray(a))for(var d=0;d<c.length;d++){var e=c[d];e&&e&&e.dataset&&function(){var c=e.dataset.loaduri||e.dataset.src,d=a.find(function(a){return c&&0<=c.indexOf(a.href)});e&&d&&b.push(B.of(t(e),H.of(d)))}()}return b}},{key:"initSubscriptions",value:function(){if(this._view){var a={ctx:this};this._view.addListener(K.CONTENT_DOCUMENT_LOADED,this._handleContentDocumentLoadedEvent,a,!1);this._view.addListener(K.CONTENT_DOCUMENT_LOAD_START,this._handleContentDocumentLoadStartEvent,a,!1);
this._view.addListener(K.CONTENT_DOCUMENT_UNLOADED,this._handleContentDocumentUnloadedEvent,a,!1);this._view.addListener(K.IFRAME_LOADED,this._handleIframeLoadedEvent,a,!1);this._view.addListener(K.CURRENT_VIEW_PAGINATION_CHANGED,this._handleCurrentViewPaginationChangedEvent,a,!1);this._view.addListener(K.FXL_VIEW_RESIZED,this._handleFXLViewResizedEvent,a,!1)}}},{key:"removeSubscriptions",value:function(){if(this._view){var a={ctx:this};this._view.removeListener(K.CONTENT_DOCUMENT_LOADED,this._handleContentDocumentLoadedEvent,
a,!1);this._view.removeListener(K.CONTENT_DOCUMENT_LOAD_START,this._handleContentDocumentLoadStartEvent,a,!1);this._view.removeListener(K.CONTENT_DOCUMENT_UNLOADED,this._handleContentDocumentUnloadedEvent,a,!1);this._view.removeListener(K.IFRAME_LOADED,this._handleIframeLoadedEvent,a,!1);this._view.removeListener(K.CURRENT_VIEW_PAGINATION_CHANGED,this._handleCurrentViewPaginationChangedEvent,a,!1);this._view.removeListener(K.FXL_VIEW_RESIZED,this._handleFXLViewResizedEvent,a,!1)}}},{key:"destroy",
value:function(){this.removeSubscriptions();this.paginationInfo=null;this.loadedSpineItems=[];this._removeUnloadedContentFrames(this.loadedSpineItems);this.contentFrames=[];this.delegate=this._view=null;this.unsubscribeAll()}},{key:"addContentFrame",value:function(a){if(a&&a._$iframe&&a._$iframe[0]&&a._$iframe[0].contentWindow&&this.contentFrames&&Array.isArray(this.contentFrames)){var b=u()(this.contentFrames,function(b){return b.iLoadUri&&a.iLoadUri&&b.iLoadUri===a.iLoadUri||b.sHref&&a.sHref&&b.sHref===
a.sHref});0<=b&&(this.contentFrames.splice(b,1),this.notifyAll(F.CONTENT_FRAME_UNLOADED_EVENT,a.sHref));this.contentFrames.push(a);(b=this.loadedSpineItems.find(function(b){return b.href===a.sHref}))||(b=this.delegate.spineItems.find(function(b){return b.href===a.sHref}));Object(r.debug)("Reader util : adding new content frame ["+a.sHref+"]");this.notifyAll(F.NEW_CONTENT_FRAME_EVENT,{contentFrame:a,spineOfFrame:b});return!0}return!1}},{key:"_removeUnloadedContentFrames",value:function(a){var b=this,
c=[];a&&Array.isArray(a)&&(a.forEach(function(a){var d=u()(b.contentFrames,function(b){return b.sHref===a.href});0<=d&&c.push(b.contentFrames[d])}),e()(this.contentFrames,c,function(a,b){return a.sHref===b.sHref}).forEach(function(a){Object(r.debug)("Reader util : removing content frame ["+a.sHref+"]");b.notifyAll(F.CONTENT_FRAME_UNLOADED_EVENT,a.sHref)}));this.contentFrames=c}},{key:"_handleContentDocumentLoadedEvent",value:function(a,b){var c=this.ctx;c&&(c.update(),c.addContentFrame(B.of(a,b)))}},
{key:"_handleContentDocumentLoadStartEvent",value:function(a,b){if(a=this.ctx){b=Object.assign({},a.paginationInfo);a.update();var c=Object.assign({},a.paginationInfo);a.notifyAll(F.CONTENT_RELOADED_EVENT,{prev:b,"new":c})}}},{key:"_handleContentDocumentUnloadedEvent",value:function(a,b){}},{key:"_handleIframeLoadedEvent",value:function(a,b){}},{key:"_handleCurrentViewPaginationChangedEvent",value:function(a){(a=this.ctx)&&a.update()}},{key:"_handleFXLViewResizedEvent",value:function(a,b,c){Object(r.debug)(a,
b,c)}},{key:"setPaginationInfo",value:function(a){this.paginationInfo=a?Y.of(a):null}},{key:"setLoadedSpineItems",value:function(a){this.loadedSpineItems=a&&Array.isArray(a)&&this.loadedSpineItems&&Array.isArray(this.loadedSpineItems)?a.map(function(a){return H.of(a)}):[]}}],[{key:"of",value:function(a,b){return new c(a,b)}}]);return c}(c.Subject),H=function(){function a(c){b()(this,a);this._spineItem=c?c:null;this.href=c&&c.href?c.href:null;this.idref=c&&c.idref?c.idref:null;this.index=c&&0<=c.index?
c.index:null;this.page_spread=c&&c.page_spread?c.page_spread:null;this.paginationInfo=c&&c.paginationInfo?T.of(c.paginationInfo):null}w()(a,[{key:"isCenterPage",value:function(){return this._spineItem.isCenterPage()}},{key:"isFixedLayout",value:function(){return this._spineItem.isFixedLayout()}},{key:"isFlowScrolledContinuous",value:function(){return this._spineItem.isFlowScrolledContinuous()}},{key:"isFlowScrolledDoc",value:function(){return this._spineItem.isFlowScrolledDoc()}},{key:"isLeftPage",
value:function(){return this._spineItem.isLeftPage()}},{key:"isReflowable",value:function(){return this._spineItem.isReflowable()}},{key:"isRightPage",value:function(){return this._spineItem.isRightPage()}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),T=function(){function a(c){b()(this,a);this.columnCount=c&&0<=c.columnCount?c.columnCount:null;this.columnGap=c&&0<=c.columnGap?c.columnGap:null;this.columnMaxWidth=c&&0<=c.columnMaxWidth?c.columnMaxWidth:null;this.columnMinWidth=c&&
0<=c.columnMinWidth?c.columnMinWidth:null;this.columnWidth=c&&0<=c.columnWidth?c.columnWidth:null;this.currentPageIndex=c&&0<=c.currentPageIndex?c.currentPageIndex:null;this.currentSpreadIndex=c&&0<=c.currentSpreadIndex?c.currentSpreadIndex:null;this.isVerticalWritingMode=c&&c.isVerticalWritingMode?!0:!1;this.pageOffset=c&&0<=c.pageOffset?c.pageOffset:null;this.rightToLeft=c&&c.rightToLeft?c.rightToLeft:!1;this.spreadCount=c&&0<=c.spreadCount?c.spreadCount:null;this.visibleColumnCount=c&&0<=c.visibleColumnCount?
c.visibleColumnCount:null}w()(a,null,[{key:"of",value:function(b){return new a(b)}}]);return a}(),Y=function(){function a(c){b()(this,a);this._viewPaginationInfo=c?c:null;this.spineItemCount=c&&0<=c.spineItemCount?c.spineItemCount:null;this.isFixedLayout=!c||!1!==c.isFixedLayout&&!0!==c.isFixedLayout?null:c.isFixedLayout;this.isRightToLeft=!c||!1!==c.isRightToLeft&&!0!==c.isRightToLeft?null:c.isRightToLeft;this.openPages=this._extractPages(c&&c.openPages?c.openPages:null)}w()(a,[{key:"addOpenPage",
value:function(a,b,c,d){return this._viewPaginationInfo.addOpenPage(a,b,c,d)}},{key:"canGoLeft",value:function(){return this._viewPaginationInfo.canGoLeft()}},{key:"canGoNext",value:function(){return this._viewPaginationInfo.canGoNext()}},{key:"canGoPrev",value:function(){return this._viewPaginationInfo.canGoPrev()}},{key:"canGoRight",value:function(){return this._viewPaginationInfo.canGoRight()}},{key:"_extractPages",value:function(a){var b=[];a&&Array.isArray(a)&&a.forEach(function(a){b.push(P.of(a))});
return b}}],[{key:"of",value:function(b){return new a(b)}}]);return a}(),P=function(){function a(c){b()(this,a);this.idref=c&&c.idref?c.idref:null;this.spineItemIndex=c&&0<=c.spineItemIndex?c.spineItemIndex:null;this.spineItemPageCount=c&&0<=c.spineItemPageCount?c.spineItemPageCount:null;this.spineItemPageIndex=c&&0<=c.spineItemPageIndex?c.spineItemPageIndex:null}w()(a,null,[{key:"of",value:function(b){return new a(b)}}]);return a}()},KGqH:function(c,h){var a=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]?|[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g;
c.exports=function(c){return c.match(a)||[]}},Kzd6:function(c,h,a){var f=a("qwTf");c.exports=function(a){var b=new a.constructor(a.byteLength);(new f(b)).set(new f(a));return b}},L6bb:function(c,h,a){(function(){var f=a("95Qu"),d=a("iFDI").utf8,b=a("Re3r"),h=a("iFDI").bin,D=function(a,c){a.constructor==String?a=c&&"binary"===c.encoding?h.stringToBytes(a):d.stringToBytes(a):b(a)?a=Array.prototype.slice.call(a,0):Array.isArray(a)||a.constructor===Uint8Array||(a=a.toString());c=f.bytesToWords(a);var q=
8*a.length;a=1732584193;for(var m=-271733879,e=-1732584194,r=271733878,t=0;t<c.length;t++)c[t]=(c[t]<<8|c[t]>>>24)&16711935|(c[t]<<24|c[t]>>>8)&4278255360;c[q>>>5]|=128<<q%32;c[(q+64>>>9<<4)+14]=q;q=D._ff;var w=D._gg,K=D._hh,N=D._ii;for(t=0;t<c.length;t+=16){var F=a,G=m,I=e,B=r;a=q(a,m,e,r,c[t+0],7,-680876936);r=q(r,a,m,e,c[t+1],12,-389564586);e=q(e,r,a,m,c[t+2],17,606105819);m=q(m,e,r,a,c[t+3],22,-1044525330);a=q(a,m,e,r,c[t+4],7,-176418897);r=q(r,a,m,e,c[t+5],12,1200080426);e=q(e,r,a,m,c[t+6],17,
-1473231341);m=q(m,e,r,a,c[t+7],22,-45705983);a=q(a,m,e,r,c[t+8],7,1770035416);r=q(r,a,m,e,c[t+9],12,-1958414417);e=q(e,r,a,m,c[t+10],17,-42063);m=q(m,e,r,a,c[t+11],22,-1990404162);a=q(a,m,e,r,c[t+12],7,1804603682);r=q(r,a,m,e,c[t+13],12,-40341101);e=q(e,r,a,m,c[t+14],17,-1502002290);m=q(m,e,r,a,c[t+15],22,1236535329);a=w(a,m,e,r,c[t+1],5,-165796510);r=w(r,a,m,e,c[t+6],9,-1069501632);e=w(e,r,a,m,c[t+11],14,643717713);m=w(m,e,r,a,c[t+0],20,-373897302);a=w(a,m,e,r,c[t+5],5,-701558691);r=w(r,a,m,e,c[t+
10],9,38016083);e=w(e,r,a,m,c[t+15],14,-660478335);m=w(m,e,r,a,c[t+4],20,-405537848);a=w(a,m,e,r,c[t+9],5,568446438);r=w(r,a,m,e,c[t+14],9,-1019803690);e=w(e,r,a,m,c[t+3],14,-187363961);m=w(m,e,r,a,c[t+8],20,1163531501);a=w(a,m,e,r,c[t+13],5,-1444681467);r=w(r,a,m,e,c[t+2],9,-51403784);e=w(e,r,a,m,c[t+7],14,1735328473);m=w(m,e,r,a,c[t+12],20,-1926607734);a=K(a,m,e,r,c[t+5],4,-378558);r=K(r,a,m,e,c[t+8],11,-2022574463);e=K(e,r,a,m,c[t+11],16,1839030562);m=K(m,e,r,a,c[t+14],23,-35309556);a=K(a,m,e,
r,c[t+1],4,-1530992060);r=K(r,a,m,e,c[t+4],11,1272893353);e=K(e,r,a,m,c[t+7],16,-155497632);m=K(m,e,r,a,c[t+10],23,-1094730640);a=K(a,m,e,r,c[t+13],4,681279174);r=K(r,a,m,e,c[t+0],11,-358537222);e=K(e,r,a,m,c[t+3],16,-722521979);m=K(m,e,r,a,c[t+6],23,76029189);a=K(a,m,e,r,c[t+9],4,-640364487);r=K(r,a,m,e,c[t+12],11,-421815835);e=K(e,r,a,m,c[t+15],16,530742520);m=K(m,e,r,a,c[t+2],23,-995338651);a=N(a,m,e,r,c[t+0],6,-198630844);r=N(r,a,m,e,c[t+7],10,1126891415);e=N(e,r,a,m,c[t+14],15,-1416354905);m=
N(m,e,r,a,c[t+5],21,-57434055);a=N(a,m,e,r,c[t+12],6,1700485571);r=N(r,a,m,e,c[t+3],10,-1894986606);e=N(e,r,a,m,c[t+10],15,-1051523);m=N(m,e,r,a,c[t+1],21,-2054922799);a=N(a,m,e,r,c[t+8],6,1873313359);r=N(r,a,m,e,c[t+15],10,-30611744);e=N(e,r,a,m,c[t+6],15,-1560198380);m=N(m,e,r,a,c[t+13],21,1309151649);a=N(a,m,e,r,c[t+4],6,-145523070);r=N(r,a,m,e,c[t+11],10,-1120210379);e=N(e,r,a,m,c[t+2],15,718787259);m=N(m,e,r,a,c[t+9],21,-343485551);a=a+F>>>0;m=m+G>>>0;e=e+I>>>0;r=r+B>>>0}return f.endian([a,m,
e,r])};D._ff=function(a,b,c,d,e,f,h){a=a+(b&c|~b&d)+(e>>>0)+h;return(a<<f|a>>>32-f)+b};D._gg=function(a,b,c,d,e,f,h){a=a+(b&d|c&~d)+(e>>>0)+h;return(a<<f|a>>>32-f)+b};D._hh=function(a,b,c,d,e,f,h){a=a+(b^c^d)+(e>>>0)+h;return(a<<f|a>>>32-f)+b};D._ii=function(a,b,c,d,e,f,h){a=a+(c^(b|~d))+(e>>>0)+h;return(a<<f|a>>>32-f)+b};D._blocksize=16;D._digestsize=16;c.exports=function(a,b){if(void 0===a||null===a)throw Error("Illegal argument "+a);a=f.wordsToBytes(D(a,b));return b&&b.asBytes?a:b&&b.asString?
h.bytesToString(a):f.bytesToHex(a)}})()},L8MQ:function(c,h,a){var f=a("ktnU"),d=a("ktak");c.exports=function(a){return null==a?[]:f(a,d(a))}},LoU7:function(c,h,a){(function(a){(function(){function a(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&
!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function b(a){return"string"==typeof a}function f(a,b,c){return a.call.apply(a.bind,arguments)}function h(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=
Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:h;return q.apply(null,arguments)}function m(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function A(a){function b(){}var c=wa;b.prototype=c.prototype;a.G=c.prototype;
a.prototype=new b;a.prototype.constructor=a;a.F=function(a,b,d){for(var n=Array(arguments.length-2),k=2;k<arguments.length;k++)n[k-2]=arguments[k];return c.prototype[b].apply(a,n)}}function u(a,b){return-1!=a.indexOf(b)}function e(a,b){return a<b?-1:a>b?1:0}function r(a,c){a:{var d=a.length;for(var n=b(a)?a.split(""):a,k=0;k<d;k++)if(k in n&&c.call(void 0,n[k],k,a)){d=k;break a}d=-1}return 0>d?null:b(a)?a.charAt(d):a[d]}function t(a){return Array.prototype.concat.apply(Array.prototype,arguments)}
function R(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function K(){var a=Na.document;return a?a.documentMode:void 0}function N(a){if(!eb[a]){for(var b=0,c=cb(String(tb)).split("."),d=cb(String(a)).split("."),n=Math.max(c.length,d.length),k=0;0==b&&k<n;k++){var g=c[k]||"",f=d[k]||"",l=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var q=l.exec(g)||["","",""],h=m.exec(f)||["","",""];if(0==q[0].length&&0==h[0].length)break;b=e(0==q[1].length?0:parseInt(q[1],
10),0==h[1].length?0:parseInt(h[1],10))||e(0==q[2].length,0==h[2].length)||e(q[2],h[2])}while(0==b)}eb[a]=0<=b}}function F(a,b,c,d){this.a=a;this.nodeName=c;this.nodeValue=d;this.nodeType=2;this.parentNode=this.ownerElement=b}function G(a,b){var c=da&&"href"==b.nodeName?a.getAttribute(b.nodeName,2):b.nodeValue;return new F(b,a,b.nodeName,c)}function I(a){var b=null,c=a.nodeType;1==c&&(b=a.textContent,b=void 0==b||null==b?a.innerText:b,b=void 0==b||null==b?"":b);if("string"!=typeof b)if(Pa&&"title"==
a.nodeName.toLowerCase()&&1==c)b=a.text;else if(9==c||1==c){a=9==c?a.documentElement:a.firstChild;c=0;var d=[];for(b="";a;){do 1!=a.nodeType&&(b+=a.nodeValue),Pa&&"title"==a.nodeName.toLowerCase()&&(b+=a.text),d[c++]=a;while(a=a.firstChild);for(;c&&!(a=d[--c].nextSibling););}}else b=a.nodeValue;return""+b}function B(a,b,c){if(null===b)return!0;try{if(!a.getAttribute)return!1}catch(Kb){return!1}da&&"class"==b&&(b="className");return null==c?!!a.getAttribute(b):a.getAttribute(b,2)==c}function v(a,c,
d,k,e){return(Pa?H:T).call(null,a,c,b(d)?d:null,b(k)?k:null,e||new J)}function H(a,b,c,d,k){if(a instanceof Ya||8==a.b||c&&null===a.b){var n=b.all;if(!n)return k;a=U(a);if("*"!=a&&(n=b.getElementsByTagName(a),!n))return k;if(c){for(var e=[],g=0;b=n[g++];)B(b,c,d)&&e.push(b);n=e}for(g=0;b=n[g++];)"*"==a&&"!"==b.tagName||x(k,b);return k}L(a,b,c,d,k);return k}function T(a,b,c,d,k){b.getElementsByName&&d&&"name"==c&&!ma?(b=b.getElementsByName(d),Ca(b,function(b){a.a(b)&&x(k,b)})):b.getElementsByClassName&&
d&&"class"==c?(b=b.getElementsByClassName(d),Ca(b,function(b){b.className==d&&a.a(b)&&x(k,b)})):a instanceof Ma?L(a,b,c,d,k):b.getElementsByTagName&&(b=b.getElementsByTagName(a.f()),Ca(b,function(a){B(a,c,d)&&x(k,a)}));return k}function Y(a,b,c,d,k){var n;if((a instanceof Ya||8==a.b||c&&null===a.b)&&(n=b.childNodes)){var e=U(a);if("*"!=e&&(n=db(n,function(a){return a.tagName&&a.tagName.toLowerCase()==e}),!n))return k;c&&(n=db(n,function(a){return B(a,c,d)}));Ca(n,function(a){"*"==e&&("!"==a.tagName||
"*"==e&&1!=a.nodeType)||x(k,a)});return k}return P(a,b,c,d,k)}function P(a,b,c,d,k){for(b=b.firstChild;b;b=b.nextSibling)B(b,c,d)&&a.a(b)&&x(k,b);return k}function L(a,b,c,d,k){for(b=b.firstChild;b;b=b.nextSibling)B(b,c,d)&&a.a(b)&&x(k,b),L(a,b,c,d,k)}function U(a){if(a instanceof Ma){if(8==a.b)return"!";if(null===a.b)return"*"}return a.f()}function ka(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&
16);for(;b&&a!=b;)b=b.parentNode;return b==a}function g(a,b){if(a==b)return 0;if(a.compareDocumentPosition)return a.compareDocumentPosition(b)&2?1:-1;if(ma&&!(9<=Number(Ja))){if(9==a.nodeType)return-1;if(9==b.nodeType)return 1}if("sourceIndex"in a||a.parentNode&&"sourceIndex"in a.parentNode){var c=1==a.nodeType,d=1==b.nodeType;if(c&&d)return a.sourceIndex-b.sourceIndex;var n=a.parentNode,k=b.parentNode;return n==k?ia(a,b):!c&&ka(n,b)?-1*V(a,b):!d&&ka(k,a)?V(b,a):(c?a.sourceIndex:n.sourceIndex)-(d?
b.sourceIndex:k.sourceIndex)}d=9==a.nodeType?a:a.ownerDocument||a.document;c=d.createRange();c.selectNode(a);c.collapse(!0);d=d.createRange();d.selectNode(b);d.collapse(!0);return c.compareBoundaryPoints(Na.Range.START_TO_END,d)}function V(a,b){var c=a.parentNode;if(c==b)return-1;for(;b.parentNode!=c;)b=b.parentNode;return ia(b,a)}function ia(a,b){for(;b=b.previousSibling;)if(b==a)return-1;return 1}function J(){this.b=this.a=null;this.l=0}function ra(a){this.node=a;this.a=this.b=null}function ha(a,
b){if(!a.a)return b;if(!b.a)return a;var c=a.a;b=b.a;for(var d=null,n,k=0;c&&b;){n=c.node;var e=b.node;n==e||n instanceof F&&e instanceof F&&n.a==e.a?(n=c,c=c.a,b=b.a):0<g(c.node,b.node)?(n=b,b=b.a):(n=c,c=c.a);(n.b=d)?d.a=n:a.a=n;d=n;k++}for(n=c||b;n;)n.b=d,d=d.a=n,k++,n=n.a;a.b=d;a.l=k;return a}function ja(a,b){b=new ra(b);b.a=a.a;a.b?a.a.b=b:a.a=a.b=b;a.a=b;a.l++}function x(a,b){b=new ra(b);b.b=a.b;a.a?a.b.a=b:a.a=a.b=b;a.b=b;a.l++}function z(a){return(a=a.a)?a.node:null}function pa(a){return(a=
z(a))?I(a):""}function fa(a,b){return new Ia(a,!!b)}function Ia(a,b){this.f=a;this.b=(this.c=b)?a.b:a.a;this.a=null}function M(a){var b=a.b;if(null==b)return null;var c=a.a=b;a.b=a.c?b.b:b.a;return c.node}function wa(a){this.i=a;this.b=this.g=!1;this.f=null}function ca(a){return"\n  "+a.toString().split("\n").join("\n  ")}function nb(a,b){a.g=b}function ob(a,b){a.b=b}function na(a,b){a=a.a(b);return a instanceof J?+pa(a):+a}function ta(a,b){a=a.a(b);return a instanceof J?pa(a):""+a}function Aa(a,
b){a=a.a(b);return a instanceof J?!!a.l:!!a}function qa(a,b,c){wa.call(this,a.i);this.c=a;this.h=b;this.o=c;this.g=b.g||c.g;this.b=b.b||c.b;this.c==Ob&&(c.b||c.g||4==c.i||0==c.i||!b.f?b.b||b.g||4==b.i||0==b.i||!c.f||(this.f={name:c.f.name,s:b}):this.f={name:b.f.name,s:c})}function za(a,b,c,d,k){b=b.a(d);c=c.a(d);var n;if(b instanceof J&&c instanceof J){b=fa(b);for(d=M(b);d;d=M(b))for(k=fa(c),n=M(k);n;n=M(k))if(a(I(d),I(n)))return!0;return!1}if(b instanceof J||c instanceof J){b instanceof J?(k=b,d=
c):(k=c,d=b);n=fa(k);for(var e=typeof d,g=M(n);g;g=M(n)){switch(e){case "number":g=+I(g);break;case "boolean":g=!!I(g);break;case "string":g=I(g);break;default:throw Error("Illegal primitive type for comparison.");}if(k==b&&a(g,d)||k==c&&a(d,g))return!0}return!1}return k?"boolean"==typeof b||"boolean"==typeof c?a(!!b,!!c):"number"==typeof b||"number"==typeof c?a(+b,+c):a(b,c):a(+b,+c)}function E(a,b,c,d){this.a=a;this.w=b;this.i=c;this.m=d}function ua(a,b,c,d){if(Lb.hasOwnProperty(a))throw Error("Binary operator already created: "+
a);a=new E(a,b,c,d);return Lb[a.toString()]=a}function va(a,b,c){this.a=a;this.b=b||1;this.f=c||1}function Va(a,b){if(b.a.length&&4!=a.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");wa.call(this,a.i);this.c=a;this.h=b;this.g=a.g;this.b=a.b}function Wa(a,b){if(b.length<a.A)throw Error("Function "+a.j+" expects at least"+a.A+" arguments, "+b.length+" given");if(null!==a.v&&b.length>a.v)throw Error("Function "+a.j+" expects at most "+a.v+" arguments, "+b.length+
" given");a.B&&Ca(b,function(b,c){if(4!=b.i)throw Error("Argument "+c+" to function "+a.j+" is not of type Nodeset: "+b);});wa.call(this,a.i);this.h=a;this.c=b;nb(this,a.g||Ra(b,function(a){return a.g}));ob(this,a.D&&!b.length||a.C&&!!b.length||Ra(b,function(a){return a.b}))}function vb(a,b,c,d,k,e,g,f,l){this.j=a;this.i=b;this.g=c;this.D=d;this.C=k;this.m=e;this.A=g;this.v=void 0!==f?f:g;this.B=!!l}function ea(a,b,c,d,k,e,g,f){if(Mb.hasOwnProperty(a))throw Error("Function already created: "+a+".");
Mb[a]=new vb(a,b,c,d,!1,k,e,g,f)}function Ma(a,b){this.h=a;this.c=void 0!==b?b:null;this.b=null;switch(a){case "comment":this.b=8;break;case "text":this.b=3;break;case "processing-instruction":this.b=7;break;case "node":break;default:throw Error("Unexpected argument");}}function Ba(a){return"comment"==a||"text"==a||"processing-instruction"==a||"node"==a}function wb(a){this.b=a;this.a=0}function Xa(a){a=a.match(Pb);for(var b=0;b<a.length;b++)Db.test(a[b])&&a.splice(b,1);return new wb(a)}function aa(a,
b){return a.b[a.a+(b||0)]}function la(a){return a.b[a.a++]}function fb(a){return a.b.length<=a.a}function Sa(a){wa.call(this,3);this.c=a.substring(1,a.length-1)}function Ya(a,b){this.j=a.toLowerCase();a="*"==this.j?"*":"http://www.w3.org/1999/xhtml";this.c=b?b.toLowerCase():a}function Za(a,b){wa.call(this,a.i);this.h=a;this.c=b;this.g=a.g;this.b=a.b;1==this.c.length&&(a=this.c[0],a.u||a.c!=Qb||(a=a.o,"*"!=a.f()&&(this.f={name:a.f(),s:null})))}function Ea(){wa.call(this,4)}function O(){wa.call(this,
4)}function ba(a){return"/"==a||"//"==a}function W(a){wa.call(this,4);this.c=a;nb(this,Ra(this.c,function(a){return a.g}));ob(this,Ra(this.c,function(a){return a.b}))}function Fa(a,b){this.a=a;this.b=!!b}function X(a,b,c){for(c=c||0;c<a.a.length;c++)for(var d=a.a[c],k=fa(b),e=b.l,n,g=0;n=M(k);g++){var f=a.b?e-g:g+1;n=d.a(new va(n,f,e));if("number"==typeof n)f=f==n;else if("string"==typeof n||"boolean"==typeof n)f=!!n;else if(n instanceof J)f=0<n.l;else throw Error("Predicate.evaluate returned an unexpected type.");
if(!f){f=k;n=f.f;var l=f.a;if(!l)throw Error("Next must be called at least once before remove.");var m=l.b;l=l.a;m?m.a=l:n.a=l;l?l.b=m:n.b=m;n.l--;f.a=null}}return b}function $a(a,b,c,d){wa.call(this,4);this.c=a;this.o=b;this.h=c||new Fa([]);this.u=!!d;b=this.h;b=0<b.a.length?b.a[0].f:null;a.b&&b&&(a=b.name,a=Pa?a.toLowerCase():a,this.f={name:a,s:b.s});a:{a=this.h;for(b=0;b<a.a.length;b++)if(c=a.a[b],c.g||1==c.i||0==c.i){a=!0;break a}a=!1}this.g=a}function l(a,b,c,d){this.j=a;this.f=b;this.a=c;this.b=
d}function xa(a,b,c,d){if(Cb.hasOwnProperty(a))throw Error("Axis already created: "+a);b=new l(a,b,c,!!d);return Cb[a]=b}function Qa(a){wa.call(this,1);this.c=a;this.g=a.g;this.b=a.b}function ab(a){wa.call(this,1);this.c=a}function Ta(a,b){this.a=a;this.b=b}function pb(a){for(var b,c=[];;){Ha(a,"Missing right hand side of binary expression.");b=La(a);var d=la(a.a);if(!d)break;var k=(d=Lb[d]||null)&&d.w;if(!k){a.a.a--;break}for(;c.length&&k<=c[c.length-1].w;)b=new qa(c.pop(),c.pop(),b);c.push(b,d)}for(;c.length;)b=
new qa(c.pop(),c.pop(),b);return b}function Ha(a,b){if(fb(a.a))throw Error(b);}function xb(a,b){a=la(a.a);if(a!=b)throw Error("Bad token, expected: "+b+" got: "+a);}function qb(a){a=la(a.a);if(")"!=a)throw Error("Bad token: "+a);}function Fb(a){a=la(a.a);if(2>a.length)throw Error("Unclosed literal string");return new Sa(a)}function Ga(a){var b=[];if(ba(aa(a.a))){var c=la(a.a);var d=aa(a.a);if("/"==c&&(fb(a.a)||"."!=d&&".."!=d&&"@"!=d&&"*"!=d&&!/(?![0-9])[\w]/.test(d)))return new Ea;d=new Ea;Ha(a,
"Missing next location step.");c=kb(a,c);b.push(c)}else{a:{c=aa(a.a);d=c.charAt(0);switch(d){case "$":throw Error("Variable reference not allowed in HTML XPath");case "(":la(a.a);c=pb(a);Ha(a,'unclosed "("');xb(a,")");break;case '"':case "'":c=Fb(a);break;default:if(isNaN(+c))if(!Ba(c)&&/(?![0-9])[\w]/.test(d)&&"("==aa(a.a,1)){c=la(a.a);c=Mb[c]||null;la(a.a);for(d=[];")"!=aa(a.a);){Ha(a,"Missing function argument list.");d.push(pb(a));if(","!=aa(a.a))break;la(a.a)}Ha(a,"Unclosed function argument list.");
qb(a);c=new Wa(c,d)}else{c=null;break a}else c=new ab(+la(a.a))}"["==aa(a.a)&&(d=new Fa(yb(a)),c=new Va(c,d))}if(c)if(ba(aa(a.a)))d=c;else return c;else c=kb(a,"/"),d=new O,b.push(c)}for(;ba(aa(a.a));)c=la(a.a),Ha(a,"Missing next location step."),c=kb(a,c),b.push(c);return new Za(d,b)}function kb(a,b){var c;if("/"!=b&&"//"!=b)throw Error('Step op should be "/" or "//"');if("."==aa(a.a))return c=new $a(Yb,new Ma("node")),la(a.a),c;if(".."==aa(a.a))return c=new $a(Wb,new Ma("node")),la(a.a),c;if("@"==
aa(a.a)){var d=Qb;la(a.a);Ha(a,"Missing attribute name")}else if("::"==aa(a.a,1)){if(!/(?![0-9])[\w]/.test(aa(a.a).charAt(0)))throw Error("Bad token: "+la(a.a));var k=la(a.a);d=Cb[k]||null;if(!d)throw Error("No axis with name: "+k);la(a.a);Ha(a,"Missing node name")}else d=Rb;k=aa(a.a);if(/(?![0-9])[\w\*]/.test(k.charAt(0)))if("("==aa(a.a,1)){if(!Ba(k))throw Error("Invalid node type: "+k);k=la(a.a);if(!Ba(k))throw Error("Invalid type name: "+k);xb(a,"(");Ha(a,"Bad nodetype");var e=aa(a.a).charAt(0);
var n=null;if('"'==e||"'"==e)n=Fb(a);Ha(a,"Bad nodetype");qb(a);k=new Ma(k,n)}else if(k=la(a.a),e=k.indexOf(":"),-1==e)k=new Ya(k);else{n=k.substring(0,e);if("*"==n)var g="*";else if(g=a.b(n),!g)throw Error("Namespace prefix not declared: "+n);k=k.substr(e+1);k=new Ya(k,g)}else throw Error("Bad token: "+la(a.a));e=new Fa(yb(a),d.a);return c||new $a(d,k,e,"//"==b)}function yb(a){for(var b=[];"["==aa(a.a);){la(a.a);Ha(a,"Missing predicate expression.");var c=pb(a);b.push(c);Ha(a,"Unclosed predicate expression.");
xb(a,"]")}return b}function La(a){if("-"==aa(a.a))return la(a.a),new Qa(La(a));var b=Ga(a);if("|"!=aa(a.a))a=b;else{for(b=[b];"|"==la(a.a);)Ha(a,"Missing next union location path."),b.push(Ga(a));a.a.a--;a=new W(b)}return a}function sb(a){switch(a.nodeType){case 1:return m(bb,a);case 9:return sb(a.documentElement);case 11:case 10:case 6:case 12:return zb;default:return a.parentNode?sb(a.parentNode):zb}}function zb(){return null}function bb(a,b){if(a.prefix==b)return a.namespaceURI||"http://www.w3.org/1999/xhtml";
var c=a.getAttributeNode("xmlns:"+b);return c&&c.specified?c.value||null:a.parentNode&&9!=a.parentNode.nodeType?bb(a.parentNode,b):null}function S(b,c){if(!b.length)throw Error("Empty XPath expression.");b=Xa(b);if(fb(b))throw Error("Invalid XPath expression.");c?"function"==a(c)||(c=q(c.lookupNamespaceURI,c)):c=function(){return null};var d=pb(new Ta(b,c));if(!fb(b))throw Error("Bad token: "+la(b));this.evaluate=function(a,b){a=d.a(new va(a));return new oa(a,b)}}function oa(a,b){if(0==b)if(a instanceof
J)b=4;else if("string"==typeof a)b=2;else if("number"==typeof a)b=1;else if("boolean"==typeof a)b=3;else throw Error("Unexpected evaluation result.");if(2!=b&&1!=b&&3!=b&&!(a instanceof J))throw Error("value could not be converted to the specified type");this.resultType=b;switch(b){case 2:this.stringValue=a instanceof J?pa(a):""+a;break;case 1:this.numberValue=a instanceof J?+pa(a):+a;break;case 3:this.booleanValue=a instanceof J?0<a.l:!!a;break;case 4:case 5:case 6:case 7:var c=fa(a);var d=[];for(var k=
M(c);k;k=M(c))d.push(k instanceof F?k.a:k);this.snapshotLength=a.l;this.invalidIteratorState=!1;break;case 8:case 9:c=z(a);this.singleNodeValue=c instanceof F?c.a:c;break;default:throw Error("Unknown XPathResult type.");}var e=0;this.iterateNext=function(){if(4!=b&&5!=b)throw Error("iterateNext called with wrong result type");return e>=d.length?null:d[e++]};this.snapshotItem=function(a){if(6!=b&&7!=b)throw Error("snapshotItem called with wrong result type");return a>=d.length||0>a?null:d[a]}}function Oa(a){this.lookupNamespaceURI=
sb(a)}function rb(a,b){a=a||Na;var c=a.Document&&a.Document.prototype||a.document;if(!c.evaluate||b)a.XPathResult=oa,c.evaluate=function(a,b,c,d){return(new S(a,c)).evaluate(b,d)},c.createExpression=function(a,b){return new S(a,b)},c.createNSResolver=function(a){return new Oa(a)}}var Na=this,cb=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ua=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,
c,d){d=null==d?0:0>d?Math.max(0,a.length+d):d;if(b(a))return b(c)&&1==c.length?a.indexOf(c,d):-1;for(;d<a.length;d++)if(d in a&&a[d]===c)return d;return-1},Ca=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,c,d){for(var k=a.length,e=b(a)?a.split(""):a,n=0;n<k;n++)n in e&&c.call(d,e[n],n,a)},db=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,c,d){for(var k=a.length,e=[],n=0,g=b(a)?a.split(""):a,f=0;f<k;f++)if(f in
g){var l=g[f];c.call(d,l,f,a)&&(e[n++]=l)}return e},ib=Array.prototype.reduce?function(a,b,c,d){d&&(b=q(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var k=c;Ca(a,function(c,e){k=b.call(d,k,c,e,a)});return k},Ra=Array.prototype.some?function(a,b,c){return Array.prototype.some.call(a,b,c)}:function(a,c,d){for(var k=a.length,e=b(a)?a.split(""):a,n=0;n<k;n++)if(n in e&&c.call(d,e[n],n,a))return!0;return!1};a:{var Ab=Na.navigator;if(Ab){var lb=Ab.userAgent;if(lb){var Ka=lb;break a}}Ka=
""}var k=u(Ka,"Opera")||u(Ka,"OPR"),ma=u(Ka,"Trident")||u(Ka,"MSIE"),Z=u(Ka,"Edge"),Da=u(Ka,"Gecko")&&!(u(Ka.toLowerCase(),"webkit")&&!u(Ka,"Edge"))&&!(u(Ka,"Trident")||u(Ka,"MSIE"))&&!u(Ka,"Edge"),Hb=u(Ka.toLowerCase(),"webkit")&&!u(Ka,"Edge");a:{var Gb="",gb=function(){var a=Ka;if(Da)return/rv:([^\);]+)(\)|;)/.exec(a);if(Z)return/Edge\/([\d\.]+)/.exec(a);if(ma)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Hb)return/WebKit\/(\S+)/.exec(a);if(k)return/(?:Version)[ \/]?(\S+)/.exec(a)}();gb&&
(Gb=gb?gb[1]:"");if(ma){var ub=K();if(null!=ub&&ub>parseFloat(Gb)){var tb=String(ub);break a}}tb=Gb}var eb={},Jb=Na.document,Ja=Jb&&ma?K()||("CSS1Compat"==Jb.compatMode?parseInt(tb,10):5):void 0,Pa=ma&&!(9<=Number(Ja)),da=ma&&!(8<=Number(Ja));!Da&&!ma||ma&&9<=Number(Ja)||Da&&N("1.9.1");ma&&N("9");A(qa);qa.prototype.a=function(a){return this.c.m(this.h,this.o,a)};qa.prototype.toString=function(){var a="Binary Expression: "+this.c;a+=ca(this.h);return a+ca(this.o)};E.prototype.toString=function(){return this.a};
var Lb={};ua("div",6,1,function(a,b,c){return na(a,c)/na(b,c)});ua("mod",6,1,function(a,b,c){return na(a,c)%na(b,c)});ua("*",6,1,function(a,b,c){return na(a,c)*na(b,c)});ua("+",5,1,function(a,b,c){return na(a,c)+na(b,c)});ua("-",5,1,function(a,b,c){return na(a,c)-na(b,c)});ua("<",4,2,function(a,b,c){return za(function(a,b){return a<b},a,b,c)});ua(">",4,2,function(a,b,c){return za(function(a,b){return a>b},a,b,c)});ua("<=",4,2,function(a,b,c){return za(function(a,b){return a<=b},a,b,c)});ua(">=",4,
2,function(a,b,c){return za(function(a,b){return a>=b},a,b,c)});var Ob=ua("=",3,2,function(a,b,c){return za(function(a,b){return a==b},a,b,c,!0)});ua("!=",3,2,function(a,b,c){return za(function(a,b){return a!=b},a,b,c,!0)});ua("and",2,2,function(a,b,c){return Aa(a,c)&&Aa(b,c)});ua("or",1,2,function(a,b,c){return Aa(a,c)||Aa(b,c)});A(Va);Va.prototype.a=function(a){a=this.c.a(a);return X(this.h,a)};Va.prototype.toString=function(){return"Filter:"+ca(this.c)+ca(this.h)};A(Wa);Wa.prototype.a=function(a){return this.h.m.apply(null,
t(a,this.c))};Wa.prototype.toString=function(){var a="Function: "+this.h;if(this.c.length){var b=ib(this.c,function(a,b){return a+ca(b)},"Arguments:");a+=ca(b)}return a};vb.prototype.toString=function(){return this.j};var Mb={};ea("boolean",2,!1,!1,function(a,b){return Aa(b,a)},1);ea("ceiling",1,!1,!1,function(a,b){return Math.ceil(na(b,a))},1);ea("concat",3,!1,!1,function(a,b){return ib(R(arguments,1),function(b,c){return b+ta(c,a)},"")},2,null);ea("contains",2,!1,!1,function(a,b,c){return u(ta(b,
a),ta(c,a))},2);ea("count",1,!1,!1,function(a,b){return b.a(a).l},1,1,!0);ea("false",2,!1,!1,function(){return!1},0);ea("floor",1,!1,!1,function(a,b){return Math.floor(na(b,a))},1);ea("id",4,!1,!1,function(a,b){function c(a){if(Pa){var b=k.all[a];if(b){if(b.nodeType&&a==b.id)return b;if(b.length)return r(b,function(b){return a==b.id})}return null}return k.getElementById(a)}var d=a.a,k=9==d.nodeType?d:d.ownerDocument;d=ta(b,a).split(/\s+/);var e=[];Ca(d,function(a){a=c(a);!a||0<=Ua(e,a)||e.push(a)});
e.sort(g);var n=new J;Ca(e,function(a){x(n,a)});return n},1);ea("lang",2,!1,!1,function(){return!1},1);ea("last",1,!0,!1,function(a){if(1!=arguments.length)throw Error("Function last expects ()");return a.f},0);ea("local-name",3,!1,!0,function(a,b){return(a=b?z(b.a(a)):a.a)?a.localName||a.nodeName.toLowerCase():""},0,1,!0);ea("name",3,!1,!0,function(a,b){return(a=b?z(b.a(a)):a.a)?a.nodeName.toLowerCase():""},0,1,!0);ea("namespace-uri",3,!0,!1,function(){return""},0,1,!0);ea("normalize-space",3,!1,
!0,function(a,b){return(b?ta(b,a):I(a.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1);ea("not",2,!1,!1,function(a,b){return!Aa(b,a)},1);ea("number",1,!1,!0,function(a,b){return b?na(b,a):+I(a.a)},0,1);ea("position",1,!0,!1,function(a){return a.b},0);ea("round",1,!1,!1,function(a,b){return Math.round(na(b,a))},1);ea("starts-with",2,!1,!1,function(a,b,c){b=ta(b,a);a=ta(c,a);return 0==b.lastIndexOf(a,0)},2);ea("string",3,!1,!0,function(a,b){return b?ta(b,a):I(a.a)},0,1);ea("string-length",
1,!1,!0,function(a,b){return(b?ta(b,a):I(a.a)).length},0,1);ea("substring",3,!1,!1,function(a,b,c,d){c=na(c,a);if(isNaN(c)||Infinity==c||-Infinity==c)return"";d=d?na(d,a):Infinity;if(isNaN(d)||-Infinity===d)return"";c=Math.round(c)-1;var k=Math.max(c,0);a=ta(b,a);return Infinity==d?a.substring(k):a.substring(k,c+Math.round(d))},2,3);ea("substring-after",3,!1,!1,function(a,b,c){b=ta(b,a);a=ta(c,a);c=b.indexOf(a);return-1==c?"":b.substring(c+a.length)},2);ea("substring-before",3,!1,!1,function(a,b,
c){b=ta(b,a);a=ta(c,a);a=b.indexOf(a);return-1==a?"":b.substring(0,a)},2);ea("sum",1,!1,!1,function(a,b){a=fa(b.a(a));b=0;for(var c=M(a);c;c=M(a))b+=+I(c);return b},1,1,!0);ea("translate",3,!1,!1,function(a,b,c,d){b=ta(b,a);c=ta(c,a);var k=ta(d,a);a={};for(d=0;d<c.length;d++){var e=c.charAt(d);e in a||(a[e]=k.charAt(d))}c="";for(d=0;d<b.length;d++)e=b.charAt(d),c+=e in a?a[e]:e;return c},3);ea("true",2,!1,!1,function(){return!0},0);Ma.prototype.a=function(a){return null===this.b||this.b==a.nodeType};
Ma.prototype.f=function(){return this.h};Ma.prototype.toString=function(){var a="Kind Test: "+this.h;null===this.c||(a+=ca(this.c));return a};var Pb=/\$?(?:(?![0-9-\.])(?:\*|[\w-\.]+):)?(?![0-9-\.])(?:\*|[\w-\.]+)|\/\/|\.\.|::|\d+(?:\.\d*)?|\.\d+|"[^"]*"|'[^']*'|[!<>]=|\s+|./g,Db=/^\s/;A(Sa);Sa.prototype.a=function(){return this.c};Sa.prototype.toString=function(){return"Literal: "+this.c};Ya.prototype.a=function(a){var b=a.nodeType;if(1!=b&&2!=b)return!1;b=void 0!==a.localName?a.localName:a.nodeName;
return"*"!=this.j&&this.j!=b.toLowerCase()?!1:"*"==this.c?!0:this.c==(a.namespaceURI?a.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")};Ya.prototype.f=function(){return this.j};Ya.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.j};A(Za);A(Ea);Ea.prototype.a=function(a){var b=new J;a=a.a;9==a.nodeType?x(b,a):x(b,a.ownerDocument);return b};Ea.prototype.toString=function(){return"Root Helper Expression"};A(O);O.prototype.a=function(a){var b=
new J;x(b,a.a);return b};O.prototype.toString=function(){return"Context Helper Expression"};Za.prototype.a=function(a){var b=this.h.a(a);if(!(b instanceof J))throw Error("Filter expression must evaluate to nodeset.");a=this.c;for(var c=0,d=a.length;c<d&&b.l;c++){var k=a[c],e=fa(b,k.c.a);if(k.g||k.c!=Vb)if(k.g||k.c!=Xb){var g=M(e);for(b=k.a(new va(g));null!=(g=M(e));)g=k.a(new va(g)),b=ha(b,g)}else g=M(e),b=k.a(new va(g));else{for(g=M(e);(b=M(e))&&(!g.contains||g.contains(b))&&b.compareDocumentPosition(g)&
8;g=b);b=k.a(new va(g))}}return b};Za.prototype.toString=function(){var a="Path Expression:"+ca(this.h);if(this.c.length){var b=ib(this.c,function(a,b){return a+ca(b)},"Steps:");a+=ca(b)}return a};A(W);W.prototype.a=function(a){var b=new J;Ca(this.c,function(c){c=c.a(a);if(!(c instanceof J))throw Error("Path expression must evaluate to NodeSet.");b=ha(b,c)});return b};W.prototype.toString=function(){return ib(this.c,function(a,b){return a+ca(b)},"Union Expression:")};Fa.prototype.toString=function(){return ib(this.a,
function(a,b){return a+ca(b)},"Predicates:")};A($a);$a.prototype.a=function(a){var b=a.a;var c=this.f;var d=null,k=null,e=0;c&&(d=c.name,k=c.s?ta(c.s,a):null,e=1);if(this.u)if(this.g||this.c!=Rb)if(a=fa((new $a(Ib,new Ma("node"))).a(a)),b=M(a))for(c=this.m(b,d,k,e);null!=(b=M(a));)c=ha(c,this.m(b,d,k,e));else c=new J;else c=v(this.o,b,d,k),c=X(this.h,c,e);else c=this.m(a.a,d,k,e);return c};$a.prototype.m=function(a,b,c,d){a=this.c.f(this.o,a,b,c);return X(this.h,a,d)};$a.prototype.toString=function(){var a=
"Step:"+ca("Operator: "+(this.u?"//":"/"));this.c.j&&(a+=ca("Axis: "+this.c));a+=ca(this.o);if(this.h.a.length){var b=ib(this.h.a,function(a,b){return a+ca(b)},"Predicates:");a+=ca(b)}return a};l.prototype.toString=function(){return this.j};var Cb={};xa("ancestor",function(a,b){for(var c=new J;b=b.parentNode;)a.a(b)&&ja(c,b);return c},!0);xa("ancestor-or-self",function(a,b){var c=new J;do a.a(b)&&ja(c,b);while(b=b.parentNode);return c},!0);var Qb=xa("attribute",function(a,b){var c=new J,d=a.f();if("style"==
d&&Pa&&b.style)return x(c,new F(b.style,b,"style",b.style.cssText)),c;var k=b.attributes;if(k)if(a instanceof Ma&&null===a.b||"*"==d){d=0;for(var e;e=k[d];d++)Pa?e.nodeValue&&x(c,G(b,e)):x(c,e)}else(e=k.getNamedItem(d))&&(Pa?e.nodeValue&&x(c,G(b,e)):x(c,e));return c},!1),Rb=xa("child",function(a,c,d,k,e){return(Pa?Y:P).call(null,a,c,b(d)?d:null,b(k)?k:null,e||new J)},!1,!0);xa("descendant",v,!1,!0);var Ib=xa("descendant-or-self",function(a,b,c,d){var k=new J;B(b,c,d)&&a.a(b)&&x(k,b);return v(a,b,
c,d,k)},!1,!0),Vb=xa("following",function(a,b,c,d){var k=new J;do for(var e=b;e=e.nextSibling;)B(e,c,d)&&a.a(e)&&x(k,e),k=v(a,e,c,d,k);while(b=b.parentNode);return k},!1,!0);xa("following-sibling",function(a,b){for(var c=new J;b=b.nextSibling;)a.a(b)&&x(c,b);return c},!1);xa("namespace",function(){return new J},!1);var Wb=xa("parent",function(a,b){var c=new J;if(9==b.nodeType)return c;if(2==b.nodeType)return x(c,b.ownerElement),c;b=b.parentNode;a.a(b)&&x(c,b);return c},!1),Xb=xa("preceding",function(a,
b,c,d){var k=new J,e=[];do e.unshift(b);while(b=b.parentNode);for(var g=1,f=e.length;g<f;g++){var n=[];for(b=e[g];b=b.previousSibling;)n.unshift(b);for(var l=0,m=n.length;l<m;l++)b=n[l],B(b,c,d)&&a.a(b)&&x(k,b),k=v(a,b,c,d,k)}return k},!0,!0);xa("preceding-sibling",function(a,b){for(var c=new J;b=b.previousSibling;)a.a(b)&&ja(c,b);return c},!0);var Yb=xa("self",function(a,b){var c=new J;a.a(b)&&x(c,b);return c},!1);A(Qa);Qa.prototype.a=function(a){return-na(this.c,a)};Qa.prototype.toString=function(){return"Unary Expression: -"+
ca(this.c)};A(ab);ab.prototype.a=function(){return this.c};ab.prototype.toString=function(){return"Number: "+this.c};oa.ANY_TYPE=0;oa.NUMBER_TYPE=1;oa.STRING_TYPE=2;oa.BOOLEAN_TYPE=3;oa.UNORDERED_NODE_ITERATOR_TYPE=4;oa.ORDERED_NODE_ITERATOR_TYPE=5;oa.UNORDERED_NODE_SNAPSHOT_TYPE=6;oa.ORDERED_NODE_SNAPSHOT_TYPE=7;oa.ANY_UNORDERED_NODE_TYPE=8;oa.FIRST_ORDERED_NODE_TYPE=9;var Eb=["wgxpath","install"],jb=Na;Eb[0]in jb||!jb.execScript||jb.execScript("var "+Eb[0]);for(var mb;Eb.length&&(mb=Eb.shift());)Eb.length||
void 0===rb?jb[mb]?jb=jb[mb]:jb=jb[mb]={}:jb[mb]=rb;c.exports.install=rb;c.exports.XPathResultType={ANY_TYPE:0,NUMBER_TYPE:1,STRING_TYPE:2,BOOLEAN_TYPE:3,UNORDERED_NODE_ITERATOR_TYPE:4,ORDERED_NODE_ITERATOR_TYPE:5,UNORDERED_NODE_SNAPSHOT_TYPE:6,ORDERED_NODE_SNAPSHOT_TYPE:7,ANY_UNORDERED_NODE_TYPE:8,FIRST_ORDERED_NODE_TYPE:9}}).call(a)}).call(h,a("DuR2"))},"M+3u":function(c,h,a){function f(a){var b=d();return function(){var c=A()(a);if(b){var d=A()(this).constructor;c=Reflect.construct(c,arguments,
d)}else c=c.apply(this,arguments);return m()(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(K){return!1}}a.d(h,"c",function(){return u});a.d(h,"a",function(){return t});a.d(h,"b",function(){return R});c=a("M1I4");var b=a.n(c);c=a("Z60a");var w=a.n(c);c=a("C9uT");var D=a.n(c);c=a("j/rp");var q=a.n(c);c=a("T/v0");
var m=a.n(c);c=a("tNLN");var A=a.n(c);c=a("moUy");a.n(c);a=function(a){function b(a){w()(this,b);var d=c.call(this);d.events=[a];d.name=a;return d}q()(b,a);var c=f(b);D()(b,[{key:"notify",value:function(a,b){}}]);return b}(c.Observer);var u=Object.freeze({READY:"READY",STARTED:"STARTED",FINISHED:"FINISHED",CANCELED:"CANCELED"}),e=function(a){function b(a,d,e,f,m){w()(this,b);d=c.call(this,d);d.delegate=f;d.id=a;d.action=e;d.status=d.status?d.status:u.READY;d.result=null;d.replayTimes=0;return d}q()(b,
a);var c=f(b);D()(b,[{key:"notify",value:function(a,b){a&&a===this.name&&this.status!==u.CANCELED&&(this.status=u.FINISHED,this.result=b,this.action&&"function"===typeof this.action&&this.action(this),this.delegate.consume(this))}},{key:"replay",value:function(){return this.delegate&&this.delegate.actions&&Array.isArray(this.delegate.actions)&&this.action&&"function"===typeof this.action&&this.replayTimes<r.MAX_REPLAY_TIMES?(this.result=null,this.status=u.READY,this.replayTimes++,!0):!1}}]);return b}(a),
r=Object.freeze({MAX_REPLAY_TIMES:15}),t=Object.freeze({CONSUMER_READY:"CONSUMER_READY",CONSUMER_STARTED:"CONSUMER_STARTED",CONSUMER_FINISHED:"CONSUMER_FINISHED",CONSUMER_CANCELED:"CONSUMER_CANCELED"}),R=function(a){function c(a,e){w()(this,c);var f=d.call(this);f.actions=[];f.subjects=a&&Array.isArray(a)&&a.filter(function(a){return a&&a.subscribe&&a.unsubscribe})?a:[];f.subjects.push(b()(f));f.status=u.READY;f.initiator=e&&"function"===typeof e?e:null;return f}q()(c,a);var d=f(c);D()(c,[{key:"on",
value:function(a,b){a&&b&&"function"===typeof b&&(a=new e(this.actions.length,a,b,this,u.READY),this.actions.push(a));return this}},{key:"start",value:function(a){this.status=u.STARTED;this.status!==u.CANCELED&&(this._next(),a&&"function"===typeof a&&a(),this.initiator&&"function"===typeof this.initiator&&this.initiator());return this}},{key:"_next",value:function(){if(this.actions&&Array.isArray(this.actions)&&this.status!==u.CANCELED){var a=this.actions.find(function(a){return a.status===u.READY});
a&&a.action&&"function"===typeof a.action?(this.subjects.forEach(function(b){return b.subscribe(a)}),this.status=u.STARTED,this.notifyAll(t.CONSUMER_STARTED,this)):(this.status=u.FINISHED,this.notifyAll(t.CONSUMER_FINISHED,this))}return this}},{key:"consume",value:function(a){a&&this.subjects.forEach(function(b){return b.unsubscribe(a)});this._next();return this}},{key:"cancel",value:function(){for(var a=null;a=this.actions.find(function(a){return a.status===u.READY});)a.status=u.CANCELED,a&&this.subjects.forEach(function(b){return b.unsubscribe(a)});
this.status=u.CANCELED;this.notifyAll(t.CONSUMER_CANCELED,this);return this}}]);return c}(c.Subject);(function(){function a(b,c){w()(this,a);this.initiator=c?c:null;this.consumer=new R(b,c)}D()(a,[{key:"on",value:function(a,b){this.consumer.on(a,b);return this}},{key:"build",value:function(){return this.initiator&&"function"===typeof this.initiator?this.consumer.start(this.initiator):this.consumer}}]);return a})()},"M+Z9":function(c,h,a){var f=a("3rZI"),d=a("v9aJ"),b=a("JyYQ"),w=a("/gZ2"),D=a("NGEn");
c.exports=function(a,c,h){var m=D(a)?f:w,e=3>arguments.length;return m(a,b(c,4),h,e,d)}},M1I4:function(c,h){c.exports=function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a};c.exports.__esModule=!0;c.exports["default"]=c.exports},M1c9:function(c,h){c.exports=function(a,c,d){var b=-1,f=a.length;0>c&&(c=-c>f?0:f+c);d=d>f?f:d;0>d&&(d+=f);f=c>d?0:d-c>>>0;c>>>=0;for(d=Array(f);++b<f;)d[b]=a[b+c];return d}},M6Wl:function(c,h,a){var f=a("rpnb"),
d=a("ktak");c.exports=function(a,c){return a&&f(a,c,d)}},"NM/j":function(c,h,a){var f=a("7UU1"),d=a("cXIJ"),b=a("Y4K9"),w=a("3T7U");c.exports=function(a,c){return f(a)||d(a,c)||b(a,c)||w()};c.exports.__esModule=!0;c.exports["default"]=c.exports},Nkkh:function(c,h,a){var f=a("tv3T"),d=a("l9Lx");c.exports=function(a,c){return f(a,d(a),c)}},OYJC:function(c,h,a){function f(a){var b=d();return function(){var c=m()(a);if(b){var d=m()(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,
arguments);return q()(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}a.d(h,"b",function(){return K});a.d(h,"a",function(){return N});c=a("Z60a");var b=a.n(c);c=a("C9uT");var w=a.n(c);c=a("j/rp");var D=a.n(c);c=a("T/v0");var q=a.n(c);c=a("tNLN");var m=a.n(c);c=a("moUy");a.n(c);var A=a("cuGy");0;
"use strict";var u=Object.freeze({TOUCH_START:"touchstart",TOUCH_END:"touchend",TOUCH_MOVE:"touchmove",SELECTION_CHANGE:"selectionchange",MOUSE_DOWN:"mousedown",MOUSE_UP:"mouseup",CLICK:"click"}),e=Object.freeze({UNIDENTIFIED:"UNIDENTIFIED_ACTION",TOUCH:"TOUCH",MOVE:"MOVE",SELECTION:"SELECTION",CLICK:"click",SUPPRESS_SELECTION_EVENTS:"SUPPRESS_SELECTION_EVENTS",RELEASE_SELECTION_EVENTS:"RELEASE_SELECTION_EVENTS"}),r=Object.freeze({INIT:"INITIAL_STATE",UNIDENTIFIED:"UNIDENTIFIED",TOUCH_PROGRESS:"TOUCH_PROGRESS",
SELECTION_PROGRESS:"SELECTION_PROGRESS"}),t="selectionchange touchstart touchend touchcancel touchmove mouseup mousedown".split(" "),R=a("7t+N");R.__orig="rmq";window.rmqJquery=R;window.jQuery&&(window.jQuery.__orig="own");var K=function(a){function c(a,e,f){b()(this,c);var m=d.call(this);m.name="TOUCH_EVENTS_HANDLER";m._win=a;m._doc=e;m.ahThis=f;m.eventsQ=[];m.actionsQ=[];m.state=r.INIT;m._lastEvent={};return m}D()(c,a);var d=f(c);w()(c,[{key:"start",value:function(){this._setupDocumentEvents()}},
{key:"stop",value:function(){var a=this;t.forEach(function(b){a._doc.removeEventListener(b,a._qEvent)})}},{key:"_qEvent",value:function(a){this.eventsQ.push(a.type);this._lastEvent[a.type]=a;var b=null,c=!1;switch(this.state){case r.INIT:a.type===u.TOUCH_START||a.type===u.MOUSE_DOWN?this.state=r.TOUCH_PROGRESS:a.type===u.SELECTION_CHANGE&&(this.state=r.SELECTION_PROGRESS,this._selectionTimeoutCheck());break;case r.SELECTION_PROGRESS:a.type!==u.SELECTION_CHANGE?(b=this._handleSelectionchange(),this.state=
r.INIT,this.eventsQ.splice(0)):this._selectionTimeoutCheck();break;case r.TOUCH_PROGRESS:a.type===u.TOUCH_END||a.type===u.MOUSE_UP?(b=this._handleTouchstart(),b===e.SELECTION&&(c=!0),this.state=r.INIT,this.eventsQ.splice(0)):a.type===u.SELECTION_CHANGE&&this._selectionTimeoutCheck()}b&&this.notifyAll(b,{event:a,action:b,eventBag:{touchstart:this._lastEvent[u.TOUCH_START],selectionchange:this._lastEvent[u.SELECTION_CHANGE],touchend:this._lastEvent[u.TOUCH_END],touchmouve:this._lastEvent[u.TOUCH_MOVE],
mousedown:this._lastEvent[u.MOUSE_DOWN],mouseup:this._lastEvent[u.MOUSE_UP],click:this._lastEvent[u.CLICK]},newSelection:c})}},{key:"_selectionTimeoutCheck",value:function(){var a=this;null!=this.timeoutCheckId&&clearTimeout(this.timeoutCheckId);this.timeoutCheckId=setTimeout(function(b,c){c==a.eventsQ.length&&(c=b._handleSelectionchange(),b.notifyAll(c,{action:c,event:a._lastEvent[u.SELECTION_CHANGE],newSelection:!0}),b.state=r.INIT,a.eventsQ.splice(0))},500,this,this.eventsQ.length)}},{key:"_setupDocumentEvents",
value:function(){var a=this;t.forEach(function(b){a._doc.addEventListener(b,a._qEvent.bind(a),{passive:!0})})}},{key:"_consumeEvent",value:function(a){for(var b=0;b<this.eventsQ.length&&this.eventsQ[b]===a;b++);this.eventsQ.splice(0,b+1)}},{key:"_handleTouchstart",value:function(){for(var a=this.eventsQ.shift(),b=!1;a!==u.TOUCH_END&&a!==u.MOUSE_UP;){switch(a){case u.TOUCH_MOVE:case u.SELECTION_CHANGE:b=!0}a=this.eventsQ.shift()}a===u.MOUSE_UP&&(b=!1);b?"Range"!==this._win.getSelection().type?(a=e.MOVE,
this.actionsQ.unshift(e.MOVE)):(a=e.SELECTION,this.actionsQ.unshift(e.SELECTION)):(a=e.TOUCH,this.actionsQ.unshift(a));return a}},{key:"_handleSelectionchange",value:function(){this._consumeEvent(u.SELECTION_CHANGE);this.actionsQ.unshift(e.SELECTION);return e.SELECTION}}]);return c}(c.Subject),N=function(a){function c(a,f,m,q,h){b()(this,c);var r=d.call(this);if(!(f&&m&&q&&a))throw"invalid injection to AnnoHelperTouchHandler";r.name="ACTIONS";r.events=[e.MOVE,e.SELECTION,e.TOUCH];r._Annotator=a;r.annotator=
f;r.BrowserRange=m;r.adderIsVisible=!1;r.handleMathJaxSelectedRanges=q;r.ahThis=h;return r}D()(c,a);var d=f(c);w()(c,[{key:"sendLogMessage",value:function(a){a={type:a};try{document.getElementById("GroveSide").contentWindow.postMessage(a,"*")}catch(v){}}},{key:"_clearHighlight",value:function(){R(".rmq-annotator-hl.rmq-annotator-hl-temporary").each(function(a,b){R(b.childNodes).each(function(a,b){R(b).unwrap(".rmq-annotator-hl.rmq-annotator-hl-temporary")})})}},{key:"_highlight",value:function(){var a=
this.annotator;R(a.selectedRanges).each(function(b,c){return a.highlightRange(c,"rmq-annotator-hl rmq-annotator-hl-temporary")})}},{key:"checkForEndSelection",value:function(a){var b=this;this.annotator.checkForEndSelection(a,function(a){if(b.adderIsVisible=a){a=R("button",b.annotator.adder);var c=-1!==navigator.userAgent.indexOf("Firefox"),d=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari");/MSIE |Trident\//.test(navigator.userAgent);c||d||a&&a[0]&&a[0].focus()}})}},
{key:"notify",value:function(a,b){var c=b.event;b=b.newSelection;switch(a){case e.TOUCH:this.checkForEndSelection(c);break;case e.MOVE:break;case e.SELECTION:"Range"!==window.getSelection().type||this.adderIsVisible&&!b||this.checkForEndSelection(c);break;default:Object(A.debug)("Nothing to do")}}}]);return c}(c.Observer)},ObtK:function(c,h,a){function f(a){var b=null;"string"===typeof a?b=a:"A"===a.tagName?b=a.href:"BUTTON"===a.tagName&&"submit"===a.type&&(b=(a=t(a).parents("form")[0])&&a.action);
if(b){try{var c=(new URL(b)).protocol}catch(I){}"https:"===window.location.protocol&&"http:"===c&&(b=b.replace("http","https"))}return b}function d(a,b,c){function d(a,d,f,m){d=d||"GET";return new Promise(function(h,g){r&&r.abort();r=new XMLHttpRequest;r.withCredentials=!0;r.open(d,a,!0);m&&r.setRequestHeader("Content-Type",m);r.responseType="arraybuffer";r.onprogress=function(a){var b=a.srcElement.getResponseHeader("Content-Type");e.dispatchEvent(new CustomEvent("pdfContentLoading",{detail:{contentType:b,
origEvent:a}}));c&&c(a,!1)};r.onload=function(d){c&&c(d,!0);var e=r.getResponseHeader("Content-Type");if(e&&-1===e.indexOf(b))g(e);else{d=r.response;var f=r.responseURL||a;d&&(e=new Blob([d],{type:e,responseURL:f}),q&&q.setItem(a,e,f),URL.createObjectURL(e),h({responseURL:f,data:d}))}};r.onerror=function(a){g(a)};r.send(f)})}var q=Object(m.a)("remarq_cache","pdf_files",window);b=b||"application/pdf";var h=null,w=null,u=f(a);if("A"===a.tagName)h=function(){return d(u,"GET",null)};else if("BUTTON"===
a.tagName&&"submit"===a.type)if(w=t(a).parents("form")[0])u=w.action,h=function(){var b=w;var c=b.action;var e=b.method;!1!==(b.onsubmit&&b.onsubmit())?(b=t(b).serialize()+"&"+encodeURI(a.name)+"="+encodeURI(a.value),c=d(c,e,b,"application/x-www-form-urlencoded")):c=Promise.reject("form onsubmit returned false");return c};else return Promise.reject("Form not found :"+a);else if(u)h=function(){return d(u,"GET",null)};else return Promise.reject("Unsupported element:"+a);try{return w&&!1===(w.onsubmit&&
w.onsubmit())?Promise.reject("form onsubmit returned false"):q.getItem(u).then(function(a){return a?a:h()})["catch"](function(a){return h()})}catch(Y){return h()}}h.b=d;a.d(h,"a",function(){return K});c=a("Z60a");var b=a.n(c);c=a("C9uT");var w=a.n(c),D=a("qrcb"),q=a("4T/i"),m=a("TvYa");a("RTdn");a("9LPS");var A=a("RTdn"),u=window,e=document,r=null,t=a("7t+N");t.__orig="rmq";window.rmqJquery=t;window.jQuery&&(window.jQuery.__orig="own");var R=null,K=function(){function a(c,d,e,f,m){b()(this,a);R||
(this.pdfFrameInit=t.Deferred(),this.pdfFrameLoaded=t.Deferred(),window.addEventListener("message",this.waitPDFFrame.bind(this)));R=this;this.gp=m;this.Remarq=c;this.grovePrefix=d;this.apiBase=m.apiBase;this.selectors=e;this.stickyController=f;this.isExtension=-1!==d.indexOf("chrome-extension:");this.isLite=m&&m.isLite;this.id=(new Date).getTime()}w()(a,[{key:"waitPDFFrame",value:function(a){"pdfFrameInit"===a.data.action&&this.pdfFrameInit.resolve(!0);"pdfFrameLoaded"===a.data.action&&this.pdfFrameLoaded.resolve(!0)}},
{key:"updateProgress",value:function(a){var b=this;return function(c,d){var e=b.pdfFrame;d?(c=b.pdfFrame)&&c.contentWindow.postMessage({msg:"loading",percentage:100},"*"):(d=null,a?d=c.loaded/1024/a*100:c.lengthComputable&&(d=c.loaded/c.total*100),d?e&&e.contentWindow&&e.contentWindow.postMessage({msg:"loading",percentage:Math.floor(d)},"*"):e&&e.contentWindow&&e.contentWindow.postMessage({msg:"loading",megabytes:(c.loaded/1048576).toFixed(1)},"*"))}}},{key:"createPdfIFrame",value:function(a,b,c){a=
a||"pdf";!b&&a&&(b="application/"+a);var d=this,f=d.grovePrefix;d.isExtension&&(f+="dist/");c.contentType=c.contentType||a.toUpperCase();a="epub"===a?f+"pdfFrame/epub.html":f+"pdf.js/generic/web/viewer.html";var m=d.apiBase;e.addEventListener("pdfContentLoading",function L(a){(a=a.detail.contentType)&&-1!==a.indexOf(b)&&d.pdfFrame&&(d.pdfFrame.dataset.expanded="loading");e.removeEventListener("pdfContentLoading",L)});var q=e.getElementById("CornerWidget");return Object(A.installFrame)("pdfFrame",
a,m,f,q?{element:q,relativePosition:"above"}:{element:e.body,relativePosition:"bottom"},{},{expanded:"off"},c,this.gp,null).then(function(a){return d.pdfFrame=a})}},{key:"configurePdfFrameAndLoadPdf",value:function(a,b,c,m,h,r){var w=this;b.contentWindow.postMessage({msg:"loading"},"*");var A=function(a){var d=a.responseURL,h=a.data;w.pdfFrameLoaded.promise().then(function(){w.pdfFrameLoaded=t.Deferred();var a=d||f(m);u.history&&u.history.pushState({contentType:"PDF"},e.title,a);var c=function(){b&&
b.contentWindow&&b.contentWindow.postMessage({action:"close"},"*")};u.addEventListener("popstate",function(){c();u.removeEventListener("popstate",c);u.location.href===a&&u.history.back()});u.onbeforeunload=function(){u.removeEventListener("popstate",c)}});return new Promise(function(a,e){w.pdfFrameInit.promise().then(function(){w.pdfFrameInit=t.Deferred();var e=d||f(m),g=Object(q.a)(w.selectors.doi,"text",e)[0];e=decodeURIComponent(e);g="full/"+(g||e);w.isExtension?b.contentWindow.postMessage({msg:"init",
buffer:h,doi:g,siteUrl:e,pdId:c,urlParams:r},"*"):b.contentWindow.postMessage({msg:"init",buffer:h,urlParams:r,doi:g,siteUrl:e,pdId:c},"*");document.getElementById("GroveSide").contentWindow.postMessage({indication:"pdfStatus",status:"on"},"*");b.dataset.expanded="on";w.stickyController.setView("pdf");w.stickyController.hide();a(b)})})},v=D.b;"epub"===a&&(v=D.a);return d(m,v,this.updateProgress(h)).then(function(a){return A(a)})}},{key:"handle",value:function(a,b,c,d,e){var f=this;return this.createPdfIFrame(a,
void 0,e).then(function(m){return f.configurePdfFrameAndLoadPdf(a,m,b,c,d,e)})["catch"](function(a){var b=f.pdfFrame;b&&b.dataset&&(b.dataset.expanded="off");throw a;})}},{key:"getPage",value:function(a){var b=this,c=this;return new Promise(function(d,e){window.addEventListener("message",function(c){"getPageResponse"===c.data.action&&c.data.pageNumber===a&&(c.data.html?d({html:c.data.html}):c.data.text?d({text:c.data.text}):e(c.data.error),window.removeEventListener("message",b))});c.pdfFrame||(c.pdfFrame=
document.getElementById("pdfFrame"));c.pdfFrame.contentWindow.postMessage({action:"getPage",pageNumber:a},"*")})}}],[{key:"getInstance",value:function(){return R}}]);return a}()},Oy1H:function(c,h){function a(f){"@babel/helpers - typeof";return c.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c.exports.__esModule=!0,c.exports["default"]=
c.exports,a(f)}c.exports=a;c.exports.__esModule=!0;c.exports["default"]=c.exports},P6Rp:function(c,h,a){var f=a("Rx1E"),d=a("1C79");h=a("YkxI");var b=a("Fp5l"),w=a("oqL2");a=h(function(a,c){var m=w(c);b(m)&&(m=void 0);return b(a)?f(a,d(c,1,b,!0),void 0,m):[]});c.exports=a},PfJA:function(c,h){c.exports=function(a){return a.split("")}},PqYH:function(c,h){c.exports=function(a,c){for(var d=-1,b=null==a?0:a.length;++d<b&&!1!==c(a[d],d,a););return a}},Q2wK:function(c,h,a){var f=a("8AZL"),d=Math.max;c.exports=
function(a,c,h){c=d(void 0===c?a.length-1:c,0);return function(){for(var b=arguments,m=-1,w=d(b.length-c,0),u=Array(w);++m<w;)u[m]=b[c+m];m=-1;for(w=Array(c+1);++m<c;)w[m]=b[m];w[c]=h(u);return f(a,this,w)}}},Qp3N:function(c,h,a){h=a("NkRn");var f=a("1Yb9"),d=a("NGEn"),b=h?h.isConcatSpreadable:void 0;c.exports=function(a){return d(a)||f(a)||!!(b&&a&&a[b])}},RTdn:function(c,h,a){function f(a,b){this.name=a;this.status=b;this.frame=null;var c=[];this.queue=c;this.pendingEventsQueue={isEmpty:function(){return 0===
c.length},dequeue:function(){return 0<c.length&&c.splice(0,1)[0]},enqueue:function(a){return c.push(a)},clear:function(){return c.splice(0,c.length)||!0}}}function d(a){return void 0!==a?(a=r()(a),a.enableRemarqByDefault=!0,a):B.defaultLiteSettings}function b(a){var b=new K(a);a=b.href;b=b.href.indexOf("#");-1!==b&&(a=a.substring(0,b));return decodeURIComponent(a)}function w(a){return b(window.location.href)}function D(){return H.cookie.split(";").reduce(function(a,b){b=b.split("=");a[b[0].trim()]=
b[1]&&b[1].trim();return a},{})}function q(a){return a&&a.map(function(a){var b=Object(e.a)(a);return null!=b&&0<b.length?{item:b[0],relativePosition:a.relativePosition||"top"}:null}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[])[0]}function m(a,b,c,d){var e=a.createElement("link");e.id=c;e.type="text/css";e.rel="stylesheet";e.href=b+d;A(a).appendChild(e)}function A(a){return 0<a.getElementsByTagName("head").length?a.getElementsByTagName("head")[0]:
a.body}Object.defineProperty(h,"__esModule",{value:!0});a.d(h,"TP_HEADER_NAME",function(){return N});a.d(h,"CSRF_HEADER_NAME",function(){return F});a.d(h,"CSRF_COOKIE_NAME",function(){return G});a.d(h,"TPC_BLOCKED_HEADER",function(){return I});a.d(h,"groveInstallHelper",function(){return B});h.WidgetState=f;a.d(h,"widgetsStateHolder",function(){return T});h.maskedRemarqSettings=d;h.calculateSiteUrl=b;h.extractSiteUrl=w;h.extractCookies=D;h.setCookie=function(a,b,c){var d=new Date;d.setTime(d.getTime()+
864E5*c);c="expires="+d.toUTCString();document.cookie=a+"="+b+";"+c+";path=/"};h.setupNcp=function(a,b,c){a={userRHKey:a.Hermes&&a.Hermes.userRHKey,hrmTracker:b.hrmTracker,hrmTracker_S:b.hrmTracker_S,hrmEvtId:a.Hermes&&a.Hermes.hrmEvtId,surveysCookie:b.rmq_jsp?b.rmq_jsp:null};c.nocaptcha&&(a.nocaptcha=c.nocaptcha);c.origin&&(a.origin=c.origin);return a};h.pageInfoPromise=function(a,b,c,e){var f=w(e&&e.isLite);return new Promise(function(g,m){var q=new XMLHttpRequest;q.withCredentials=!0;var h=Object.assign({version:e.version,
iamEnabled:e.iamEnabled,siteUrl:f},c);m=Object.keys(h).map(function(a){return a+"="+encodeURIComponent(h[a])}).join("&");q.open("GET",b+"/domain/settings?"+m,!0);q.responseType="json";q.onload=function(a){a="object"===u()(q.response)?q.response:q.response&&JSON.parse(q.response);var b=q.getResponseHeader(N),c=q.getResponseHeader(F);a[N]=b;a[F]=c;g(a)};q.onerror=function(b){e.isLite?(b=d(a),b.isLite=!0,g(b)):g({selector:{}})};q.send()})};h.resolveAbstractAt=function(a){return q(a)};h.resolveBannerAt=
function(a){return q(a)};h.resolveStickyAt=function(a){return a&&a.map(function(a){var b=Object(e.a)(a);return null!=b&&0<b.length?{item:b[0],relativePosition:a.relativePosition}:null})};h.resolveDenial=function(a){return a&&a.map(function(a){a=Object(e.a)(a,"node");return null!=a&&0<a.length}).reduce(function(a,b){return a||b},!1)};h.resolveAccessSelector=function(a){var b=Object(e.a)(a.selectors.access)[0];return b=a.access||b};h.determineAccess=function(a,b,c,d,f){c?a="denial":!a||0!==a.indexOf("pdf")&&
0!==a.indexOf("epub")?"abs"!==a&&"full"!==a&&(a=null):a="full";null!=a||null==b||c||(a=!f||"PDF"!==f.toUpperCase()&&"EPUB"!==f.toUpperCase()?d?d.map(function(a){return Object(e.a)(a)}).reduce(function(a,b){null!=b&&(Array.isArray(b)?b.forEach(function(b){null!=b&&a.push(b)}):a.push(b));return a},[])[0]?"full":"abs":"full":"full");return a||"full"};h.appendAnnotatorCssToHead=function(a,b){var c=a.createElement("link");c.id="grove-annotator-css";c.type="text/css";c.rel="stylesheet";c.href=b+"main/annotator.css";
A(a).appendChild(c)};h.appendGroveMainCssToHead=function(a,b){m(a,b,"grove-main-css","main/grove_main.css");-1!==navigator.userAgent.indexOf("Edge")||-1!==navigator.userAgent.indexOf("Trident")?m(a,b,"grove-main-css-2","main/grove_main_edge.css"):m(a,b,"grove-main-2","main/grove_main_vars.css")};h.appendRobotoFontToHead=function(a){var b=a.createElement("link");b.id="grove-roboto-css";b.rel="stylesheet";b.href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic";A(a).appendChild(b)};
h.removeElementById=function(a){H.getElementById(a)&&H.getElementById(a).parentNode.removeChild(H.getElementById(a))};h.frameInitHandler=function(a,b){"frameInit"===b.data.action&&b.source.postMessage({action:"urlParams",urlParams:a},"*")};h.installFrame=function(a,b,c,d,e,g,f,m,q,h,r){return new Promise(function(u,A){var B=null;h&&(B=H.createElement("div"),B.className=h);var x=q.isLite;if(H.getElementById(a))u(H.getElementById(a));else{var fa="bottom";e||(e=document.body);e.relativePosition&&(fa=
e.relativePosition,e=e.element);var G=H.createElement("iframe");G.id=a;x=w(x);var M=D(),F=H.contentType,R;F&&0===F.indexOf("application/")&&(R=F.substring(12).toUpperCase());m=Object.assign(m,{siteUrl:x,apiBase:c,userRHKey:v.Hermes&&v.Hermes.userRHKey,hrmTracker:M.hrmTracker,hrmTracker_S:M.hrmTracker_S,hrmEvtId:v.Hermes&&v.Hermes.hrmEvtId,origin:q.origin?q.origin:"",publicUrl:q.publicUrl?q.publicUrl:"",winOrigin:v.origin});R&&!m.contentType&&(m.contentType=R);q.palette&&(m.palette=q.palette);G.src=
b;G.frameBorder="0";G.scrolling="GroveSide"===a?"yes":"no";G.style.overflow=g.overflow||"GroveSide"===a?"":"hidden";G.allowtransparency="true";G.onload=function(a){this.contentWindow.postMessage({action:"init",urlParams:m},d)};G.onerror=function(a){A(a)};f&&Object.keys(f).forEach(function(a){G.dataset[a]=f[a];B&&(B.dataset[a]=f[a])});g&&Object.keys(g).forEach(function(a){G.style[a]=g[a];B&&(B.style[a]=g[a])});B&&B.appendChild(G);r&&Object.keys(r).forEach(function(a){G.setAttribute(a,r[a])});R=B||
G;"bottom"===fa?e.appendChild(R):"top"===fa?e.insertBefore(G,e.childNodes[0]):"below"===fa?e.parentElement.insertBefore(R,e.nextSibling):"above"===fa&&e.parentElement.insertBefore(R,e);if(fa=T.get(t.WIDGET_NAMES.fromFrameId(a)))fa.status=t.WIDGET_STATUS.LOADING,fa.frame=G;u(G)}})};c=a("Oy1H");var u=a.n(c),e=a("4T/i");c=a("kvU2");var r=a.n(c),t=a("9LPS"),R=a("JyB8");a.n(R);window.$||window.jQuery||a("7t+N");"function"!==typeof window.URL&&a("Xk2i");var K=window.URL,N="X-RMRQ-SESSION",F="X-CSRF-TOKEN",
G="XSRF-TOKEN",I="X-TPC-BLOCKED",B={},v=window,H=document;B.defaultLiteSettings={domain:"*",userRHKey:null,pdId:null,publisherName:null,doiPrefixes:null,preferences:null,widgetConfiguration:null,enableRule:null,selectors:{posIndex:null,abstractIndex:null,fullTextIndex:null,stickyIndex:null,pdfIndex:[{type:"css",value:"a[href*='pdf']",field:null,sed:null,relativePosition:null}],doi:[{type:"url",value:null,field:null,sed:[".*((10\\.[0-9]{4})/[^\\/\\?\\#]*).*","$1"],relativePosition:null}],issn:null,
corrAuthor:null,access:[{type:"url",value:null,field:null,sed:[".*/([A-z]+)/((10\\.[0-9]{4})/[^\\/\\?\\#]*).*","$1"],relativePosition:null}],denial:null},enableRemarqByDefault:!0,userAgentSupported:!0,doi:null,access:null,articleInfo:null,authenticatedUser:null,rmq_sbc:0,whatsNew:null,stickyWidgetConfiguration:{topAir:100,bottomAir:30,stickyWidth:null,air:25}};var T=Object.freeze(function(){var a=new R.HolderUtil;a.put(t.WIDGET_NAMES.REMARQ,new f(t.WIDGET_NAMES.REMARQ,t.WIDGET_STATUS.UNINSTALLED));
a.put(t.WIDGET_NAMES.TOP_WIDGET,new f(t.WIDGET_NAMES.TOP_WIDGET,t.WIDGET_STATUS.UNINSTALLED));a.put(t.WIDGET_NAMES.CORNER_WIDGET,new f(t.WIDGET_NAMES.CORNER_WIDGET,t.WIDGET_STATUS.UNINSTALLED));a.put(t.WIDGET_NAMES.POLL_WIDGET,new f(t.WIDGET_NAMES.POLL_WIDGET,t.WIDGET_STATUS.UNINSTALLED));a.put(t.WIDGET_NAMES.SURVEY_WIDGET,new f(t.WIDGET_NAMES.SURVEY_WIDGET,t.WIDGET_STATUS.UNINSTALLED));a.put(t.WIDGET_NAMES.STICKY_WIDGET,new f(t.WIDGET_NAMES.STICKY_WIDGET,t.WIDGET_STATUS.UNINSTALLED));a.put(t.WIDGET_NAMES.PDF_FRAME,
new f(t.WIDGET_NAMES.PDF_FRAME,t.WIDGET_STATUS.UNINSTALLED));return a}())},RTiT:function(c,h,a){function f(a,b){var c="undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=d(a))||b&&a&&"number"===typeof a.length){c&&(a=c);var e=0;b=function(){};return{s:b,n:function(){return e>=a.length?{done:!0}:{done:!1,value:a[e++]}},e:function(a){throw a;},f:b}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}var g=!0,f=!1,m;return{s:function(){c=c.call(a)},n:function(){var a=c.next();g=a.done;return a},e:function(a){f=!0;m=a},f:function(){try{if(!g&&null!=c["return"])c["return"]()}finally{if(f)throw m;}}}}function d(a,c){if(a){if("string"===typeof a)return b(a,c);var d=Object.prototype.toString.call(a).slice(8,-1);"Object"===d&&a.constructor&&(d=a.constructor.name);if("Map"===d||"Set"===d)return Array.from(a);if("Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return b(a,c)}}function b(a,
b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function w(a){var b="temporary";switch(a){case 0:b="private";break;case 1:case 4:b="comment";break;case 3:case 6:b="update";break;case 7:b="conversation"}return"rmq-annotator-hl-"+b}c=a("NM/j");var D=a.n(c);c=a("Oy1H");var q=a.n(c);c=a("7hDC");var m=a.n(c);c=a("En79");var A=a.n(c),u=a("D79o");c=a("RyI1");var e=a.n(c);c=a("JDN0");var r=a.n(c);c=a("nfWN");var t=a.n(c);c=a("nIHh");var R=a.n(c);c=a("NGEn");var K=a.n(c);
c=a("2247");var N=a.n(c);c=a("rCVp");a.n(c);c=a("hygk");var F=a.n(c);c=a("L8MQ");var G=a.n(c);c=a("KgVm");var I=a.n(c);c=a("AgIj");var B=a.n(c);c=a("bpPp");var v=a.n(c),H=a("sCxY"),T=a("jItp"),Y=a("OYJC"),P=a("yVmd"),L=a("cuGy"),U=a("s6UT"),ka=a("6t3S"),g=a("7t+N");g.__orig="rmq";window.jQuery?window.jQuery.__orig="own":(g=a("7t+N"),g.__orig="rmq",window.jQuery=g);var V=!!(window.view&&window.view.state&&window.view.state.doc),ia=-1===navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari"),
J=/[\s,.\-]/g,ra=/[^\s,.\-]/;window.annotatorHelperCnt=0;c={setPageIndex:function(a,b){this.pageIndex=a;this.pageIndex.commentIdx={};this.pageIndex.pageAnnotations={};this.adapter=b;this.pageIndex=a;this.pageIndex.onPageChange={};this.pageIndex.currentPage=b.getCurrentPage();this.pageIndex.pushPageChange=function(a,b){this.onPageChange[a]?this.onPageChange[a].push(b):this.onPageChange[a]=[b]};this.pageIndex.popPageChange=function(a){return this.onPageChange[a]&&this.onPageChange[a].pop()};this.pageIndex.clearPageHandlers=
function(a){this.onPageChange[a]=[]}},setGp:function(a){this.gp=a;return this},setArticleInfo:function(a){this.articleInfo=a;return this},compress:function(a){return a&&a.replace(J,"")},instruct:function(){var b=m()(A.a.mark(function Ia(b,c,d,m){var h,fa,x,z,pa,J,ha,Aa,qa,za,E,ua,va,Va,Wa,vb,ea,Ma,Ba,wb,Xa,aa,la,fb,Sa,Ya,Za,Ea,O,ba,W,Fa,X,$a,l,xa,Qa,ab,Ta,pb,Ha,xb,qb,Fb,Ga,kb,yb,La,sb,zb,bb,S,oa,Oa,rb,Na,cb,Ua,Ca,db,ib,Ra,Ab,lb;return A.a.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:lb=function(){return"pdf"!==
d.toLowerCase()};Ab=function(a,b,c){b=b||"$";c=c||"\\";for(var d=0,k=a.indexOf(b),e=!1,g="";-1!==k;)a[k-1]===c?k=a.indexOf(b,k+2):(d=a.substring(d,k),e||"$"===d||("$"===d[0]&&(d=d.substr(1)),g+=d),e=!e,d=k,k=a.indexOf(b,k+1));d=a.substring(d);return g+d};Ra=function(a,b,c){b=b||"$";c=c||"\\";var d="string"===typeof a?a:a.textContent,k=RegExp("\\"+b,"g");if(!0===a.equation&&a.matches){if(a.matches('script[type*="math/"]')){if((new DOMParser).parseFromString(d,"text/xml").querySelector("parsererror"))return d=
d.replace(k,c+b),"$"+d+"$";if(a=(a=/<([^>]*):math/.exec(d))&&a[1])d=d.replace(new RegExp(a+"\\:","g"),""),d=d.replace("xmlns:"+a,"xmlns");return d.replace(/[\n|\t]/g,"")}if(a.matches('span[data-jats="latex"]')||a.matches('span[data-ams-doc^="math"]'))return d;throw{msg:"Unknown equation node",node:a};}return d=d.replace(k,c+b)};ib=function(a,b,c,d){if(-1<a){var k=Ca(Object.keys(O.idx().parent),a),e=Ca(Object.keys(O.idx().parent),b);0>k&&(k=-1-k);0>e&&(e=-e-1);var g=Object.keys(O.idx().parent)[k],
f=O.idx().parent[g];k=O.idx().textNode[g];var m=Object.keys(O.idx().parent)[e],h=O.idx().parent[m];e=O.idx().textNode[m];a=db(f,a-g,k,0);b=db(h,b-m,e,-0);if(null!=a&&null!=b)return k=a.el,c=a.offset,e=b.el,{startElement:k,startOffset:c,endElement:e,endOffset:b.offset+1,certainty:d};Object(L.debug)(a,b,c)}else return null};db=function(a,b,c,d){for(d=parseInt(d)||0;0>b+d;)a=fa(c.textContent),d+=a.length,c=$a(O.idx().textNode,c);l(c);for(a=0;;){for(var k=c.textContent.split(""),e=0;e<k.length;e++){if(a==
b+d)return{el:c,offset:e};ra.test(k[e])&&a++}c=X(O.idx().textNode,c);if(null==c)return null}};Ca=function(a,b){for(var c=0,d=a.length-1,k,e;c<=d;)if(k=(c+d)/2|0,e=a[k],e<b)c=k+1;else if(e>b)d=k-1;else return k;return~d};Ua=function(a){var b={indication:"unSelectComment"};b.unSelectComment=a;Oa(b)};cb=function(a){var b={indication:"scrollToComment"};b.scrollComment=a;Oa(b)};Na=function(a){for(var b=[],c=0;c<a.length;c++){var d={};d.commentId=a[c].commentId;d.access=a[c].access;a[c].groupId&&(d.groupId=
a[c].groupId);b.push(d)}return b};rb=function(a){a.origin||(a.origin=x);a.contentType=d;var c=h.gp&&h.gp.origin;try{var k=b.parent.origin}catch(Da){}b.parent.postMessage(a,c||k||"*")};Oa=function(a){Object(L.debug)("[AH] Should Relay message",a);a.origin||(a.origin=x);a.contentType=d;if(document.getElementById("GroveSide")){var c=document.getElementById("GroveSide").contentWindow;a.contentType=d;Object(L.debug)("[AH] Should Relay message #2",a);c.postMessage(a,"*")}else Object(L.debug)("[AH] Should Relay message #3",
a),b.parent.postMessage({relay:"GroveSide",msg:a,origin:x},"*")};oa=function(a,c){a.origin||(a.origin=x);b.parent.postMessage({relay:c||"GroveSide",msg:a,origin:x},"*")};S=function(a){var b={indication:"updateRanges"};b.data=a;Oa(b)};bb=function(a){var b={indication:"updateOffset"};b.annotationSection=a;Oa(b)};zb=function(a){var b={};b.commentId=a.commentId;b.offset=a.offset;b.access=a.access;b.context=a.context;b.page=a.page;b.resolved=a.resolved;a.quoteHTML&&0<a.quoteHTML.trim().length&&(b.quoteHTML=
a.quoteHTML);return b};sb=function(a,b,c,d){var e={};e.indication=b;e.annotationSection=a;e.origIndication=c;e.tile=d;Oa(e)};La=function(a,c){c=Object.assign({access:c},a);c.fontFamilies instanceof Set&&(c.fontFamilies=Array.from(c.fontFamilies));c.section=a.quote;delete c.highlights;b&&b.articleInfo?(c.articleInfo=b.articleInfo,c.siteUrl=b.articleInfo.siteUrl,c.doi=b.articleInfo.doi,b.articleInfo.page&&!c.page&&(c.page=b.articleInfo.page)):b&&(c.siteUrl=b.location.href);c.fromHiglightMenu=!0;return c};
yb=function(a,b,c){function d(a){var b=a.split("/");return(a=N()(["p"],function(a){return B()(b,function(b){return(b=/^(.*)\[(.*)\]$/.exec(b))&&a==b[1]})}).filter(function(a){return-1!=a})[0])?v()(b,0,a+1).join("/"):null}function e(a){try{var c=E.Util.nodeFromXPath(a,b)}catch(Pa){c="",0!==a.indexOf("//")&&(c=0===a.indexOf("/")?"/":"//"),c=document.evaluate(c+a,b,null,0,null).iterateNext()}return(a=g(c).nextAll("[data-paragraph-end]"))&&a[0]&&(a=E.Util.xpathFromNode(g(a[0]),b),Array.isArray(a))?a=
a[0]:null}function k(a){var b=a.split("/");1<b.length&&(a="/"+b[1]);h=a}if(null==c||void 0==c){if(!a.ranges[0])return null;var f=a.ranges[0].start,m=a.ranges[a.ranges.length-1].end}var h=c&&d(c)||d(f)||d(m);h||(h=c&&e(c)||e(f)||e(m));h||(h=c&&k(c)||k(f)||k(m));h||(h=m);if(f=E.Util.nodeFromXPath(h,b))if(1==a.access||4==a.access)c=ba[h]||[],m=f.getElementsByClassName("chatballon")[0],c&&0<c.filter(function(b){return a.commentId&&b.commentId&&b.commentId==a.commentId}).length||(m?m.textContent=""+(parseInt(m.textContent)+
1):(m=document.createElement("button"),g(m).addClass("chatballon"),m.textContent="1",g(m).click(function(a){a=ba[h];xb(a);cb(Na(a)[0])}),f.appendChild(m)),99<parseInt(m.textContent)?g(m).addClass("big"):g(m).removeClass("big"),c.push(a)),a.chatballon=m,a.paragraphXpath=h,ba[h]=c;else if(3==a.access||6==a.access){c=W[h]||[];m=f.getElementsByClassName("chatballonU")[0];if(!(c&&0<c.filter(function(b){return a.commentId&&b.commentId&&b.commentId==a.commentId}).length)){if(m)m.textContent=""+(parseInt(m.textContent)+
1);else{m=document.createElement("button");g(m).addClass("chatballonU");m.textContent="1";g(m).click(function(a){a=W[h];xb(a);cb(Na(a)[0])});var l=f.getElementsByClassName("chatballon")[0];l&&f.insertBefore(m,l);f.appendChild(m)}99<parseInt(m.textContent)?g(m).addClass("big"):g(m).removeClass("big");c.push(a)}a.chatballonU=m;a.paragraphXpath=h;W[h]=c}return{chatballon:a.chatballon,chatballonU:a.chatballon,paragraphXpath:a.paragraphXpath}};kb=function(a,b){return yb(a,b)};Ga=function(a,b){var c=b.slice(0);
a.selectedRanges=null;var d=[];a=g("body").find(".rmq-annotator-hl").addBack().map(function(){return g(this).data("annotation")}).toArray().reduce(function(a,b){a.set(b.commentId,b);return a},new Map);a=Array.from(a.values());a.forEach(function(a){var b=I()(c,function(b){return a.commentId===b.commentId});-1===b&&a.commentId?d.push(a):-1<b&&c.splice(b,1)});d.forEach(function(a){O.deleteAnnotation(a);if(a.chatballon){var b=parseInt(a.chatballon.innerText);1<b?a.chatballon.innerText=""+(b-1):a.chatballon.remove()}a.chatballonU&&
(b=parseInt(a.chatballonU.innerText),1<b?a.chatballonU.innerText=""+(b-1):a.chatballonU.remove())});return c};xb=function(a){var b=t()(a,function(a){var b=a.commentId;return void 0!==a.highlights?a.highlights:g.grep(g("body").find(".rmq-annotator-hl"),function(a){return Ta(a,b)})});b.forEach(function(a){g(a).toggleClass("rmq-active",!0)});setTimeout(function(){b.forEach(function(a){g(a).toggleClass("rmq-active",!1)})},3E3)};Ha=function(a){var b=g(a).data("annotation");a=g(a).data("rmqCommentId");
if(b)return h.annotationCache[a]||b;if(a)return h.annotationCache[a]};pb=function(a,b){a=g(a).data();return a.annotation?a.annotation.access===b:a.rmqAccess?b===a.rmqAccess:!1};Ta=function(a,b){var c=g(a).data();if(c.annotation)var d=c.annotation.commentId;else if(c.rmqCommentId||a.dataset.rmqCommentId)d=c.rmqCommentId||a.dataset.rmqCommentId;if(d){if(d===b)return!0;if(d.startsWith("tmp_"))return(a=h.tmpIdSubstutionMap[d])&&b===a}return!1};l=function(a){if(null==a)return-1;var b=O.idx().textNode.indexOf(a);
if(-1==b){Object(L.info)("DOM has changed since we started - need to check the parent index");for(var c=a.parentNode,d=O.idx().parent.indexOf(c);-1==d&&null!=c;){c=c.parentNode;if(null==c)break;d=O.idx().parent.indexOf(c)}var e=Object.keys(O.idx().parent).indexOf(""+d),k=recur(c);c=Object.keys(O.idx().parent)[e+1];O.idx();e=new Set;for(var g=d;g<c;g++){var f=O.idx().textNode[g];null!=f&&(e.add(f),delete O.idx().textNode[g])}Object.keys(k.textNode).map(function(a){return parseInt(a)}).forEach(function(c){O.idx().textNode[c+
d]=k.textNode[c];k.textNode[c]==a?b=c+d:k.textNode[c].textContent==a.textContent&&(b=c+d)})}return b=Object.keys(O.idx().textNode).indexOf(""+b)};$a=function(a,b){b=Fa(a,b);return 0<b?(b=Object.keys(a)[b-1],null!=b?a[""+b]:null):null};X=function(a,b){b=Fa(a,b);b=Object.keys(a)[b+1];return null!=b?a[""+b]:null};Fa=function(a,b){b=a.indexOf(b);return-1!==b?Object.keys(a).indexOf(""+b):-1};Za=function(a){if(a)if(Xa(a))a.classList=e()(a.classList,function(a){return-1===a.indexOf("rmq-annotator")});else if(a.tagName&&
-1!==Ea.indexOf(a.tagName.toLowerCase())){a.classList=e()(a.classList,function(a){return-1===a.indexOf("rmq-annotator")});for(var b=0;b<(a.childNodes?a.childNodes.length:0);b++){var c=a.childNodes[b];if(c&&"string"===typeof c.id&&0<=c.id.indexOf("rmqId_")&&c.tagName&&"span"===c.tagName.toLowerCase()){a.removeChild(c);break}}}else g(a).replaceWith(a.childNodes)};Ya=function(a){a=a.map(function(a){return a._parent?a._parent:a});for(var b=null,c=0;c<a.length;c++)a[c]!==b?b=a[c]:a[c]=null;return a.filter(function(a){return null!==
a})};Sa=function(a,b,c){b=b||[];var d=!1;a=g(a).toArray();do d=!1,a=t()(a.map(function(a){if(a.tagName&&c&&-1!==c.indexOf(a.tagName.toLowerCase())||!a.hasChildNodes())return[a];d=!0;var e=R()(a.childNodes),k=-1!==b.indexOf(a.tagName.toLowerCase());e.forEach(function(b){k?b._parent=a:a._parent&&(b._parent=a._parent)});return e}));while(d);return a};aa=function(a){for(;a;){var b=Ma(a),c=wb(a),d=Ba(a);if(d)return[d,a];if(b){if(b=g(a).find('script[type^="math"]')[0])return[b,a];break}else if(c)return[c,
a];a=a.parentNode}return[null,null]};Xa=function(a){return Ma(a)||wb(a)||Ba(a)};wb=function(a){if(a&&a.matches&&a.matches('span[data-jats^="math"]'))return a.querySelector('span[data-jats="latex"].accessibly-hidden');if(a&&a.matches&&a.matches('span[data-ams-doc^="math"]'))return a.querySelector('span[data-ams-doc^="math"].accessibly-hidden')};Ba=function(a){return a instanceof HTMLElement&&a.matches("span.MathJax")?(a=a.nextElementSibling,a.matches('script[type^="math/"]')?a:null):null};Ma=function(a){return a.className&&
"string"===typeof a.className&&(-1!==a.className.indexOf("-eqn")||-1!==a.className.indexOf("disp-formula"))};ea=function(a){Array.isArray(a)&&1==a.length&&a[0]&&a[0].id&&0===a[0].commonAncestor.indexOf("MathJax")&&(a[0].commonAncestor=g(a[0].commonAncestor).parents(".MathJax_Display").next()[0]);return a};vb=function(a){a={type:a};document.getElementById("GroveSide")&&document.getElementById("GroveSide").contentWindow.postMessage(a,"*")};pa=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};
0<this.annotatorHelperCnt++&&Object(L.error)("Annotator already instructed");d=(d||"html").toUpperCase();h=this;h.id=(new Date).getTime();h.tmpIdSubstutionMap={};h.annotationCache={};fa=h.compress;x="string"===typeof document.body.id&&""!==document.body.id&&document.body.id;x||(z=h.adapter&&h.adapter.getCurrentPage&&h.adapter.getCurrentPage(),"number"===typeof z?z=""+z:"object"===q()(z)&&(z=JSON.stringify(z)),x="Page_"+z);m&&(h.worker=m,h.worker.onmessage=function(a){var b=a.data.messageId,c=h.workerPromises[b],
d=a.data.err;a=a.data.result;c&&(delete h.workerPromises[b],a?c.resolve(a):d?c.reject(d):c.reject("NothingReturned"))},h.workerPromises=[],h.submitJob=function(a){var b=Math.random().toString(36).substring(2);a.messageId=b;var c=new Promise(function(a,c){h.workerPromises[b]={resolve:a,reject:c}});h.worker.postMessage(a);return c});J=pa();Aa=ha=!0;qa=window.jQuery;window.jQuery=g;M.prev=59;za=a("0Mzu");M.next=66;break;case 63:throw M.prev=63,M.t0=M["catch"](59),M.t0;case 66:E=h._Annotator=za.Annotator||
za;if(!V){M.next=73;break}M.next=70;return a.e(4).then(a.bind(null,"S8/A"));case 70:ua=M.sent,ua=ua["default"]||ua,E=ua(E,h);case 73:return qa&&(window.jQuery=qa),E.prototype._setupWrapper=function(){this.element.find("script").filter(':not([type*="math/"])').remove();this.element.addClass("rmq-annotator-wrapper");this.wrapper=this.element;h.wThis=this;return this},E.prototype._setupViewer=function(){return this},E.prototype._setupEditor=function(){return this},E.Notification=function(){},E.prototype.destroy=
function(){ha?h.touchEventsHandler.stop():(document.removeEventListener("mouseup",this.checkForEndSelection),document.removeEventListener("mousedown",this.checkForStartSelection));g("#annotator-dynamic-style").remove();this.adder&&this.adder.remove();this.viewer&&this.viewer.destroy();this.editor&&this.editor.destroy();this.wrapper&&this.wrapper.find(".rmq-annotator-hl").each(function(){Za(this)});this.element&&this.element.removeClass("rmq-annotator-wrapper");this.element&&this.element.data("annotator",
null);var a=this.plugins;for(b in a)this.plugins[b].destroy();this.removeEvents();var b=E._instances.indexOf(this);if(-1!==b)return E._instances.splice(b,1)},E.prototype.events={".rmq-annotator-hl mouseover":"onHighlightMouseover",".rmq-annotator-hl mouseout":"startViewerHideTimer",".rmq-annotator-adder button click":"onAdderClick",".rmq-annotator-adder button mousedown":"onAdderMousedown"},J&&(E.prototype.events=Object.assign(E.prototype.events),E.prototype.events={".rmq-annotator-adder button touchend":"onAdderClick"}),
va=document.getElementById("rmrqTourMode")&&"true"===document.getElementById("rmrqTourMode").value,Va=this.gp&&this.gp.isLite,E.prototype.html={adder:'<div class="rmq-annotator-adder rmq_tooltipCustom" aria-modal="true"><div class="rmq_tooltiptext rmq_pdfTooltipbg"><button id="highlight"><div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><g transform="translate(3.000000, 2.000000)"><polygon fill="#f8f8f8" points="0 13 11 13 11 12 0 12"></polygon><path fill="#f8f8f8" d="M1.41222388,7.76602119 L0,9.22181369 L2.70562744,11.4613037 L3.90055197,10.2714002 L6.10399263,9.49181108 C6.27186931,9.45774448 6.42432144,9.36721231 6.53455341,9.23296783 L10.7121763,4.10573462 C11.4966018,3.14240008 11.4456458,1.73074241 10.5635903,0.876360432 C9.5470617,-0.108570284 8.17015245,0.00985276586 7.37327375,0.762518151 L2.4184515,5.05239021 C2.28857681,5.16579913 2.20289355,5.31750614 2.17245618,5.48314331 L1.41222388,7.76602119 Z M9.87368038,3.42274977 L5.69746197,8.54826531 C5.73746826,8.49954004 5.78863949,8.46405676 5.84509535,8.44410079 L5.78998674,8.45576148 L3.3008194,9.33644225 L2.66821289,10.0626831 L1.61816406,9.09716797 L2.27437774,8.43044769 L2.39929014,8.22479354 L3.2141979,5.77773238 L3.22462418,5.72323352 C3.20611601,5.77886906 3.17300281,5.82922848 3.1280883,5.86845046 L8.09853212,1.56439002 C8.5203635,1.16665716 9.24476428,1.10435404 9.81111104,1.65309641 C10.2821702,2.10937658 10.3102266,2.88663752 9.87368038,3.42274977 Z"></path><polygon fill="#f8f8f8" points="3 5.75518453 6.34423899 9.18321503 7.11834502 8.4280305 3.77410604 5"></polygon><polygon fill="#f8f8f8" points="1.61553955 8.29144287 3.62811279 10.0869141 4.58270264 9.5645752 1.77410604 7"></polygon></g></g></g></svg></div><div class="rmq_adderText">HIGHLIGHT</div></button>'+
'<button id="note" '.concat(va?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin-left: 4px"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path fill="#f8f8f8" d="M1.98730469,0 L1.98730469,5 L0,5 L0,15 L10.999,15 L10.999,5 L8.9675293,5.03501211 L8.9675293,0.0350121094 L1.98730469,0 Z M3,0.999 L8.031,0.999 L7.99909961,5 L3,5 L3,0.999 Z M0.999,14 L9.999,14 L9.999,6 L0.999,6 L0.999,14 Z M5,12.001 L6,12.001 L6,8 L5,8 L5,12.001 Z"></path></g></g></svg></div><div class="rmq_adderText">NOTE</div></button>'+
(Va?"":'<button id="comment" '.concat(va?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="17px" height="17px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><g transform="translate(2.000000, 3.000000)"><polygon fill="#f8f8f8" points="1.67657143 3.04367885 10.248 3.04367885 10.248 2.197525 1.67657143 2.197525"></polygon><polygon fill="#f8f8f8" points="1.67657143 5.15906346 10.248 5.15906346 10.248 4.31290962 1.67657143 4.31290962"></polygon><polygon fill="#f8f8f8" points="1.67657143 7.27444808 7.42564286 7.27444808 7.42564286 6.42829423 1.67657143 6.42829423"></polygon><polyline stroke="#f8f8f8" stroke-linecap="square" points="11.8175786 0.105769231 0.107078571 0.105769231 0.107078571 9.07182692 7.14550714 9.07182692 10.2899357 10.9306154 10.2708643 9.06759615 11.8175786 9.06759615 11.8175786 0.105769231"></polyline></g></g></g></svg></div><div class="rmq_adderText">COMMENT</div></button>')+
'<button id="conversation" '.concat(va?"disabled":"",">")+'<div class="rmq_adderIcon"><svg width="21px" height="21px" viewBox="0 0 21 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path fill="#f8f8f8" id="a" d="M9 17.988V10h11.262v7.984h-1.35l.02 2.014-3.401-2.01H9zm1-1h5.804l2.11 1.247-.013-1.25h1.36V11H10v5.988zM15.64 10V4H2v10.047h1.664L3.64 16.44l4.04-2.388H9v-1H7.406l-2.748 1.624.017-1.629H3V5h11.64v5h1z"/></g></g></svg></div><div class="rmq_adderText">DISCUSS</div></button></div></div>',
wrapper:'<div class="rmq-annotator-wrapper"></div>'},Wa=E.prototype.publish,E.prototype.publish=function(a,b){Wa.call(h.annotator,a,b);var c=null;try{c=JSON.parse(JSON.stringify(b))}catch(Da){}a={evtName:a,page:h.adapter&&h.adapter.getCurrentPage(),evtArgs:c};rb(a)},E.prototype.onHighlightMouseover=function(a){Object(L.debug)("onHighlightMouseover")},E.prototype.startViewerHideTimer=function(a){Object(L.debug)("startViewerHideTimer")},E.prototype._setupDocumentEvents=function(){if(ha){var a=new Y.a(E,
this,E.Range.BrowserRange,ea,h),b=new Y.b(window,document,h);b.start();b.subscribe(a);h.touchEventsHandler=b}else Aa&&(document.addEventListener("mouseup",this.checkForEndSelection),document.addEventListener("mousedown",this.checkForStartSelection));return this},E.prototype.checkForStartSelection=function(a){return this.mouseIsDown=!0},E.prototype.getSelectedRanges=function(){if(V)return this.proseMirrorGetSelectedRanges();var a=E.Util.getGlobal().getSelection();var b=[];var c=[];if(!a.isCollapsed){var d;
var e=[];var g=b=0;for(d=a.rangeCount;0<=d?b<d:b>d;g=0<=d?++b:--b){var f=a.getRangeAt(g);for(g=new E.Range.BrowserRange(f);g.endContainer.nodeType===Node.ELEMENT_NODE&&0==g.endContainer.childNodes.length;){g.endContainer=g.endContainer.previousElementSibling?g.endContainer.previousElementSibling:g.endContainer.parentNode;var m=g.endContainer.childNodes.length;g.endOffset=1<m?m-1:1}for(;g.startContainer.nodeType===Node.ELEMENT_NODE&&0==g.startContainer.childNodes.length;)g.startContainer=g.startContainer.nextElementSibling?
g.startContainer.nextElementSibling:g.startContainer.parentNode,g.startOffset=0;try{var h=g.normalize().limit(this.wrapper[0]);null===h&&c.push(f);e.push(h)}catch(eb){}}b=e}return b},E.Util.mousePosition=function(a,b){var c=g(b).css("position");"absolute"!==c&&"fixed"!==c&&"relative"!==c&&(b=g(b).offsetParent()[0]);c=g(b).offset();if(ia&&!pa()){var d=g(b).parents("[style*=left]").css("left");b=g(b).parents("[style*=top]").css("top");d=d&&d.replace("px","");b=b&&b.replace("px","");d=d&&parseFloat(d);
b=b&&parseFloat(b);null!=b&&(c.top=b);null!=d&&(c.left=d)}return{top:a.pageY-c.top,left:a.pageX-c.left}},E.Util.findSelectionOffset=function(a,b){b?(a=g(b).css("position"),"absolute"!==a&&"fixed"!==a&&"relative"!==a&&(b=g(b).offsetParent()[0]),b=g(b).offset()):b={top:0,left:0};return(a=(a=E.Util.getGlobal().getSelection())&&a.getRangeAt(a.rangeCount-1))&&0<a.getClientRects().length?(a=a.getClientRects(),a=a[a.length-1],{top:a.bottom+window.pageYOffset-b.top,left:a.right-b.left}):null},E.prototype.checkForEndSelection=
function(a,c){var d=0===a.type.indexOf("mouse");a.type.indexOf("touch");var e=0===a.type.indexOf("selection");var k=a.button;if(!(d&&0!==k||this.ignoreMouseup)){this.mouseIsDown=!1;var f=this.selectedRanges=ea(this.getSelectedRanges());d=0;for(k=f.length;d<k;d++){var m=f[d];m=m.commonAncestor;g(m).hasClass("rmq-annotator-hl")&&(m=g(m).parents("[class!=rmq-annotator-hl]")[0]);if(this.isAnnotator(m))return}if(a&&this.selectedRanges.length){if(e?(k=window.getSelection().focusNode,k.nodeType!==Node.ELEMENT_NODE&&
(k=k.parentElement)):k=a.target,d=E.Util.mousePosition(a,this.wrapper[0]),d=(f=E.Util.findSelectionOffset(a,this.wrapper[0]))||d||{left:0,top:0},h.adapter&&h.adapter.adjustEndSelectionOffset?d=h.adapter.adjustEndSelectionOffset(k,ia?f:d):(k=this.wrapper.width(),k=d.left+this.adder.width()-k,0<k&&(d.left-=k)),k=this.selectedRanges.map(function(a){return a.serialize(O.wrapper[0],"rmq-annotator-hl")}),(f=this.selectedRanges.map(function(a){return E.Range.sniff(a).normalize(O.wrapper[0]).text()}).join(" "))||
this.pvSection){if(f&&f!==this.pvSection)return this.pvSection=f,va&&Oa({indication:"selectionEnd",ranges:k,section:f}),b.parent.postMessage({relay:"contentFrames",msg:{messageIndication:"adderShown",windowId:window.articleInfo&&window.articleInfo.id},origin:x},"*"),this.adder.is(":visible")||Object(ka.a)(h.gp)("AnnotatorDialog","AdderShown"),a=this.adder.css(d).show(),c&&c(!0),a;if(!e)return this.adder.is(":visible")&&Object(ka.a)(h.gp)("AnnotatorDialog","AdderHidden"),h.candidateAnnotation?(sb({},
"commentCancelled"),O.deleteAnnotation(h.candidateAnnotation),delete h.candidateAnnotation):Oa({action:"onAdderClickClear"}),this.selectedRanges.splice(),delete this.pvSection,e=this.adder.hide(),a.target.matches(".rmq-annotator-hl")||(rb({action:"resize",origin:x,expanded:!1,frameId:["CornerWidget","GroveSide"],"class":"collapsed"}),oa({action:"resize",expanded:!1},["GroveSide","CornerWidget"])),c&&c(!1),e}}else return this.adder.is(":visible")&&Object(ka.a)(h.gp)("AnnotatorDialog","AdderHidden"),
h.candidateAnnotation?(sb({},"commentCancelled"),O.deleteAnnotation(h.candidateAnnotation),delete h.candidateAnnotation):Oa({action:"onAdderClickClear"}),delete this.pvSection,e=this.adder.hide(),a.target.matches(".rmq-annotator-hl")||(rb({action:"resize",origin:x,expanded:!1,frameId:["CornerWidget","GroveSide"],"class":"collapsed"}),oa({action:"resize",expanded:!1},["GroveSide","CornerWidget"])),c&&c(!1),e}},E.Range.NormalizedRange.prototype.text=function(){var a=null,b=this.leafNodes().filter(function(a){return a.nodeType===
Node.ELEMENT_NODE?O.recur_filter(a,!1):a.nodeType===Node.TEXT_NODE?O.recur_filter(a.parentNode,!1):!1});b=b.map(function(b){var c=aa(b.parentNode);return(c=D()(c,2)[0])?c!==a?(a=c,c.equation=!0,c):null:b}).filter(function(a){return null!=a});b=b.map(function(a){return Ra(a)});return b.join("")},la=function(a){return function(b,c){b=b.getAttribute(a);return r()(b)?"/".concat(c,"[@").concat(a,'="').concat(b,'"]'):null}},fb=[la("name"),function(a,b){var c=a.getAttribute("id");if(null!=c&&-1==!c.indexOf("rmqId"))return"".concat(b,
'[@id="').concat(c,'"]');c=a.getAttribute("data-page-number");return r()(c)?(b="".concat(b,'[@data-page-number="').concat(c,'"]'),(a=a.getAttribute("class"))&&-1!==a.split(" ").indexOf("page")?"".concat(b,'[@class="').concat(a,'"]'):b):null}],E.Util.xpathFromNode=function(a,b){var c=a[0];for(a=[];c!==b&&null!=c&&c.tagName;){var d=c.tagName&&c.tagName.replace(":","\\:").toLowerCase(),k=fb.map(function(a){return a(c,d)}).filter(function(a){return null!=a});if(k[0]){k=k[0];a.unshift(k);break}else if(c.parentElement)k=
e()(c.parentElement.children,function(a){return a.tagName===c.tagName}).indexOf(c)+1,k="".concat(d,"[").concat(k,"]"),a.unshift(k),c=c.parentElement;else break}return["/"+a.join("/")]},E.Util.nodeFromXPath=function(a,b){var c=Object(H.a)(a,b);if(c[0])return c[0];if("/"===a[0]){c=Object(H.a)(a.substring(1),b);if(c[0])return c[0];"/"!==a[1]&&(a="/"+a)}else a="//"+a;c=Object(H.a)(a,b);return c[0]},E.Range.nodeFromXPath=E.Util.nodeFromXPath,E.Range.NormalizedRange.prototype.leafNodes=function(a,b){b=
Sa(g(this.commonAncestor),a,b);var c=b.indexOf(this.start);-1===c&&a&&-1!==a.indexOf(this.start.parentElement.tagName.toLowerCase())&&(c=b.indexOf(this.start.parentElement));var d=b.indexOf(this.end);-1===d&&a&&-1!==a.indexOf(this.end.parentElement.tagName.toLowerCase())&&(d=b.indexOf(this.end.parentElement));return g.makeArray(b.slice(c,+d+1||9E9))},E.prototype.deleteAnnotation=function(a){if(a.proseMirror)this.proseMirrorDeleteAnnotation(a);else{var b=a.commentId;g.grep(g("body").find(".rmq-annotator-hl"),
function(a){return Ta(a,b)}).forEach(function(a){return Za(a)})}this.publish(P.a.ANNOTATION_DELETED_EVENT,[function(a){(a=Object.assign({},a))&&a.highlights&&delete a.highlights;return a}(a)]);return h.adapter&&h.adapter.onDeletedAnnotation?h.adapter.onDeletedAnnotation(a):a},E.prototype.clearEventHandler=function(){var a=this;setTimeout(function(){var b=window.getSelection();b&&"Range"!==b.type&&(this.ignoreMouseup=!1,E.Util.getGlobal().getSelection().removeAllRanges(),a.selectedRanges=null)},300)},
E.prototype.onAdderKeyUp=function(a){("Escape"===a.key||27===a.keyCode)&&this.adder&&this.adder.hide()},E.prototype.onAdderClick=function(a){Object(L.debug)("onAdderClick");var b=!1;null!=a&&a.preventDefault();var c=a.currentTarget&&a.currentTarget.id||a.target.id;""===c&&(c=g(a.target).parents("button")[0].id);if(""===c)this.adder.hide();else{vb("target id="+c);J||this.adder.hide();if("highlight"===c)b=!0;else if("clear"===c)return;if(!d){var d=this.setupAnnotation(this.createAnnotation(),!1);g(d.highlights).addClass("rmq-annotator-hl-temporary")}if(b){var e=
0;var k="highlight"}else"comment"===c?(e=1,k="candidateCreateComment"):"note"===c?(e=0,k="candidateNote"):"update"===c?(e=3,k="candidateUpdateComment"):"conversation"===c&&(e=7,k="candidateHighlightConversation");if(k){Object(ka.a)(h.gp)("AnnotatorDialog",k);try{sb(La(d,e),k,void 0,"candidateNote"===k?"types":void 0),g(".rmq-annotator-hl-temporary").filter(function(a,b){return-1===d.highlights.indexOf(b)}).map(function(a,b){return g(b)}),h.candidateAnnotation&&g(h.candidateAnnotation.highlights).hasClass("rmq-annotator-hl-temporary")&&
this.deleteAnnotation(h.candidateAnnotation),h.candidateAnnotation=d}catch(gb){Object(L.error)("While sending annotation event",gb)}this.ignoreMouseup=!1}}},Ea="sup sub b i em h1 h2 h3 h4 img".split(" "),E.prototype.highlightRange=function(a,b){var c=this;null==b&&(b="annotator-hl");var d=Object(T.getRandomId)();var e=g("<span id='rmqId_".concat(d,"' class='").concat(b,"'></span>"));var k,f=a.leafNodes(Ea,["svg"]).filter(function(a){return c.recur_filter(a)&&c.recur_filter(a.parentNode)}),m=new Set;
a=!0;for(var h=f.length;a;){var l=f.reduce(function(a,b){b._parent&&(a.get(b._parent)?a.get(b._parent).push(b):a.set(b._parent,[b]));return a},new Map);Array.from(l.entries()).filter(function(a){a=D()(a,2);var b=a[1],c=Sa(a[0],Ea,["svg"]);b.forEach(function(a){var b=c.indexOf(a);-1!==b?c.splice(b,1):(b=Ya(c),a=b.indexOf(a),-1!==a&&Sa(b[a],Ea,["svg"]).forEach(function(a){a=c.indexOf(a);-1!==a&&c.splice(a,1)}))});return 0===c.length}).forEach(function(a){var b=D()(a,2);a=b[0];b=b[1];var c=f.indexOf(b[0]);
f.splice(c,b.length,a)});a=0<l.size&&l.size<h;h=l.size}f=f.map(function(a){var c=aa(a.parentNode),f=D()(c,2);c=f[0];f=f[1];return c?c!==k?(k=c,g(f).addClass(b).show()[0]):null:a.tagName&&-1!==Ea.indexOf(a.tagName.toLowerCase())?(a.id||a.setAttribute("id","rmqId_".concat(d)),g(a).addClass(b).show()[0]):-1!==Ea.indexOf(a.parentNode.tagName.toLowerCase())?(c=E.Util.getTextNodes(g(a.parentNode)).get(),c.map(function(a){return m.has(a)}).reduce(function(a,b){return a||b})?null:(c.forEach(function(a){return m.add(a)}),
a.parentNode.id||a.parentNode.setAttribute("id","rmqId_".concat(d)),g(a).wrapAll(e).parent().show()[0])):g(a).parent()&&g(a).parent()[0]&&("tr"==g(a).parent()[0].tagName||"TR"==g(a).parent()[0].tagName)?(g(a).wrapInner(e),g(a).show()[0]):g(a).wrapAll(e).parent().show()[0]});f=f.filter(function(a){return null!=a});f=t()(f);f.find(function(a){return a&&a.id&&0<=a.id.indexOf("rmqId_")})||(a=document.createElement("span"),a.id="rmqId_"+d,f&&Array.isArray(f)&&f[0]&&f[0].appendChild(a));return f},E.prototype.addContextToComment=
function(a,b){function c(a){var b,c,d,k;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b=a,c=g(b.parentNode),d=E.Util.getTextNodes(c).filter(function(a,b){return f.recur_filter(b)}),k=d.index(b);case 4:if(!(0<k)){e.next=12;break}--k;b=d[k];e.next=10;return b;case 10:e.next=19;break;case 12:c=c.parent();if(!c[0]){e.next=18;break}d=E.Util.getTextNodes(c).filter(function(a,b){return f.recur_filter(b)});k=d.index(b);e.next=19;break;case 18:return e.abrupt("return");case 19:e.next=4;break;
case 21:case "end":return e.stop()}},e)}function d(a){var b,c,d,e;return A.a.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:b=a,c=g(b.parentNode),d=E.Util.getTextNodes(c).filter(function(a,b){return f.recur_filter(b)}),e=d.index(b);case 4:if(!(e<d.length-2)){k.next=12;break}e+=1;b=d[e];k.next=10;return b;case 10:k.next=19;break;case 12:c=c.parent();if(!c[0]){k.next=18;break}d=E.Util.getTextNodes(c).filter(function(a,b){return f.recur_filter(b)});e=d.index(b);k.next=19;break;case 18:return k.abrupt("return");
case 19:k.next=4;break;case 21:case "end":return k.stop()}},k)}var e=A.a.mark(c),k=A.a.mark(d),f=this;if(!b[0])return a;var m=b.map(function(a){return fa(a.text())}).join("");m=40-Ab(m).length;if(0<m){a.context={back:[],front:[]};var h=b[b.length-1].end;b=c(b[0].start);for(h=d(h);0<m;){var l=b.next();l.done||(l=fa(l.value.textContent),m>=l.length?(a.context.back.unshift(l),m-=l.length):(a.context.back.unshift(l.substring(l.length-m)),m=0));0<m&&(l=h.next(),l.done||(l=fa(l.value.textContent),m>=l.length?
(a.context.front.push(l),m-=l.length):(a.context.front.push(l.substring(0,m)),m=0)))}a.context.back=a.context.back.join("");a.context.front=a.context.front.join("")}return a},E.prototype.setupAnnotation=function(a,b,c,e){var k=!a.commentId;if(k)a.ranges=O.getSelectedRanges()||[],a.resolved=!0,h.adapter&&(a.page=h.adapter.getCurrentPage());else{var m=g.grep(g("body").find(".rmq-annotator-hl"),function(b){return Ta(b,a.commentId)});if(m&&0<m.length)return c=this.findAnnotationOffset(a),null!=c&&(k=
c.offset_v,b=c.offset_h,c=c.offset_t,a.offset!==k&&(a.offset=k,a.offset_h=b,a.offset_t=c,bb(zb(a),"updateOffset"))),a;a.quote||(a.quote=a.section);V&&(m=this.proseMirrorFindRanges(a),a.ranges=(a.ranges||[]).concat([m]));m=!1;a.ranges&&0<a.ranges.length&&(m=this.verifySelection(a.ranges,a));if(!m&&a.contextRanges&&0<a.contextRanges.length){var l=f(a.contextRanges),q;try{for(l.s();!(q=l.n()).done;){var r=q.value;if(m=this.verifySelection(r.ranges,a,r.certainty)){a.ranges=r.ranges;a.page=r.page;break}}}catch(eb){l.e(eb)}finally{l.f()}}if(m)a.resolved=
!0,Object(L.info)("%cFound ranges for %s","color: blue; font-style: bold",a.commentId);else{if(c)return a.resolved=null,a;a.ranges=this.lookupRangesInDocument(a,e)||[];a.resolved=!!a.ranges[0];c=Object(T.getMostRelativeContextRange)(d,a.contextRanges,null,a.doi);a.page=a.ranges&&a.ranges.page||c&&c.page}}c=a.offset;V?(a=this.proseMirrorHandleResolvedAnnotation(a,m,k,b),a.proseMirror=!0):(a=this.handleResolvedAnnotation(a,m,k,b),a.proseMirror=!1);h.annotationCache[a.commentId]=a;!m&&a.ranges&&0<a.ranges.length&&
(b=a.ranges&&a.ranges.offset,e=a.ranges&&a.ranges.certainty,k||(m=g(a.highlights)[0],m=a.page||m&&h.adapter&&h.adapter.getElementPage&&h.adapter.getElementPage(m),S({commentId:a.commentId,type:d,access:a.access,offset:b,certainty:e,ranges:a.ranges,page:m})));V?(b=a.offset,b===c||k||bb(zb(a))):(b=this.findAnnotationOffset(a),null!=b&&(e=b,b=e.offset_v,c=e.offset_h,e=e.offset_t,a.offset!==b&&(a.offset=b,a.offset_h=c,a.offset_t=e,k||bb(zb(a)))));return h.adapter&&h.adapter.onResolvedAnnotationSetup?
h.adapter.onResolvedAnnotationSetup(a):a},E.prototype.handleQuoteHTMLOfHighlightedElement=function(a){var b=aa(a);if(b=D()(b,2)[0])return b.equation=!0,Ra(b);var c=function(a){a=a.cloneNode(!0);var b=g(a).find("[href]").toArray();a.getAttribute("href")&&b.unshift(a);b.forEach(function(a){a.getAttribute("href");a.setAttribute("href",a.href)});b=g(a).find("[src]").toArray();a.getAttribute("src")&&b.unshift(a);b.forEach(function(a){a.getAttribute("src");a.setAttribute("src",a.src)});g("span.rmq-annotator-hl",
a).each(function(a,b){g(b).contents().unwrap()});a.style&&a.style.fontSize&&(a.style.fontSize="");return 0<a.innerHTML.length?"<"+a.tagName+">"+a.innerHTML+"</"+a.tagName+">":a.outerHTML};return-1!==Ea.indexOf(a.tagName&&a.tagName.toLowerCase())?c(a):N()(a.childNodes,function(a){if(a instanceof Text){var b=a._parent,d=g(a).parentsUntil(":not(.rmq-annotator-hl)").parent(),e=d[0]&&d[0].tagName&&"a"===d[0].tagName.toLowerCase()?d[0]:null;e=e||b;b=function(a){if(e){var b=e.cloneNode(!1);b.getAttribute("href");
b.setAttribute("href",b.href);b.innerText=a;b.style&&b.style.fontSize&&(b.style.fontSize="");return b.outerHTML}return a};if(d.is(":visible"))if(h.adapter&&h.adapter.handleTextQuoted)try{return b(h.adapter.handleTextQuoted(a,annotation))}catch(ub){return b(a.textContent)}else return b(a.textContent);else return""}else return-1!==Ea.indexOf(a.tagName&&a.tagName.toLowerCase())?c(a):a.textContent}).map(function(a){return Ra(a)}).join("")},E.prototype.handleResolvedAnnotation=function(a,b,c,d){var e=
this;if(!c&&g.grep(g("body").find(".rmq-annotator-hl"),function(b){return Ta(b,a.commentId)})[0])return a;var k;b=[];var f=a.ranges;var m=0;for(k=f.length;m<k;m++){var l=f[m];try{b.push(E.Range.sniff(l).normalize(this.wrapper[0]))}catch(eb){if(c=eb,c instanceof E.Range.RangeError)O.publish("rangeNormalizeFail",[a,l,c]);else throw c;}}a.quote=[];a.ranges=[];a.highlights=[];d||this.addContextToComment(a,b);c=0;for(l=b.length;c<l;c++)d=b[c],a.quote.push(g.trim(d.text())),m=w(a.access),a.ranges.push(d.serialize(this.wrapper[0],
"rmq-annotator-hl "+m)),g.merge(a.highlights,this.highlightRange(d,"rmq-annotator-hl "+m));a.quote=a.quote.join(" / ");h.adapter&&h.adapter.beforeTextQuoted&&h.adapter.beforeTextQuoted(a);a.quoteHTML=a.highlights.map(function(a){return e.handleQuoteHTMLOfHighlightedElement(a)}).join("");a.quoteHTML=Object(U["default"])()(a.quoteHTML,{trim:!0,pack:!0});h.adapter&&h.adapter.afterTextQuoted&&h.adapter.afterTextQuoted();b=a.commentId?a.commentId:"tmp_"+Object(T.getRandomId)();a.commentId||(a.commentId=
b);b=a.commentId;d=null!=a.access?a.access:-1;g(a.highlights).data("rmqCommentId",b).data("rmqAccess",d).data("annotation",{commentId:b,access:d});if(c=kb(a,this.wrapper[0]))b=c.chatballon,d=c.chatballonU,c=c.paragraphXpath,b&&(g(a.highlights).data("annotation").chatballon=b),d&&(g(a.highlights).data("annotation").chatballonU=d),c&&(g(a.highlights).data("annotation").paragraphXpath=c);E.Util.getGlobal().getSelection().removeAllRanges();return a},O=new E(c),h.annotator=O,Object.defineProperty(O,"pageIndex",
{get:function(){return h.pageIndex},set:function(a){h.pageIndex=a}}),Object.defineProperty(O,"adapter",{get:function(){return h.adapter},set:function(a){h.adapter=a}}),Object.defineProperty(O,"mode",{get:function(){return h.mode},set:function(a){h.mode=a}}),Object.defineProperty(O,"annotationCache",{get:function(){return h.annotationCache},set:function(a){h.annotationCache=a}}),ba={},W={},xa={attributes:!0,childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},Qa=new MutationObserver(function(a){}),
Qa.observe(c,xa),ab={page:{index:-1,idref:null},progress:!1,start:function(a){this.progress=!0;this.page=a},stop:function(){this.progress=!1;this.page={index:-1,idref:null}}},E.prototype.highlight=function(a){function b(){return new Promise(function(c,m){"fromLoad"===a.data.srcScroll&&(a.data.highlight?ab.start(e.adapter.currentPage):ab.stop());if(l&&l.proseMirror)O.proseMirrorScrollIntoView(l);else{var q=h[0];if(null==q&&e.pageIndex){var r=a.data.page||e.pageIndex.commentIdx[k];if(!r){var w=Object(T.getMostRelativeContextRange)(d,
a.data.contextRanges,null,a.data.doi);if(w)r=w.page;else{m("changed to Page ".concat(r));return}}if(r&&!F()(e.pageIndex.currentPage,r))return e.adapter&&e.adapter.gotoPage(r,{commentId:k,access:f}).then(function(){return b()});if(e.pageIndex.pageAnnotations[r]&&(l=e.pageIndex.pageAnnotations[r].filter(function(a){return a.commentId===k})[0]))if(O.setupAnnotation(l,!0,!1,!0),h=g.grep(g("body").find(".rmq-annotator-hl"),function(a){return Ta(a,k)}),q=h[0])b().then(function(a){return c(a)})["catch"](function(a){return m(a)});
else m("Not found")}else if(null!=q){r=g(q).height();var t=g(q).offset();g(q).position();w=g(g("#viewerContainer")[0]||g(q).parents().filter(function(a,b){return b.clientHeight!==b.scrollHeight}).last()[0]);w.scrollTop();var u=g(window).height();t=null;var A=w[0];t=0;for(var v=q;v&&v!==A;)t+=v.offsetTop,v=v.offsetParent;t=r<u?t-(u/2-r/2):t;e.adapter?e.adapter.scroll(q,t,u,a.data).then(function(a){return c(a)}):J&&q.scrollIntoView?q.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"}):
w.animate({scrollTop:t},500,function(){return c(q)})}}})}function c(){h.forEach(function(a){g(a).toggleClass("rmq-active",m)});m&&setTimeout(function(){h.forEach(function(a){g(a).toggleClass("rmq-active",!1)})},3E3)}var e=this,k=a.data.commentId,f=a.data.access,m=a.data.highlight,l=e.annotationCache[k],h=g.grep(g("body").find(".rmq-annotator-hl"),function(a){return Ta(a,k)});m?b().then(function(a){c()}):c()},h.handleMessages=function(a){function c(a,b,c){1<parseInt(b.textContent)?b.textContent=""+
(parseInt(b.textContent)-1):1>=parseInt(b.textContent)&&b.parentNode.removeChild(b);if(b=c[a.paragraphXpath])if(1===b.length)delete c[a.paragraphXpath];else for(var d=0;d<b.length;d++)if(a.commentId===b[d].commentId){c[a.paragraphXpath].splice(d,1);break}}function d(a){var b=g.grep(g("body").find(".rmq-annotator-hl"),function(b){return Ta(b,a)}),d=Ha(b);!d&&b[0]&&(d={commentId:a,proseMirror:!0});d&&(d.highlights=b,d.chatballon?c(d,d.chatballon,ba):d.chatballonU&&c(O,d.chatballonU,W),O.deleteAnnotation(d))}
var e=this;if("adderShown"===a.data.messageIndication){var f=window.articleInfo&&window.articleInfo.id;if(f&&f!==a.data.windowId)return h.annotator.adder.hide()}else if("allComments"===a.data.messageIndication)h.loadedFonts=a.data.loadedFonts,O.loadAnnotations(a.data.comments).then(function(){Oa({indication:"test"})});else if("commentAdded"===a.data.messageIndication)a.data.annotation&&O.loadAnnotations([a.data.annotation],!0);else if("addConversationItems"===a.data.messageIndication)O.loadAnnotations(a.data.comments,
!0);else if("closeConversation"===a.data.messageIndication||"openConversation"===a.data.messageIndication){var k=a.data.groupId;f=g.grep(g("body").find(".rmq-annotator-hl.rmq-annotator-hl-conversation"),function(b){b=Ha(b);return"openConversation"===a.data.messageIndication?b&&b.groupId&&b.groupId!==k:b&&b.groupId&&b.groupId===k}).map(function(a){return Ha(a)}).reduce(function(a,b){a[b.commentId]=b;return a},{});G()(f).forEach(function(a){O.deleteAnnotation(a)})}else if("loadAndShowHighlight"===a.data.messageIndication)O.loadAnnotations(a.data.commentsMessage.comments,
!0).then(function(c){e.highlight({data:a.data.highlightMessage});b.setTimeout(function(){a.data.highlightMessage.highlight=!1;e.highlight({data:a.data.highlightMessage})},1E4)});else if("highlight"===a.data.messageIndication)h.annotator.highlight(a);else if("commentSubmitted"===a.data.messageIndication){if(h.candidateAnnotation){f=h.candidateAnnotation.commentId;var m=!!h.candidateAnnotation.proseMirror;h.tmpIdSubstutionMap[f]=a.data.annotation.commentId;h.candidateAnnotation.section=a.data.annotation.section;
h.candidateAnnotation.commentId=a.data.annotation.commentId;h.candidateAnnotation.access=a.data.annotation.access;h.candidateAnnotation.groupId=a.data.annotation.groupId;m?O.proseMirrorUpdateCommentMarkup(f,h.candidateAnnotation):(m=w(h.candidateAnnotation.access),g(h.candidateAnnotation.highlights).removeClass("rmq-annotator-hl-temporary").addClass(m).data("rmqCommentId",a.data.annotation.commentId).data("rmqAccess",a.data.annotation.access).data("annotation",{commentId:a.data.annotation.commentId,
access:a.data.annotation.access,groupId:a.data.annotation.groupId}));kb(h.candidateAnnotation,O.wrapper[0]);h.annotator.publish(P.a.ANNOTATION_CREATED_EVENT,[h.candidateAnnotation].map(function(a){a=Object.assign({},a);delete a.highlights;return a}));h.annotationCache[h.candidateAnnotation.commentId]=h.candidateAnnotation;delete h.annotationCache[f];delete h.candidateAnnotation}}else"commentCancelled"===a.data.messageIndication?h.candidateAnnotation&&O.deleteAnnotation(h.candidateAnnotation):"conversationExit"===
a.data.messageIndication?(g.grep(g("body").find(".rmq-annotator-hl"),function(a){return pb(a,7)}).map(function(a,b){return Ha(b)}).forEach(function(a){return O.deleteAnnotation(a)}),h.candidateAnnotation&&O.deleteAnnotation(h.candidateAnnotation)):"deleteComment"===a.data.messageIndication?d(a.data.commentId):"moveToPrivate"===a.data.messageIndication?(d(a.data.annotation.commentId),O.setupAnnotation(a.data.annotation)):"newUser"!==a.data.messageIndication&&("authorUpdateEnabled"===a.data.messageIndication?
!0===a.data.authorUpdateEnabled?(g(g(".adderUpdate")[0]).css("display","initial"),g(g(".adderUpdate")[1]).css("display","initial")):(g(g(".adderUpdate")[0]).css("display","none"),g(g(".adderUpdate")[1]).css("display","none")):"tourModeUpdate"===a.data.messageIndication?(f=a.data.newTourMode,document.getElementById("rmrqTourMode")&&(document.getElementById("rmrqTourMode").value=f),f?(g("#note",h.annotator.adder).attr("disabled",!0),g("#comment",h.annotator.adder).attr("disabled",!0),g("#conversation",
h.annotator.adder).attr("disabled",!0)):(g("#note",h.annotator.adder).removeAttr("disabled"),g("#comment",h.annotator.adder).removeAttr("disabled"),g("#conversation",h.annotator.adder).removeAttr("disabled"))):"requestFonts"===a.data.messageIndication&&(f=a.data.fontFamilies,h.adapter.requestFonts&&h.adapter.requestFonts(f)))},b.addEventListener("message",h.handleMessages,!1),E.prototype.findElementAnnotations=function(a){function b(a){var b=g(a).data();if(b.annotation)return a=(a=h.annotationCache[b.annotation.commentId])||
b.annotation;if(b.rmqCommentId||a.dataset.rmqCommentId){var c=b.rmqCommentId||a.dataset.rmqCommentId,d=g.grep(g("body").find(".rmq-annotator-hl"),function(a){return Ta(a,c)});b=b.rmqAccess||a.dataset.rmqAccess&&parseInt(a.dataset.rmqAccess);return a=(a=h.annotationCache[c])||{commentId:c,access:b,highlights:d}}return null}if(g(a).closest(".rmq-annotator-hl")){var c=[];g(a).addBack().toArray().forEach(function(a){(a=b(a))&&c.push(a)});g(a).parents(".rmq-annotator-hl").addBack().toArray().forEach(function(a){(a=
b(a))&&c.push(a)});return c}return[]},E.prototype.activateComment=function(a,b,c){a=this.findElementAnnotations(a.target);c&&0<c.length&&(a=a.filter(function(a){return-1!==c.indexOf(a.access)}));t()(a,function(a){return a.highlights}).reduce(function(a,b){a.add(b);return a},new Set).forEach(function(a){g(a).toggleClass("rmq-active",b)});return a},E.prototype.handleCommentClick=function(a){a=this.activateComment(a,!0,[0,7]);a=Na(a);a[0]&&cb(a[0])},E.prototype.handleCommentMouseEnter=function(a){this.activateComment(a,
!0,[0])},E.prototype.handleCommentMouseLeave=function(a){a=this.activateComment(a,!1);Na(a);a[0]&&Ua(Na(a)[0])},qb=g("body"),qb.on("click",".rmq-annotator-hl",function(a){return O.handleCommentClick(a)}),qb.on("mouseenter",".rmq-annotator-hl",function(a){return O.handleCommentMouseEnter(a)}),qb.on("mouseleave",".rmq-annotator-hl.rmq-active",function(a){return O.handleCommentMouseLeave(a)}),qb.on("keyup",function(a){return O.onAdderKeyUp(a)}),E.prototype.calculateQuoteCmpCtx=function(a,b){var c=a.quote||
a.section;if(!c)return null;lb()||(c=Ab(c));c=fa(c);return b&&a.context?a.context.back+c+a.context.front:c},E.prototype.updateCommentPage=function(a){if(this.pageIndex&&this.pageIndex.tx&&a.section&&a.commentId){var b=this.calculateQuoteCmpCtx(a);b=u["default"].find(b,this.pageIndex.tx,a.context);if(55<b.reduce(function(a,b){return a+=b.c?b.c:0},0)){b=Ca(this.pageIndex.pageIndex,b[0].s);0>b&&(b=~b);b+=1;this.pageIndex.commentIdx[a.commentId]=b;if(this.pageIndex.pageAnnotations[b]){var c=I()(this.pageIndex.pageAnnotations[b],
function(b){return b.commentId===a.commentId});0<=c&&this.pageIndex.pageAnnotations[b].splice(c,1);this.pageIndex.pageAnnotations[b].push(a)}else this.pageIndex.pageAnnotations[b]=[a];return b}}},E.prototype.idx=function(a){if(!this._idx||a)this._idx=this.recur(c);return this._idx},Fb=0,E.prototype.loadAnnotations=function(a,b,c){var d=this;this.loadAnnotationsDeferred=g.Deferred();Object(L.debug)("loaAnnotations",this.mode,this.adapter&&this.adapter.getCurrentPage());if(!ab.progress||!F()(ab.page,
this.adapter.getCurrentPage()))return(new Promise(function(a,b){"interactive"===document.readyState||"complete"===document.readyState?a(document.readyState):document.onreadystatechange=function(){"interactive"!==document.readyState&&"complete"!==document.readyState||a(document.readyState)}})).then(function(e){return new Promise(function(e,f){++Fb;!0!==b&&(a=Ga(d,a));d.selectedRanges=null;null==a&&(a=[]);f=a.map(function(a){if(d.pageIndex&&d.pageIndex.tx){var b=d.updateCommentPage(a);b&&a.page!=b?
(a.pageChanged=!0,a.page=b,Oa({indication:"updatePage",access:a.access,commentId:a.commentId,page:b})):!b&&a.section&&Oa({indication:"updatePage",access:a.access,commentId:a.commentId,page:"Not Found"})}return a}).filter(function(a){if(a.page){if(d.adapter&&d.adapter.getAllLoadedPages){var b=d.adapter.getAllLoadedPages();return-1!==I()(b,function(b){return F()(b,a.page)})}return d.adapter&&d.adapter.getCurrentPage?F()(d.adapter.getCurrentPage(),a.page):!0}return!0});var g=function(b,c){null==b&&(b=
[]);if(0<b.map(function(a){return d.setupAnnotation(a,!0,c,!0)}).filter(function(a){return null==a.resolved}).length&&c)return setTimeout(function(){return g(b,!1)},10);e(d);var f=a&&Array.isArray(a)?a.filter(function(a){return a&&a.highlights&&Array.isArray(a.highlights)&&0<a.highlights.length}):[];return d.publish(P.a.ANNOTATIONS_LOADED_EVENT,[function(a){var b=[];a.forEach(function(a){a&&(a=Object.assign({},a),delete a.highlights,b.push(a))});return b}(f)])};g(f,!c)})})},E.prototype.findAnnotationOffset=
function(a){return this.findAnnotationOffset_Pixel(a)},E.prototype.findAnnotationOffset_Pixel=function(a){if(a.highlights&&a.highlights[0]){for(var b=g(a.highlights).last(),c=g(g("#viewerContainer")[0]||g(b).parents().filter(function(a,b){return b.clientHeight!==b.scrollHeight}).last()[0]),d=c[0],e=a=0,f=b[0];f&&f!==d;)a+=f.offsetTop,e+=f.offsetLeft,f=f.offsetParent;b=b.text();c=c.text().indexOf(b);return{offset_v:a,offset_h:e,offset_t:c}}return null},E.prototype.findAnnotationOffset_Text=function(a){var b=
this.calculateQuoteCmpCtx(a);if(null==b)return null;var c=this.pageIndex&&this.pageIndex.tx?this.pageIndex.tx:this.idx().text;a=u["default"].find(b,c,a.context);return 55>a.reduce(function(a,b){return a+=b.c?b.c:0},0)?null:a[0]?a[0].s:null},E.prototype.verifySelection=function(a,b,c,d){d=d||.9;c?(c*=d,55>c&&(c=55)):c=55;try{if(Array.isArray(a))var e=a.map(function(a){return E.Range.sniff(a).normalize(O.wrapper[0]).text()}).join(" ");else if(0<a.rangeCount)e=E.Range.sniff(a.getRangeAt(0)).normalize(O.wrapper[0]).text();
else return Object(L.debug)("Empty selection to verify"),!1;var f=fa(e),g=fa(b.quote),m=u["default"].find(f,g),k=u["default"].find(g,f),l=m&&m.confidence||-1,h=k&&k.confidence||-1;Object(L.debug)("cr = ".concat(h," cf = ").concat(l));if(l<c||h<c)return!1}catch(Ja){return Object(L.debug)("Error while verifying - Retry selection",Ja),!1}return!0},E.prototype.lookupRangesInDocument=function(a,b){return this._lookupRangesInDocument(a,b)},E.prototype._lookupRangesInDocument=function(a,b){var c=this.updateCommentPage(a),
d=this.findSelection(a,b);if(!d)return null;b=d.certainty;var e=d.offset;if(!this.verifySelection(d,a))if(Object(L.debug)("Retry selection "),O.idx(!0),d=this.findSelection(a),this.verifySelection(d,a))b=d.certainty,e=d.offset;else return null;var f,m,k,l;a=[];var h=[];K()(d)?(a=d.map(function(a){return(new E.Range.BrowserRange(a)).normalize().limit(O.wrapper[0])}).filter(function(a){return null!=a}),d=E.Util.getGlobal().getSelection(),d.removeAllRanges()):0<d.rangeCount&&(a=function(){var a,b;var c=
[];m=a=0;for(b=d.rangeCount;0<=b?a<b:a>b;m=0<=b?++a:--a)r=d.getRangeAt(m),f=new E.Range.BrowserRange(r),k=f.normalize().limit(O.wrapper[0]),null===k&&h.push(r),c.push(k);return c}.call(O),d.removeAllRanges());var q=0;for(l=h.length;q<l;q++){var r=h[q];null!=r?d.addRange(r):Object(L.warn)("Null range when should not")}a=g.grep(a,function(a){a&&d.addRange(a.toRange());return a});a.certainty=b;a.offset=e;a.page=c||this.adapter&&this.adapter.getCurrentPage();return a},E.prototype.recur_filter=function(a,
b){return!a||!a.nodeType||a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.ELEMENT_NODE||a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.ELEMENT_NODE?!1:"SCRIPT"===a.tagName?r()(a.type)&&-1!==a.type.indexOf("math/")?a.equation=!0:!1:a instanceof Text&&"SCRIPT"===a.parentNode.tagName&&r()(a.parentNode.type)&&-1!==a.parentNode.type.indexOf("math/")?a.equation=!0:g(a).parents().filter(function(a,b){return b&&"string"===typeof b.id&&0===b.id.indexOf("MathJax")})[0]?!b:a.style&&a.style.transform&&a.style.transform?
-1!==a.style.transform.toLocaleLowerCase().indexOf("rotate")?!1:!0:"BUTTON"===a.tagName&&a.classList.contains("chatballon")?!1:!0},E.prototype.recur=function(a){var b=Date.now();a=this._recur(a);b=Date.now()-b;Object(L.info)("%crecurring took %d ms","color: red; font-style: bold",b);return a},E.prototype._recur=function(a,b){var d=this;if(!this.recur_filter(a,!0))return{text:"",parent:[],textNode:[]};if(a.nodeType===Node.TEXT_NODE){var e=a.parentNode&&a.parentNode.type&&r()(a.parentNode.type)&&-1!==
a.parentNode.type.indexOf("math/")?Ra(a):a.nodeValue;return{text:fa(e),parent:[b],textNode:[a],page:this.adapter&&this.adapter.getElementPage&&this.adapter.getElementPage(b),xpath:E.Util.xpathFromNode(g(b),c)}}var f={text:"",parent:[],textNode:[]};a.nodeType===Node.ELEMENT_NODE&&a.childNodes&&a.childNodes.forEach(function(b){b=d._recur(b,a);var c=f.text.length;f.text+=b.text;b.parent.forEach(function(a,b){f.parent[c+b]=a});b.textNode.forEach(function(a,b){f.textNode[c+b]=a})});return f},E.prototype.findSelection=
function(a,b){var c=Qa.takeRecords(),d=this.calculateQuoteCmpCtx(a);if(null==d)return null;c=u["default"].find(d,O.idx(0<c.length||b).text,a.context);b=c.reduce(function(a,b){return a+=b.c?b.c:0},0);if(55>b)return null;if(90<b){var e=c[0].s;d=[ib(e,c[c.length-1].s+c[c.length-1].text.length-1,a,b)]}else d=c.map(function(b){var c=b.s;return ib(c,c+b.text.length-1,a,b.c)}).filter(function(a){return null!=a});if(1===d.length){c=E.Util.getGlobal().getSelection();c.removeAllRanges();d=d[0];var f=document.createRange();
f.setStart(d.startElement,d.startOffset);f.setEnd(d.endElement,d.endOffset);c.addRange(f);c.certainty=b;c.offset=e;return c}return 1<d.length?(d=d.map(function(a){return{commonAncestorContainer:g(a.startElement).parents().has(a.endElement).first()[0],startContainer:a.startElement,endContainer:a.endElement,startOffset:a.startOffset,endOffset:a.endOffset,certainty:a.certainty}}),d.certainty=b,d.offset=e,d):null},M.abrupt("return",h);case 163:case "end":return M.stop()}},Ia,this,[[59,63]])}));return function(a,
c,d,e){return b.apply(this,arguments)}}(),destroy:function(){this.annotatorHelperCnt--;this.annotator&&this.annotator.destroy();window.removeEventListener("message",this.handleMessages)}};h.a=c},RdJH:function(c,h,a){h.a=function(a,c,b){var d=document.cookie.split(";").reduce(function(a,b){b=b.split("=");a[b[0].trim()]=b[1]&&b[1].trim();return a},{});if(c.domain&&"*"!==c.domain)var f=c.domain;var h=d.rmq_sbc,m=d.rmq_cwet;d=c.rmq_sbc;var A=b?b.getAttribute("data-expanded"):!1,u=function(){};c.authenticatedUser?
document.cookie="rmq_sbc=0;max-age=0":A&&"true"===A||null!=h||null!=d||(c=document.getElementById("RMQBannerWidget"),c||(c=document.createElement("iframe"),c.id="RMQBannerWidget",c.src=a+"web/RMQBannerWidget.html",c.frameBorder="no",c.scrolling="no",c.allowTransparency="true",c.style.visibility="hidden",c.setAttribute("data-expanded","false"),c.addEventListener("transitionend",function(a){}),b.parentNode.appendChild(c)),u=function(){if(m){var a=document.getElementById("RMQBannerWidget");a&&setTimeout(function(){a.style.visibility=
"visible";a.setAttribute("data-expanded","true");var b="rmq_sbc=0;path=/";f&&(b=b+";domain="+f);var c=new Date;c.setTime(c.getTime()+864E5);c="expires="+c.toUTCString();document.cookie=b+";"+c},5E3)}});return{show:u,destroy:function(){var a=document.getElementById("RMQBannerWidget");a&&a.parentNode.removeChild(a)}}}},Re3r:function(c,h){function a(a){return!!a.constructor&&"function"===typeof a.constructor.isBuffer&&a.constructor.isBuffer(a)}c.exports=function(c){return null!=c&&(a(c)||"function"===
typeof c.readFloatLE&&"function"===typeof c.slice&&a(c.slice(0,0))||!!c._isBuffer)}},Rx1E:function(c,h,a){var f=a("7YkW"),d=a("JUs9"),b=a("s96k"),w=a("Hxdr"),D=a("S7p9"),q=a("dmQx");c.exports=function(a,c,h,e){var m=-1,t=d,u=!0,A=a.length,N=[],F=c.length;if(!A)return N;h&&(c=w(c,D(h)));e?(t=b,u=!1):200<=c.length&&(t=q,u=!1,c=new f(c));a:for(;++m<A;){var G=a[m],I=null==h?G:h(G);G=e||0!==G?G:0;if(u&&I===I){for(var B=F;B--;)if(c[B]===I)continue a;N.push(G)}else t(c,I,e)||N.push(G)}return N}},RyI1:function(c,
h,a){var f=a("lb6C"),d=a("eShC"),b=a("JyYQ"),w=a("NGEn");c.exports=function(a,c){return(w(a)?f:d)(a,b(c,3))}},SGXn:function(c,h,a){h=a("eP4g");var f=a("S7p9");h=(a=(a=a("Dc0G"))&&a.isSet)?f(a):h;c.exports=h},"T/v0":function(c,h,a){var f=a("Oy1H")["default"],d=a("M1I4");c.exports=function(a,c){if(c&&("object"===f(c)||"function"===typeof c))return c;if(void 0!==c)throw new TypeError("Derived constructors may only return object or undefined");return d(a)};c.exports.__esModule=!0;c.exports["default"]=
c.exports},Tkzw:function(c,h,a){function f(a){var b=d();return function(){var c=D()(a);if(b){var d=D()(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return w()(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(pa){return!1}}Object.defineProperty(h,"__esModule",{value:!0});
a.d(h,"GroveMessage",function(){return u});a.d(h,"AddDuplicateArticleToReadingList",function(){return e});a.d(h,"WidgetInitializedEvent",function(){return r});a.d(h,"UpdateCurrentPollEvent",function(){return t});a.d(h,"UpdateCurrentPollWidgetEvent",function(){return R});a.d(h,"WidgetDestroyedEvent",function(){return K});a.d(h,"ToggleWidgetEvent",function(){return N});a.d(h,"ActiveSurveysEvent",function(){return F});a.d(h,"UpdateSurveyFilterEvent",function(){return G});a.d(h,"InvalidateSurveyFiltersEvent",
function(){return I});a.d(h,"GMLoginEvent",function(){return B});a.d(h,"ExpandWidgetEvent",function(){return v});a.d(h,"ReloadWidgetEvent",function(){return H});a.d(h,"SubmitCompletedSurveyErrorEvent",function(){return T});a.d(h,"InvalidEvent",function(){return Y});a.d(h,"SigninEvent",function(){return P});a.d(h,"FollowUnfollowArticleEvent",function(){return L});a.d(h,"UpdateFollowUnfollowWidgetsStateEvent",function(){return U});a.d(h,"UpdateUserFollowingArticles",function(){return ka});a.d(h,"LoggedinEvent",
function(){return g});a.d(h,"RedirectedEvent",function(){return V});a.d(h,"ExitEvent",function(){return ia});a.d(h,"CommentCancelledEvent",function(){return J});a.d(h,"PopupEvent",function(){return ra});a.d(h,"UpdateFrameTitleEvent",function(){return ha});h.groveMessageExtractor=function(a){if(a&&a.data)return a.data.redirected?new V(a.data):a.data.loggedin?new g(a.data):a.data.signin?new P(a.data):"exit"===a.data.action?new ia(a.data):new Y(a.data);if("DEBUG"===ja)throw z;};c=a("j/rp");var b=a.n(c);
c=a("T/v0");var w=a.n(c);c=a("tNLN");var D=a.n(c);c=a("Oy1H");var q=a.n(c);c=a("Z60a");var m=a.n(c);c=a("C9uT");var A=a.n(c),u=function(){function a(b,c){m()(this,a);if(!b&&"DEBUG"===ja)throw x;this._name=b;"object"===q()(c)?Object.assign(this,c):this.data=c}A()(a,[{key:"getName",value:function(){return this._name}}]);return a}(),e=function(a){function c(){m()(this,c);return d.call(this,c.evtName())}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_ADD_DUPLICATE_ARTICLE_TO_READING_LIST"}}]);
return c}(u),r=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_WIDGET_INITIALIZED"}}]);return c}(u),t=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_UPDATE_CURRENT_POLL"}}]);return c}(u),R=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",
value:function(){return"GM_UPDATE_CURRENT_POLL_WIDGET"}}]);return c}(u),K=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_WIDGET_DESTROYED"}}]);return c}(u),N=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_TOGGLE_WIDGET"}}]);return c}(u),F=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),
a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_ACTIVE_SURVEYS"}}]);return c}(u),G=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_UPDATE_SURVEY_FILTER"}}]);return c}(u),I=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_INVALIDATE_SURVEY_FILTERS"}}]);return c}(u),B=function(a){function c(a){m()(this,
c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_LOGIN"}}]);return c}(u),v=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_EXPAND_WIDGET"}}]);return c}(u),H=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_RELOAD_WIDGET"}}]);return c}(u),T=function(a){function c(a){m()(this,
c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_SUBMIT_COMPLETED_SURVEY_ERROR"}}]);return c}(u),Y=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_INVALID"}}]);return c}(u),P=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_SIGNIN"}}]);return c}(u),
L=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),{toFollow:a})}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_FOLLOW_UNFOLLOW_ARTICLE"}}]);return c}(u),U=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),{followState:a})}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_UPDATE_FOLLOW_UNFOLLOW_WIDGETS_STATE"}}]);return c}(u),ka=function(a){function c(){m()(this,c);return d.call(this,c.evtName())}b()(c,a);var d=
f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_UPDATE_USER_FOLLOWING_ARTICLES"}}]);return c}(u),g=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_LOGGEDIN"}}]);return c}(u),V=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_REDIRECTED"}}]);return c}(u),ia=function(a){function c(a){m()(this,c);
return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_EXIT"}}]);return c}(u),J=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_COMMENT_CANCELLED"}}]);return c}(u),ra=function(a){function c(a){m()(this,c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_POPUP"}}]);return c}(u),ha=function(a){function c(a){m()(this,
c);return d.call(this,c.evtName(),a)}b()(c,a);var d=f(c);A()(c,null,[{key:"evtName",value:function(){return"GM_UPDATE_FRAME_TITLE"}}]);return c}(u),ja="DEBUG",x="UNKNOWN GROVEMESSAGE NAME ARGUMENT",z="INVALID EVENT PAYLOAD ERROR"},TvYa:function(c,h,a){function f(a,b){var c=!1;try{var d=a[b],f=d.getItem("rmq_test_probe");f||(d.setItem("rmq_test_probe","rmq_test_probe"),f=d.getItem("rmq_test_probe"));"rmq_test_probe"===f&&(c=!0,d.removeItem("rmq_test_probe"))}catch(u){c=!1}return c}function d(a){function b(a){this.name=
a;return{setItem:function(a,b){},getItem:function(a){},removeItem:function(a){},clear:function(){}}}var c=f(a,"localStorage"),d=f(a,"sessionStorage");return c?[a.localStorage,a.sessionStorage]:d?[a.sessionStorage,a.sessionStorage]:[new b("localStorage"),new b("sessionStorage")]}h.b=d;h.a=function(a,c,f){function m(a,b){return new Promise(function(c,d){var e=new FileReader;e.onload=function(a){c(a.target.result)};e.onerror=function(a){d(a)};b?e[b].call(e,a):e.readAsArrayBuffer(a)})}a=d(f);var h=b()(a,
2)[0],q=f.fetch;return h&&q?{getItem:function(a,b){b=b||"ArrayBuffer";return new Promise(function(c,d){var e=JSON.parse(h.getItem(a));if("string"===typeof e)var f=e;else{f=e.data;var m=e.responseURL}if(f)return"DataURL"==b?{responseURL:m,data:f}:q(f).then(function(a){return"Blob"===b?a.blob().then(function(a){return{responseURL:m,data:a}}):a.arrayBuffer().then(function(a){return{responseURL:m,data:a}})},function(c){var d=h.getItem(a),e=d.indexOf(";base64,");if(-1==e)throw"Invalid string in localStorage for key:".concat(a);
c=d.substring(5,e);d=d.substring(e+8);d=atob(d);e=Array(d.length);for(var f=0;f<d.length;f++)e[f]=d.charCodeAt(f);d=new Uint8Array(e);return"Blob"===b?(c=Blob([d.buffer],{type:c}),{responseURL:m,data:c}):{responseURL:m,data:d.buffer}}).then(function(a){c(a)},function(a){d(a)});d("Nothing in cache for"+a)})},setItem:function(a,b,c){return m(b,"readAsDataURL").then(function(b){return new Promise(function(d,e){try{var f=c?JSON.stringify({data:b,responseURL:c}):JSON.stringify(b);h.setItem(a,f);d()}catch(G){e(G)}})})}}:
{getItem:function(a,b){return Promise.reject("No Cache")},setItem:function(a,b){return Promise.reject("No Cache")}}};c=a("NM/j");var b=a.n(c)},UfSK:function(c,h){var a=Object.prototype.hasOwnProperty;c.exports=function(c){var d=c.length,b=new c.constructor(d);d&&"string"==typeof c[0]&&a.call(c,"index")&&(b.index=c.index,b.input=c.input);return b}},VORN:function(c,h,a){var f=a("yCNF"),d=Object.create;h=function(){function a(){}return function(b){if(!f(b))return{};if(d)return d(b);a.prototype=b;b=new a;
a.prototype=void 0;return b}}();c.exports=h},WHce:function(c,h,a){h=a("037f");a=a("Zk5a")(h);c.exports=a},WQFf:function(c,h,a){var f=a("VORN"),d=a("vi0E"),b=a("HT7L");c.exports=function(a){return"function"!=typeof a.constructor||b(a)?{}:f(d(a))}},WyC4:function(c,h){var a=/\w*$/;c.exports=function(c){var d=new c.constructor(c.source,a.exec(c));d.lastIndex=c.lastIndex;return d}},Xk2i:function(c,h,a){(function(a){(function(a){try{var b=!!Symbol.iterator}catch(q){b=!1}var c=function(a){var c={next:function(){var b=
a.shift();return{done:void 0===b,value:b}}};b&&(c[Symbol.iterator]=function(){return c});return c},d=function(){var d=function(a){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var b=typeof a;if("undefined"!==b)if("string"===b)""!==a&&this._fromString(a);else if(a instanceof d){var c=this;a.forEach(function(a,b){c.append(b,a)})}else if(null!==a&&"object"===b)if("[object Array]"===Object.prototype.toString.call(a))for(b=0;b<a.length;b++){var f=a[b];if("[object Array]"===Object.prototype.toString.call(f)||
2!==f.length)this.append(f[0],f[1]);else throw new TypeError("Expected [string, any] as entry at index "+b+" of URLSearchParams's input");}else for(f in a)a.hasOwnProperty(f)&&this.append(f,a[f]);else throw new TypeError("Unsupported input's type for URLSearchParams");},f=d.prototype;f.append=function(a,b){a in this._entries?this._entries[a].push(String(b)):this._entries[a]=[String(b)]};f.delete=function(a){delete this._entries[a]};f.get=function(a){return a in this._entries?this._entries[a][0]:null};
f.getAll=function(a){return a in this._entries?this._entries[a].slice(0):[]};f.has=function(a){return a in this._entries};f.set=function(a,b){this._entries[a]=[String(b)]};f.forEach=function(a,b){var c;for(c in this._entries)if(this._entries.hasOwnProperty(c)){var d=this._entries[c];for(var f=0;f<d.length;f++)a.call(b,d[f],c,this)}};f.keys=function(){var a=[];this.forEach(function(b,c){a.push(c)});return c(a)};f.values=function(){var a=[];this.forEach(function(b){a.push(b)});return c(a)};f.entries=
function(){var a=[];this.forEach(function(b,c){a.push([c,b])});return c(a)};b&&(f[Symbol.iterator]=f.entries);f.toString=function(){var a=[];this.forEach(function(b,c){a.push(encodeURIComponent(c).replace(/%20/g,"+")+"="+encodeURIComponent(b).replace(/%20/g,"+"))});return a.join("&")};a.URLSearchParams=d};(function(){try{var b=a.URLSearchParams;return"a=1"===(new b("?a=1")).toString()&&"function"===typeof b.prototype.set&&"function"===typeof b.prototype.entries}catch(m){return!1}})()||d();d=a.URLSearchParams.prototype;
"function"!==typeof d.sort&&(d.sort=function(){var a=this,b=[];this.forEach(function(c,d){b.push([d,c]);a._entries||a.delete(d)});b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});a._entries&&(a._entries={});for(var c=0;c<b.length;c++)this.append(b[c][0],b[c][1])});"function"!==typeof d._fromString&&Object.defineProperty(d,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(a){if(this._entries)this._entries={};else{var b=[];this.forEach(function(a,c){b.push(c)});for(var c=
0;c<b.length;c++)this.delete(b[c])}a=a.replace(/^\?/,"");a=a.split("&");for(c=0;c<a.length;c++){var d=a[c].split("=");this.append(decodeURIComponent(String(d[0]).replace(/\+/g," ")),1<d.length?decodeURIComponent(String(d[1]).replace(/\+/g," ")):"")}}})})("undefined"!==typeof a?a:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this);(function(a){var b=function(){var b=a.URL,c=function(b,c){"string"!==typeof b&&(b=String(b));c&&"string"!==typeof c&&(c=String(c));var d=document;if(c&&
(void 0===a.location||c!==a.location.href)){c=c.toLowerCase();d=document.implementation.createHTMLDocument("");var e=d.createElement("base");e.href=c;d.head.appendChild(e);try{if(0!==e.href.indexOf(c))throw Error(e.href);}catch(B){throw Error("URL unable to set base "+c+" due to "+B);}}var f=d.createElement("a");f.href=b;e&&(d.body.appendChild(f),f.href=f.href);d=d.createElement("input");d.type="url";d.value=b;if(":"===f.protocol||!/:/.test(f.href)||!d.checkValidity()&&!c)throw new TypeError("Invalid URL");
Object.defineProperty(this,"_anchorElement",{value:f});var m=new a.URLSearchParams(this.search),h=!0,q=!0,w=this;["append","delete","set"].forEach(function(a){var b=m[a];m[a]=function(){b.apply(m,arguments);h&&(q=!1,w.search=m.toString(),q=!0)}});Object.defineProperty(this,"searchParams",{value:m,enumerable:!0});var u=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==u&&(u=this.search,q&&(h=!1,this.searchParams._fromString(this.search),
h=!0))}})},d=c.prototype,f=function(a){Object.defineProperty(d,a,{get:function(){return this._anchorElement[a]},set:function(b){this._anchorElement[a]=b},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(a){f(a)});Object.defineProperty(d,"search",{get:function(){return this._anchorElement.search},set:function(a){this._anchorElement.search=a;this._updateSearchParams()},enumerable:!0});Object.defineProperties(d,{toString:{get:function(){var a=this;return function(){return a.href}}},
href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(a){this._anchorElement.href=a;this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(a){this._anchorElement.pathname=a},enumerable:!0},origin:{get:function(){return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(this._anchorElement.port!={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol]&&""!==this._anchorElement.port?
":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(a){},enumerable:!0},username:{get:function(){return""},set:function(a){},enumerable:!0}});c.createObjectURL=function(a){return b.createObjectURL.apply(b,arguments)};c.revokeObjectURL=function(a){return b.revokeObjectURL.apply(b,arguments)};a.URL=c};(function(){try{var b=new a.URL("b","http://a");b.pathname="c d";return"http://a/c%20d"===b.href&&b.searchParams}catch(q){return!1}})()||b();if(void 0!==a.location&&
!("origin"in a.location)){var c=function(){return a.location.protocol+"//"+a.location.hostname+(a.location.port?":"+a.location.port:"")};try{Object.defineProperty(a.location,"origin",{get:c,enumerable:!0})}catch(D){setInterval(function(){a.location.origin=c()},100)}}})("undefined"!==typeof a?a:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this)}).call(h,a("DuR2"))},Y4K9:function(c,h,a){var f=a("ZFR3");c.exports=function(a,b){if(a){if("string"===typeof a)return f(a,b);var c=Object.prototype.toString.call(a).slice(8,
-1);"Object"===c&&a.constructor&&(c=a.constructor.name);if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return f(a,b)}};c.exports.__esModule=!0;c.exports["default"]=c.exports},YkxI:function(c,h,a){var f=a("wSKX"),d=a("Q2wK"),b=a("WHce");c.exports=function(a,c){return b(d(a,c,f),a+"")}},Z60a:function(c,h){c.exports=function(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");};c.exports.__esModule=!0;
c.exports["default"]=c.exports},ZFR3:function(c,h){c.exports=function(a,c){if(null==c||c>a.length)c=a.length;for(var d=0,b=Array(c);d<c;d++)b[d]=a[d];return b};c.exports.__esModule=!0;c.exports["default"]=c.exports},ZV5t:function(c,h,a){function f(a){var b=d();return function(){var c=q()(a);if(b){var d=q()(this).constructor;c=Reflect.construct(c,arguments,d)}else c=c.apply(this,arguments);return D()(this,c)}}function d(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;
if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F){return!1}}a.d(h,"a",function(){return N});c=a("Oy1H");var b=a.n(c);c=a("j/rp");var w=a.n(c);c=a("T/v0");var D=a.n(c);c=a("tNLN");var q=a.n(c);c=a("Z60a");var m=a.n(c);c=a("C9uT");var A=a.n(c),u=a("K9Qf"),e=a("yVmd"),r=a("JyB8");a.n(r);c=a("moUy");a.n(c);var t=a("cuGy"),R=a("8tbe"),K=function(){function a(b,c){m()(this,a);this.contentFrame=b;this.spineItem=u.c.of(c);
this.loadedAnnotations=null}A()(a,[{key:"clearLoadedAnnotations",value:function(){this.loadedAnnotations&&(this.loadedAnnotations.clear(),this.loadedAnnotations=null)}},{key:"hasLoadedAnnotations",value:function(){return!!this.loadedAnnotations}},{key:"isAnnotationLoaded",value:function(a){a=a&&(a.commentId||a.id);return this.loadedAnnotations?!!this.loadedAnnotations.get(a):!1}},{key:"isAnnotationCollectionLoaded",value:function(a){var b=this;return!!(a&&Array.isArray(a)&&this.loadedAnnotations&&
a.reduce(function(a,c){return a&&(c.commentId||c.id)&&(b.loadedAnnotations.get(c.commentId)||b.loadedAnnotations.get(c.id))},!0))}},{key:"addLoadedAnnotations",value:function(a){var b=this;a&&Array.isArray(a)&&0<a.length&&(this.loadedAnnotations||(this.loadedAnnotations=new r.HolderUtil),a.filter(function(a){return a&&b.spineItem&&a.page&&b.spineItem.idref===a.page.idref&&b.spineItem.index===a.page.index}).forEach(function(a){var c=a.id?a.id:a.commentId?a.commentId:null;c?b.loadedAnnotations.put(c,
a.page):Object(t.error)("unknown annotation id property found for annotation",a)}))}}],[{key:"of",value:function(b){return new a(b?b.contentFrame:null,b?b.spineItem:null)}}]);return a}(),N=function(a){function c(a,b){m()(this,c);b=d.call(this,b);b.events=u.b.eventNames();b.name=[u.b.NEW_CONTENT_FRAME_EVENT,u.b.CONTENT_FRAME_UNLOADED_EVENT,u.b.VIEW_DESTROYED_EVENT];b.delegate=a;return b}w()(c,a);var d=f(c);A()(c,[{key:"notify",value:function(a,b){if(a&&b&&this.delegate)switch(a){case u.b.NEW_CONTENT_FRAME_EVENT:this._handleNewContentFrameEvent(b);
break;case u.b.CONTENT_FRAME_UNLOADED_EVENT:this._handleContentFrameUnloadedEvent(b);break;case u.b.VIEW_DESTROYED_EVENT:this._handleReaderViewChangeEvent(b)}}},{key:"_handleReaderViewChangeEvent",value:function(){this.loadedContentFrames.clear()}},{key:"_handleNewContentFrameEvent",value:function(a){if(a&&this.delegate){var b=a.contentFrame;a=a.spineOfFrame;Object(t.debug)("literatum content frame handler : installing anno_helper to["+b+"]");var c=new K(b,u.c.of(a));try{this.installAnnotatorHelperInFrame(b,
a)}catch(T){Object(t.error)("could not install annotator helper to content frame..",b,T)}this.loadedContentFrames.contains(a.idref)&&(b=this.loadedContentFrames.get(a.idref))&&b.contentFrame&&b.contentFrame.postMessage(new R.a("logout"),"*");this.loadedContentFrames.put(a.idref,c)}}},{key:"_handleContentFrameUnloadedEvent",value:function(a){a&&this.delegate&&this.loadedContentFrames.delegate(function(c){if(c&&c.holder&&"object"===b()(c.holder))for(var d in c.holder){var e=c.holder[d];if(e&&e.contentFrame&&
e.contentFrame.sHref===a){c.remove(d);e.contentFrame.contentWindow&&e.contentFrame.postMessage(new R.a("destroy"),"*");Object(t.debug)("literatum content frame handler : removing ["+d+"] from collection");break}}})}},{key:"installAnnotatorHelperInFrame",value:function(a,b){if(this.delegate){var c={idref:b.idref,index:b.index};this.delegate.installInFrame(a._$iframe[0]?a._$iframe[0]:a._$iframe,c,b);a.postMessage({action:"ContentLoaded",src:a.src,srcBase:a.srcBase,page:c},"*")}}}]);return c}(function(a){function b(a){m()(this,
b);var d=c.call(this);d.loadedContentFrames=new r.HolderUtil;d.window=a;d.initSubscriptions();return d}w()(b,a);var c=f(b);A()(b,[{key:"clearLoadedAnnotations",value:function(){this.loadedContentFrames&&this.loadedContentFrames.delegate(function(a){a&&a.holder&&Object.keys(a.holder).forEach(function(b){(b=a.holder[b])&&b.clearLoadedAnnotations()})})}},{key:"initSubscriptions",value:function(){var a=this;this.window.addEventListener("message",function(b){if(b&&b.data&&(b=b.data)&&b.evtName)switch(b.evtName){case e.a.ANNOTATIONS_LOADED_EVENT:return a._handleAnnotationsLoadedEvent(b);
case e.a.ANNOTATION_CREATED_EVENT:return a._handleAnnotationCreatedEvent(b);case e.a.ANNOTATION_DELETED_EVENT:return a._handleAnnotationDeletedEvent(b)}})}},{key:"_handleAnnotationsLoadedEvent",value:function(a){var b=a.page,c=this.loadedContentFrames.get(b.idref),d=c?c.spineItem:null;b&&d&&b.idref===d.idref&&b.index===d.index?(c&&c.addLoadedAnnotations(a&&a.evtArgs&&Array.isArray(a.evtArgs)&&0<a.evtArgs.length?a.evtArgs[0]:[]),this.loadedContentFrames.put(d.idref,c),Object(t.debug)("literatum content frame handler : loaded annotations for ["+
d.idref+"]"),this.notifyAll(e.a.ANNOTATIONS_LOADED_EVENT,c)):Object(t.debug)("content frame for ["+b.idref+"] not found in content frame handler to update loaded annotations..")}},{key:"_handleAnnotationDeletedEvent",value:function(a){var b=a.page;a=a.evtArgs&&Array.isArray(a.evtArgs)&&1===a.evtArgs.length?a.evtArgs[0]:null;b&&a&&(a=a&&a.commentId?a.commentId:a&&a.id?a.id:null,(b=this.loadedContentFrames.get(b.idref))&&a&&b.loadedAnnotations&&b.loadedAnnotations.remove(a))}},{key:"_handleAnnotationCreatedEvent",
value:function(a){var b=a.page;a=a.evtArgs&&Array.isArray(a.evtArgs)&&1===a.evtArgs.length?a.evtArgs[0]:null;if(b&&a){var c=a&&a.commentId?a.commentId:a&&a.id?a.id:null;(b=this.loadedContentFrames.get(b.idref))&&c&&(b.loadedAnnotations||(b.loadedAnnotations=new r.HolderUtil),b.loadedAnnotations&&b.loadedAnnotations.put(c,a))}}}]);return b}(c.Subject))},Zk5a:function(c,h){var a=Date.now;c.exports=function(c){var d=0,b=0;return function(){var f=a(),h=16-(f-b);b=f;if(0<h){if(800<=++d)return arguments[0]}else d=
0;return c.apply(void 0,arguments)}}},bpPp:function(c,h,a){var f=a("M1c9"),d=a("zBOP"),b=a("5Zxu");c.exports=function(a,c,h){var m=null==a?0:a.length;if(!m)return[];h&&"number"!=typeof h&&d(a,c,h)?(c=0,h=m):(c=null==c?0:b(c),h=void 0===h?m:b(h));return f(a,c,h)}},cXIJ:function(c,h){c.exports=function(a,c){var d=null==a?null:"undefined"!==typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=d){var b=[],f=!0,h=!1,q;try{for(d=d.call(a);!(f=(q=d.next()).done)&&(b.push(q.value),!c||b.length!==c);f=
!0);}catch(A){h=!0;var m=A}finally{try{if(!f&&null!=d["return"])d["return"]()}finally{if(h)throw m;}}return b}};c.exports.__esModule=!0;c.exports["default"]=c.exports},cuGy:function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});h.debug=function(){(void 0!==D.logLevel?D.logLevel:d)<=f&&Function.prototype.bind.call(console.debug||console.log,console).apply(null,arguments)};h.info=function(){(void 0!==D.logLevel?D.logLevel:d)<=d&&Function.prototype.bind.call(console.info||console.log,console).apply(null,
arguments)};h.warn=function(){(void 0!==D.logLevel?D.logLevel:d)<=b&&Function.prototype.bind.call(console.warn||console.log,console).apply(null,arguments)};h.error=function(){(void 0!==D.logLevel?D.logLevel:d)<=w&&Function.prototype.bind.call(console.error||console.log,console).apply(null,arguments)};var f=0,d=1,b=2,w=3,D={};try{D=window||{},D.logLevel=f}catch(q){D={logLevel:f}}},dkdY:function(c,h){function a(f,d){c.exports=a=Object.setPrototypeOf||function(a,c){a.__proto__=c;return a};c.exports.__esModule=
!0;c.exports["default"]=c.exports;return a(f,d)}c.exports=a;c.exports.__esModule=!0;c.exports["default"]=c.exports},dwsC:function(c,h,a){h=a("86tT");var f=a("S7p9");h=(a=(a=a("Dc0G"))&&a.isMap)?f(a):h;c.exports=h},eP4g:function(c,h,a){var f=a("gHOb"),d=a("UnEC");c.exports=function(a){return d(a)&&"[object Set]"==f(a)}},eShC:function(c,h,a){var f=a("v9aJ");c.exports=function(a,b){var c=[];f(a,function(a,d,f){b(a,d,f)&&c.push(a)});return c}},hGXm:function(c,h){c.exports=function(a){for(var c,d=[];!(c=
a.next()).done;)d.push(c.value);return d}},hofT:function(c,h,a){h.a=function(a,c){function b(a){var b=(new DOMParser).parseFromString(a,"text/html"),e=b.querySelectorAll("meta");e=d()(e,function(a,b){void 0!==b.name&&null!==b.name?a[b.name]=b.content:void 0!==b.property&&null!==b.property?a[b.property]=b.content:void 0!==b.itemprop&&null!==b.itemprop?a[b.itemprop]=b.content:a[b[""]]=b.content;return a},{});if(u){b=annotatorHelper.recur(b.documentElement);b=partialMatch.find(u.replace(/\s/g,""),b.text);
var f=Array.isArray(b)?b.map(function(a){return a.c||0}).reduce(function(a,b){return a+b},0):b.c}c&&c.postMessage({id:m,meta:e,certainty:f,html:null==u?a:null,section:u,action:"loadPagePreviewDone"},h)}try{var h=c.Remarq.grovePrefix}catch(t){h=window.Remarq.grovePrefix}var m=a.data.id,w=a.data.href,u=a.data.section,e=a.data.contentType,r=a.data.contextRanges;if(a.data.text)b(a.data.text);else Object(f.a)(w,e,r).then(function(a){b(a)})["catch"](function(a){c&&c.postMessage({id:m,error:a.message,action:"loadPagePreviewError"},
h)})};var f=a("oGVf");c=a("M+Z9");var d=a.n(c)},hrPF:function(c,h){c.exports=function(a,c){var d=-1,b=a.length;for(c||(c=Array(b));++d<b;)c[d]=a[d];return c}},hygk:function(c,h,a){var f=a("YDHx");c.exports=function(a,b){return f(a,b)}},i4ON:function(c,h,a){var f=a("nw3t"),d=a("22B7"),b=Object.prototype.hasOwnProperty;c.exports=function(a,c,h){var m=a[c];b.call(a,c)&&d(m,h)&&(void 0!==h||c in a)||f(a,c,h)}},i6nN:function(c,h){c.exports=function(a,c,d){--d;for(var b=a.length;++d<b;)if(a[d]===c)return d;
return-1}},iFDI:function(c,h){var a={utf8:{stringToBytes:function(c){return a.bin.stringToBytes(unescape(encodeURIComponent(c)))},bytesToString:function(c){return decodeURIComponent(escape(a.bin.bytesToString(c)))}},bin:{stringToBytes:function(a){for(var c=[],b=0;b<a.length;b++)c.push(a.charCodeAt(b)&255);return c},bytesToString:function(a){for(var c=[],b=0;b<a.length;b++)c.push(String.fromCharCode(a[b]));return c.join("")}}};c.exports=a},iYj9:function(c,h){var a=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff\ufe0e\ufe0f]/;
c.exports=function(c){return a.test(c)}},"j/rp":function(c,h,a){var f=a("dkdY");c.exports=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}});Object.defineProperty(a,"prototype",{writable:!1});b&&f(a,b)};c.exports.__esModule=!0;c.exports["default"]=c.exports},jD7S:function(c,h,a){var f=a("tv3T"),d=a("ktak");c.exports=function(a,c){return a&&
f(c,d(c),a)}},jItp:function(c,h,a){function f(a,b,c,d){Object.defineProperty(b,c,{get:function(){return a[d]},set:function(b){a[d]=b},configurable:!1,enumerable:!0})}function d(){return(new Date).getTime()+"_"+Math.floor(99*Math.random())+1}function b(a,b,c,d,e){c=c||window.articleInfo&&window.articleInfo.siteUrl||window.location.href;e=e||window.articleInfo&&window.articleInfo.doi;a=a||"HTML";-1<c.indexOf("://")&&(c=c.substring(c.indexOf("://")+3));return b&&q()(b,function(b){var f=b.type.toUpperCase(),
m=b.context;m&&-1<m.indexOf("://")&&(m=m.substring(m.indexOf("://")+3));return f===a.toUpperCase()&&(m===c||e&&e===d)&&("HTML"!==a&&b.page||"HTML"===a&&!b.page)})[0]}Object.defineProperty(h,"__esModule",{value:!0});a.d(h,"setupProperty",function(){return f});a.d(h,"getMostRelativeContextRange",function(){return b});a.d(h,"WindowEventManager",function(){return e});a.d(h,"getRandomId",function(){return d});c=a("Z60a");var w=a.n(c);c=a("C9uT");var D=a.n(c);c=a("RyI1");var q=a.n(c);c=a("KgVm");var m=
a.n(c),A=a("JyB8");a.n(A);var u=function(){function a(b,c){w()(this,a);this.listener=b;this.unsubCallback=c}D()(a,[{key:"destroy",value:function(){this.unsubCallback=this.listener=null}}]);return a}(),e=function(){function a(b){w()(this,a);this.win=b;this.unsubCallbacks=new A.HolderUtil}D()(a,[{key:"subscribe",value:function(a,b,c,d){this.win&&b&&"function"===typeof b&&(d=b,c&&(d=b.bind(c)),this.unsubCallbacks.contains(a)&&Array.isArray(this.unsubCallbacks.get(a))?this.unsubCallbacks.get(a).push(new u(b,
d)):this.unsubCallbacks.put(a,[new u(b,d)]),this.win.addEventListener(a,d))}},{key:"unsubscribe",value:function(a,b){if(this.win&&a&&b){var c=this.unsubCallbacks.get(a);if(c&&Array.isArray(c)){var d=m()(c,function(a){return a&&a.listener===b});if(0<=d){var e=c[d];c.splice(d,1);this.win.removeEventListener(a,e.unsubCallback);e.destroy()}}}}},{key:"unsubscribeAll",value:function(a){if(this.win&&a){var b=this.unsubCallbacks.get(a);if(b&&Array.isArray(b))for(;0<b.length;){var c=b[0];b.splice(0,1);this.win.removeEventListener(a,
c.unsubCallback);c.destroy()}}}},{key:"destroy",value:function(){var a=this;this.unsubCallbacks&&(this.unsubCallbacks.values().forEach(function(b){return a.unsubscribeAll(b)}),this.unsubCallbacks.clear(),delete this.unsubCallbacks,delete this.win)}}]);return a}();(function(a){a&&!a.windowEventManager&&Object.defineProperty(a,"windowEventManager",{get:function(){var b=new e(a);return function(){return b}}(),set:function(a){},configurable:!1,enumerable:!0})})(window)},ktnU:function(c,h,a){var f=a("Hxdr");
c.exports=function(a,b){return f(b,function(b){return a[b]})}},kvU2:function(c,h,a){var f=a("Fkvj");c.exports=function(a){return f(a,5)}},mBFJ:function(c,h,a){a.d(h,"a",function(){return w});c=a("Oy1H");var f=a.n(c);c=a("Z60a");var d=a.n(c);c=a("C9uT");var b=a.n(c),w=function(){function a(){d()(this,a);this.id=(Math.random().toString(36)+"00000000000000000").slice(2,17)}b()(a,[{key:"populate",value:function(a){var b=this;return a&&"object"===f()(a)?(Object.keys(a).forEach(function(c){var d=a[c];if("id"!==
c&&"string"===typeof d)try{d=new Date(d)}catch(e){}b[c]=d}),!0):!1}},{key:"destroy",value:function(){var a=this;Object.key(a).forEach(function(b){delete a[b]})}},{key:"put",value:function(a){if(a&&a.surveyId){var b=a.surveyId,c=a.lastSeen?""+a.lastSeen:null,d=a.status;this[b]?(d=this[b].split("#",2),c=d[0],d=d[1],c=a.lastSeen?""+a.lastSeen:""+(c?c:""),c=a.status?c+"#"+a.status:c+(d?"#"+d:""),this[b]=c):this[b]=""+c?c:d;return!0}return!1}},{key:"delete",value:function(a){return a?(delete this[a],!0):
!1}}],[{key:"evtName",value:function(){return"rmq_jsp"}},{key:"expirationDate",value:function(){return 1E4}}]);return a}()},"mKB/":function(c,h,a){(function(c){var d=a("TQ3y"),b="object"==typeof h&&h&&!h.nodeType&&h,f=b&&"object"==typeof c&&c&&!c.nodeType&&c,D=(d=f&&f.exports===b?d.Buffer:void 0)?d.allocUnsafe:void 0;c.exports=function(a,b){if(b)return a.slice();b=a.length;b=D?D(b):new a.constructor(b);a.copy(b);return b}}).call(h,a("3IRH")(c))},moUy:function(c,h,a){var f=this&&this.__extends||function(){var a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();Object.defineProperty(h,"__esModule",{value:!0});a=function(){function a(a){var b=this;this.observers=[];a&&Array.isArray(a)&&a.filter(function(a){return a&&a.events&&Array.isArray(a.events)&&a.notify}).forEach(function(a){return b.subscribe(a)})}
a.prototype.notifyAll=function(a,c){(this.observers&&Array.isArray(this.observers)&&0<this.observers.length?this.observers.slice(0,this.observers.length):[]).forEach(function(b){if(b.events&&Array.isArray(b.events)&&-1<b.events.indexOf(a))b.notify(a,c);else if(b.events&&Array.isArray(b.events)&&b.name&&Array.isArray(b.name)){var d=-1;b.name.forEach(function(f){-1<(d=b.events.indexOf(a,d+1))&&f===a&&b.notify(a,c)})}})};a.prototype.subscribe=function(a){this.observers.push(a)};a.prototype.unsubscribe=
function(a){for(var b=0;b<this.observers.length;b++)if(this.observers[b]===a){this.observers.splice(b,1);break}};a.prototype.unsubscribeAll=function(){this.observers&&Array.isArray(this.observers)&&0<this.observers.length&&this.observers.splice(0,this.observers.length)};a.prototype.destroy=function(){this.observers.splice(0,this.observers.length);delete this.observers};return a}();h.Subject=a;h.isObserver=function(a){return void 0!==a.notify};h.isObserverCallback=function(a){return"function"===typeof a};
c=function(){function a(a,c){this.name=a;this.events=Array.isArray(a)?a:[a];"function"===typeof c&&(this.notify=c.bind(this))}a.prototype.notify=function(a,c){};a.prototype.destroy=function(){delete this.name;Array.isArray(this.events)&&this.events.splice(0,this.events.length);delete this.events};return a}();h.Observer=c;a=function(a){function b(b){var c=a.call(this)||this;c.val=null;c.name=b;return c}f(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.val},set:function(b){this.val=
b;a.prototype.notifyAll.call(this,this.name,this.val)},enumerable:!0,configurable:!0});return b}(a);h.ConcreteSubject=a;c=function(a){function b(b){b=a.call(this,b)||this;b.val=null;return b}f(b,a);Object.defineProperty(b.prototype,"value",{get:function(){return this.val},set:function(a){this.val=a},enumerable:!0,configurable:!0});b.prototype.notify=function(a,b){a===this.name&&(this.value=b)};return b}(c);h.ConcreteObserver=c},nIHh:function(c,h,a){h=a("NkRn");var f=a("hrPF"),d=a("gHOb"),b=a("bGc4"),
w=a("JDN0"),D=a("hGXm"),q=a("WFiI"),m=a("octw"),A=a("0ghZ"),u=a("L8MQ"),e=h?h.iterator:void 0;c.exports=function(a){if(!a)return[];if(b(a))return w(a)?A(a):f(a);if(e&&a[e])return D(a[e]());var c=d(a);return("[object Map]"==c?q:"[object Set]"==c?m:u)(a)}},nfWN:function(c,h,a){var f=a("1C79"),d=a("2247");c.exports=function(a,c){return f(d(a,c),1)}},nw3t:function(c,h,a){var f=a("p0bc");c.exports=function(a,b,c){"__proto__"==b&&f?f(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}},oGVf:function(c,
h,a){h.a=function(a,c,m){return new Promise(function(h,q){if(a===w.location.href)if(m){var e=Object(f.getMostRelativeContextRange)(c,m,a);if(e){var r=e.page;c=c||e.type;e=null;"EPUB"===c||"EPUB_PDF"===c?e=r?d.a.getInstance().getPage(r):d.a.getInstance().getPage():"PDF"===c?e=b.a.getInstance().getPage(r):"HTML"===c&&(e=Promise.resolve({html:document.documentElement.innerHTML}));if(e)e.then(function(a){var b=a.text;h(a.html||b)})["catch"](function(a){q(a)});else q("No page promise for page ".concat(r,
" in content ").concat(c))}}else h(document.documentElement.innerHTML);else if(0===w.location.href.indexOf("https://")&&0===a.indexOf("http://")&&(a=a.replace("http://","https://")),w.fetch)try{w.fetch(a,{method:"GET",mode:"cors",credentials:"include",redirect:"manual"}).then(function(b){w.fetch(a,{method:"GET",mode:"cors",credentials:"include",redirect:"follow"}).then(function(a){if(a.ok)a.text().then(function(a){h(a)})["catch"](function(a){q(a)});else q({status:b.status})})["catch"](function(a){q(a)})})["catch"](function(a){q(a)})}catch(R){q(R)}else{var t=
new XMLHttpRequest;t.open("GET",a,!0);t.onload=function(){var a=t.getResponseHeader("Content-Type");2!==Math.floor(t.status/100)&&q({status:t.status});!a||0<=a.indexOf("html")?h(t.response):q({contentType:a})};t.onerror=function(a){q(a)};t.send()}})};var f=a("jItp"),d=a("GCEA"),b=a("ObtK"),w=window},oqL2:function(c,h){c.exports=function(a){var c=null==a?0:a.length;return c?a[c-1]:void 0}},p0bc:function(c,h,a){h=a("ICSD");a:{try{var f=h(Object,"defineProperty");f({},"",{});var d=f;break a}catch(b){}d=
void 0}c.exports=d},pQJ6:function(c,h,a){var f=a("bGc4");c.exports=function(a,b){return function(c,d){if(null==c)return c;if(!f(c))return a(c,d);for(var h=c.length,m=b?h:-1,A=Object(c);(b?m--:++m<h)&&!1!==d(A[m],m,A););return c}}},py9u:function(c,h,a){var f=a("tv3T"),d=a("t8rQ");c.exports=function(a,c){return a&&f(c,d(c),a)}},qrcb:function(c,h,a){a.d(h,"a",function(){return f});a.d(h,"b",function(){return d});var f="application/epub",d="application/pdf"},rCVp:function(c,h,a){var f=a("1C79");c.exports=
function(a){return(null==a?0:a.length)?f(a,1):[]}},rpnb:function(c,h,a){h=a("tHks")();c.exports=h},s6UT:function(c,h,a){Object.defineProperty(h,"__esModule",{value:!0});h["default"]=function(){return function(a,c){function b(a){var b={"\\n":"\n","\\t":"\t"," ":" "};Object.keys(b).forEach(function(c){var d=new RegExp(c+"+","g"),f=b[c];a=a.replace(new RegExp(c+"+ *","g"),f);a=a.replace(d,f)});return a}var d=c&&c.trim;c=c&&c.pack;0!==a.indexOf("<")&&(d&&(a=a.trim()),c&&(a=b(a)),a=a.replace(/\n/g,"<br/>").replace(/\t/g,
"&emsp;"));c&&c&&(a=b(a),a=a.replace(/(((<br>)|(<br\/>))\s*)+/g,"<br/>"));return a}}},s96k:function(c,h){c.exports=function(a,c,d){for(var b=-1,f=null==a?0:a.length;++b<f;)if(d(c,a[b]))return!0;return!1}},sCxY:function(c,h,a){(function(c){function d(a,b){return a?a.split("/").map(function(a){return""===a?a:"*"!==a&&"."!==a?b+":"+a:a}).join("/"):a}function b(a,b,h){b=b||document;if(h){h=document.contentType&&-1!==document.contentType.indexOf("xhtml")?"xhtml":"rmq";a=d(a,h);h=function(a){var b={xhtml:"http://www.w3.org/1999/xhtml",
mathml:"http://www.w3.org/1998/Math/MathML"}[a];!b&&document.documentElement.lookupNamespaceURI&&(b=document.documentElement.lookupNamespaceURI(a));b||(b=document.documentElement.namespaceURI);return b};try{if(c(b).xpath)return c(b).xpath(a,h).toArray();var e=document.evaluate(a,b,h,0,null)}catch(r){Object(f.debug)("Failed to (jq)xpath",r)}}else try{e=document.evaluate(a,b,null,0,null)}catch(r){Object(f.debug)("Failed to (de)xpath",r)}if(e){if(Array.isArray(e))return e;if(0<e.resultType&&4>e.resultType)return b=
null,2===e.resultType?b=e.stringValue:3===e.resultType?b=""+e.booleanValue:1===e.resultType&&(b=""+e.numberValue),b;if(4<=e.resultType){b=null;if(4===e.resultType||5===e.resultType)for(b=[];null!=(a=e.iterateNext());)b.push(a);else if(8===e.resultType||9===e.resultType)b=[e.singleNodeValue];else if(6===e.resultType||7===e.resultType)b=[e.snapshotItem()];return b}}else return[]}h.a=function(a,c){c=c||document;return 0===q.length?b(a,c,!0):b(a,c,!1)};var f=a("cuGy");if(!document.evaluate||-1!==navigator.userAgent.indexOf("Trident/7.0")){var D=
a("LoU7");D.install()}var q=b("//html",document);0!==q.length||D||(D=a("LoU7"),D.install(),q=b("//html",document));0===q.length&&a("/JTF")}).call(h,a("7t+N"))},t8rQ:function(c,h,a){var f=a("7e4z"),d=a("G0Wc"),b=a("bGc4");c.exports=function(a){return b(a)?f(a,!0):d(a)}},tHks:function(c,h){c.exports=function(a){return function(c,d,b){var f=-1,h=Object(c);b=b(c);for(var q=b.length;q--;){var m=b[a?q:++f];if(!1===d(h[m],m,h))break}return c}}},tNLN:function(c,h){function a(f){c.exports=a=Object.setPrototypeOf?
Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};c.exports.__esModule=!0;c.exports["default"]=c.exports;return a(f)}c.exports=a;c.exports.__esModule=!0;c.exports["default"]=c.exports},tv3T:function(c,h,a){var f=a("i4ON"),d=a("nw3t");c.exports=function(a,c,h,q){var b=!h;h||(h={});for(var w=-1,u=c.length;++w<u;){var e=c[w],r=q?q(h[e],a[e],e,h,a):void 0;void 0===r&&(r=a[e]);b?d(h,e,r):f(h,e,r)}return h}},v9aJ:function(c,h,a){h=a("M6Wl");a=a("pQJ6")(h);c.exports=a},vi0E:function(c,
h,a){h=a("f931")(Object.getPrototypeOf,Object);c.exports=h},vzIA:function(c,h,a){a.d(h,"a",function(){return D});c=a("Z60a");var f=a.n(c);c=a("C9uT");var d=a.n(c),b=a("RTdn"),w=a("7t+N");w.__orig="rmq";window.rmqJquery=w;window.jQuery&&(window.jQuery.__orig="own");var D=function(){function a(b,c,d,e,h,q){f()(this,a);this.window=b;this.dataset=c?c:null;this.urlParams=h?h:null;this.grovePrefix=d?d:null;this.apiBase=e?e:null;this.gp=q?q:null;this.leftPanelId=this.resolveLeftPanelId();this.notesId=this.resolveNotesId();
this.groveSide=this.toExpandTimeout=this.toExpand=null;this.initNotesTabSelector()}d()(a,[{key:"initNotesTabSelector",value:function(){this.notesId&&w("#"+this.notesId).removeClass("js__disabled").attr("aria-disabled",!1).attr("tabindex","0")}},{key:"resolveLeftPanelId",value:function(){var a=null;window["readium-left-panel"]?a="readium-left-panel":window.leftPanelbtn&&(a="leftPanelbtn");return a}},{key:"resolveNotesId",value:function(){var a=null;window.notesDesktop&&w("#notesDesktop").is(":visible")?
a="notesDesktop":window.notes&&w("#notes").is(":visible")&&(a="notes");return a}},{key:"handleExpand",value:function(a){var b=this;this.toExpand=a;this.toExpandTimeout||(this.toExpandTimeout=setTimeout(function(){b.notesId=b.resolveNotesId();w("#"+b.leftPanelId);w("button.lpanel_toggle.btn");var a=b.nowExpanded();w("#remarq-api").is(":visible")||(a!==!!b.toExpand&&w("#leftPanelmobile").is(":visible")&&w("#leftPanelmobile").click(),window[b.notesId].click());b.toExpandTimeout=null},50))}},{key:"nowExpanded",
value:function(){var a=w("#"+this.leftPanelId);w("button.lpanel_toggle.btn");var b=a.height(),c=a.width(),d=a.position();return a.is(":visible")&&0<=d.left&&0<=d.top&&0<c&&0<b}},{key:"injectUnsupported",value:function(a){a=w(a||"#notes-tab-pane").empty().css({padding:"0px"})[0];return Object(b.installFrame)("GroveSide",this.grovePrefix+"web/unsupported.html",this.apiBase,this.grovePrefix,a,{minWidth:"100%",width:"100%",minHeight:"100%",height:"100%",background:"transparent"},this.dataset||{},this.urlParams||
{},this.gp||{},null,{title:"Remarq does not support this browser"})}},{key:"injectInTab",value:function(a){var c=this;a=w(a||"#notes-tab-pane").empty().css({padding:"0px"})[0];if(!this.groveSide){var d=w("button.lpanel_toggle.btn"),e=w("button#leftPanelmobile"),f=function(a){c.clickHandlerSending||(c.clickHandlerSending=setTimeout(function(){var a=c.nowExpanded();c.groveSide.contentWindow&&c.groveSide.contentWindow.postMessage({action:"resize",expanded:a,origin:"literatumHandler"},"*");c.clickHandlerSending=
null},50))};d.click(f);e.click(f);return Object(b.installFrame)("GroveSide",this.grovePrefix+"web/leftside.html",this.apiBase,this.grovePrefix,a,{},this.dataset,this.urlParams,this.gp,null,{title:"Remarq Widget"}).then(function(a){return c.groveSide=a})}w(a).children("#GroveSide")[0]||a.appendChild(this.groveSide);return Promise.resolve(this.groveSide)}}]);return a}()},xond:function(c,h,a){var f=a("FCuZ"),d=a("09Qt"),b=a("t8rQ");c.exports=function(a){return f(a,b,d)}},yVmd:function(c,h,a){c=Object.freeze({ANNOTATIONS_LOADED_EVENT:"annotationsLoaded",
ANNOTATION_DELETED_EVENT:"annotationDeleted",ANNOTATION_CREATED_EVENT:"annotationCreated",ANNOTATION_BEFORE_CREATE_EVENT:"beforeAnnotationCreated",beforeAnnotationUpdated:"beforeAnnotationUpdated",annotationUpdated:"annotationUpdated"});h.a=c},yzuE:function(c,h,a){var f=a("v9aJ"),d=a("bGc4");c.exports=function(a,c){var b=-1,h=d(a)?Array(a.length):[];f(a,function(a,d,f){h[++b]=c(a,d,f)});return h}},zBOP:function(c,h,a){var f=a("22B7"),d=a("bGc4"),b=a("ZGh9"),w=a("yCNF");c.exports=function(a,c,h){if(!w(h))return!1;
var m=typeof c;return("number"==m?d(h)&&b(c,h.length):"string"==m&&c in h)?f(h[c],a):!1}}});

//# sourceMappingURL=groveMainModule.d8246f4e.bundle.js.map